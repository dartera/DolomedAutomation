# Test info

- Name: Visual Regression - RÃ¼ckenschmerzen Page (Desktop) >> rueckenschmerzen-visual-desktop-fr
- Location: /Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/tests/Rueckenschmerzen/RueckenschmerzenUITest.spec.ts:34:9

# Error details

```
Error: expect(received).toBeLessThanOrEqual(expected)

Expected: <= 0.7
Received:    3.3738820538713807
    at VisualTestHelper.runVisualTest (/Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/utils/visual-test-helper.ts:89:41)
    at MultiLanguageVisualHelper.runIndividualLanguageTest (/Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/utils/multi-language-visual-helper.ts:56:5)
    at /Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/tests/Rueckenschmerzen/RueckenschmerzenUITest.spec.ts:35:7
```

# Page snapshot

```yaml
- heading "ðŸª Wir schÃ¤tzen Ihre PrivatsphÃ¤re" [level=1]
- paragraph: Wir verwenden Cookies, um Ihr Surferlebnis zu verbessern, personalisierte Anzeigen oder Inhalte einzusetzen und unseren Datenverkehr zu analysieren. Wenn Sie auf â€žAlle akzeptieren" klicken, stimmen Sie der Anwendung von Cookies zu.
- button "Anpassen"
- button "Alle akzeptieren"
- banner:
  - navigation:
    - link "DOLOMED_Logo_RGB_Claim 1":
      - /url: https://dolomed.ch/fr/
      - img "DOLOMED_Logo_RGB_Claim 1"
    - button "Open/Close Menu":
      - img
    - button "FranÃ§ais":
      - link "FranÃ§ais":
        - /url: "#"
        - img
        - text: FranÃ§ais
- heading "Traitement du mal de dos" [level=1]:
  - text: Traitement du
  - strong: mal de dos
- 'heading "Traitement complet de la douleur de la colonne vertÃ©brale : des approches modernes pour soulager le mal de dos" [level=2]'
- paragraph: Le mal de dos est l'une des affections les plus courantes qui peuvent toucher les personnes de tout Ã¢ge. Souvent, les traitements conventionnels de kinÃ©sithÃ©rapie ou les mÃ©dicaments anti-inflammatoires ne suffisent pas. Chez Dolomed, nous proposons une large gamme d'options thÃ©rapeutiques pour traiter efficacement le mal de dos et amÃ©liorer la qualitÃ© de vie de nos patients. Notre traitement de la douleur de la colonne vertÃ©brale comprend plusieurs mÃ©thodes innovantes qui sont adaptÃ©es Ã  vos besoins individuels.
- text: Prendre rendez-vous
- link "Appeler maintenant":
  - /url: tel:032 324 39 90
- img "Dolomed-Behandlung-Von-Nervenschmerzen-Hero-Illustrator-01-3-1-1"
- img "Dolomed-Bewegungsapparat-Arthrose-circle-light"
- img "Dolomed-Behandlung-von-Ruckenschmerzen-Was-Illustration-0-2048x2048"
- img "Dolomed-Bewegungsapparat-arthrose-circles-4"
- heading "Qu'est-ce que la thÃ©rapie de la douleur pour la colonne vertÃ©brale ?" [level=2]
- paragraph: Le traitement de la douleur dans la colonne vertÃ©brale vise Ã  soulager la douleur dans la rÃ©gion de la colonne vertÃ©brale, par exemple dans le cadre de changements dÃ©gÃ©nÃ©ratifs ou d'une hernie discale, et Ã  restaurer la fonctionnalitÃ©. Cela couvre Ã  la fois les douleurs dorsales aiguÃ«s et chroniques et peut combiner diffÃ©rentes mÃ©thodes de traitement pour obtenir des rÃ©sultats optimaux. Souvent, un bon traitement de la douleur permet Ã©galement d'Ã©viter une intervention chirurgicale.
- heading "Diagnostic et prÃ©paration du traitement interventionnel de la douleur" [level=2]
- paragraph: Un diagnostic approfondi est la premiÃ¨re Ã©tape d'un traitement efficace de la douleur. Chez Dolomed, nous utilisons des techniques d'imagerie modernes telles que la radiographie, l'IRM et le scanner pour identifier la cause exacte du mal de dos. Sur la base de ces diagnostics, nous Ã©tablissons un plan de traitement personnalisÃ©.
- list:
  - listitem:
    - strong: "les techniques d'imagerie mÃ©dicale :"
    - text: Utilisation de la radiographie, de l'IRM et du scanner pour un diagnostic prÃ©cis
  - listitem:
    - strong: "AnamnÃ¨se :"
    - text: enregistrement dÃ©taillÃ© des antÃ©cÃ©dents mÃ©dicaux et des plaintes actuelles.
- img "Dolomed-Behandlung-von-Ruckenschmerzen-Diagnostik-Illustration-02-2048x2048"
- img "Dolomed-Behandlung-von-Ruckenschmerzen-Therapieoptionen-Illustration-03"
- img "Dolomed-Bewegungsapparat-arthrose-circles-4"
- heading "Options thÃ©rapeutiques" [level=2]
- paragraph: Chez Dolomed, nous proposons une grande variÃ©tÃ© de thÃ©rapies pour traiter les maux de dos, notamment
- list:
  - listitem:
    - strong: "Les infiltrations :"
    - text: Cette mÃ©thode consiste Ã  injecter des mÃ©dicaments directement dans la zone affectÃ©e afin de rÃ©duire l'inflammation et la douleur.
  - listitem:
    - strong: "ThÃ©rapie pÃ©riradiculaire :"
    - text: injections spÃ©cifiques pour traiter les douleurs des racines nerveuses.
  - listitem:
    - strong: "Injection pÃ©ridurale lombaire :"
    - text: injections dans l'espace pÃ©ridural pour soulager la douleur en cas de problÃ¨mes de la colonne lombaire.
  - listitem:
    - strong: "Neuromodulation :"
    - text: impulsions Ã©lectriques dÃ©livrÃ©es par des dispositifs implantÃ©s pour bloquer et moduler les signaux de douleur.
  - listitem:
    - strong: "Perfusion de kÃ©tamine :"
    - text: Administration de kÃ©tamine pour soulager la douleur chronique et amÃ©liorer la qualitÃ© de vie.
  - listitem:
    - strong: "TENS (stimulation nerveuse Ã©lectrique transcutanÃ©e) :"
    - text: MÃ©thode non invasive de soulagement de la douleur par stimulation Ã©lectrique des nerfs.
  - listitem:
    - strong: "PRP (plasma riche en plaquettes) :"
    - text: Utilisation des propres facteurs de croissance de l'organisme pour favoriser la guÃ©rison et soulager la douleur.
  - listitem:
    - strong: "Acupuncture :"
    - text: mÃ©thode traditionnelle chinoise qui consiste Ã  insÃ©rer des aiguilles dans des points spÃ©cifiques du corps pour soulager la douleur et rÃ©tablir l'Ã©quilibre Ã©nergÃ©tique.
- heading "DÃ©roulement du traitement de la douleur" [level=2]
- paragraph: "Un traitement typique de la douleur chez Dolomed comprend plusieurs Ã©tapes afin de s'assurer que le traitement est sÃ»r et efficace :"
- list:
  - listitem:
    - strong: "Entretien initial et diagnostic :"
    - text: enregistrement des antÃ©cÃ©dents mÃ©dicaux et rÃ©alisation d'examens d'imagerie.
  - listitem:
    - strong: "Ã‰laboration du plan de traitement :"
    - text: BasÃ© sur les diagnostics et les besoins individuels du patient.
  - listitem:
    - strong: "Mise en Å“uvre de la thÃ©rapie :"
    - text: application des mÃ©thodes de traitement sÃ©lectionnÃ©es sous surveillance mÃ©dicale.
  - listitem:
    - strong: "Suivi :"
    - text: rendez-vous de contrÃ´le rÃ©guliers pour surveiller le succÃ¨s du traitement et l'adapter si nÃ©cessaire.
- img "Dolomed-Behandlung-Von-Nervenschmerzen-CRPS-Illustrator-01-1-1"
- img "Dolomed-Bewegungsapparat-Spastik-Illustration-03"
- img "Dolomed-Behandlung-Von-Nervenschmerzen-Postoperativer-Illustrator-01-1"
- heading "Avantages du traitement de la douleur chez Dolomed" [level=2]
- paragraph: "Notre traitement complet de la douleur offre de nombreux avantages aux patients souffrant de maux de dos :"
- list:
  - listitem:
    - strong: "Plans de traitement personnalisÃ©s :"
    - text: chaque patient reÃ§oit un plan adaptÃ© Ã  ses besoins.
  - listitem:
    - strong: "Techniques modernes :"
    - text: utilisation des procÃ©dures et technologies les plus rÃ©centes pour soulager la douleur.
  - listitem:
    - strong: "Approche holistique :"
    - text: combinaison de diffÃ©rentes thÃ©rapies pour des rÃ©sultats optimaux.
  - listitem:
    - strong: "Des spÃ©cialistes expÃ©rimentÃ©s :"
    - text: nos mÃ©decins sont spÃ©cialisÃ©s dans le traitement des maux de dos et des maladies de la colonne vertÃ©brale.
- heading "Comment continuer ?" [level=2]
- img "Dolomed-Bewegungsapparat-Wieweiter-Illustration-02"
- text: Vous souffrez de douleurs dorsales ou dâ€™hernies discales ? DÃ©couvrez les avantages des infiltrations chez Dolomed. Nos mÃ©decins expÃ©rimentÃ©s se feront un plaisir de vous conseiller sur les diffÃ©rentes options thÃ©rapeutiques et dâ€™Ã©tablir un plan de traitement personnalisÃ© pour vous. Contactez-nous dÃ¨s aujourdâ€™hui Ã  lâ€™adresse
- link "info@dolomed.ch":
  - /url: mailto:info@dolomed.ch
- text: pour prendre rendez-vous et en savoir plus sur nos options de traitement.
- link "Prendre un rendez-vous":
  - /url: "#"
- heading "Foire aux questions (FAQ)" [level=2]
- button "Comment se dÃ©roule un traitement de la douleur ?" [expanded]
- region "Comment se dÃ©roule un traitement de la douleur ?":
  - paragraph: Le traitement de la douleur commence par un diagnostic et une anamnÃ¨se dÃ©taillÃ©s. Sur la base des rÃ©sultats, un plan de traitement individuel est Ã©tabli, qui peut inclure diffÃ©rentes options thÃ©rapeutiques.
- button "Combien de temps dure le traitement de la douleur dorsale ?"
- button "Quand un traitement de la douleur dorsale est-il utile ?"
- button "Quel est le succÃ¨s d'un traitement de la douleur dorsale ?"
- button "Que fait-on dans le cadre d'un traitement de la douleur dorsale ?"
- heading "ZUWEISUNG / BON DE DÃ‰LÃ‰GATION" [level=2]
- paragraph: Centre de compÃ©tence pour la mÃ©decine de la douleur Centre de compÃ©tence pour la mÃ©decine de la douleur
- list:
  - listitem: Site Biel / Site Bienne
- list:
  - listitem: Bahnhofplatz 2C / Place de la Gare 2C 2Ã¨me Ã©tage / Stock, 2502 Biel-Bienne
- list:
  - listitem:
    - img
    - text: NumÃ©ro de tÃ©lÃ©phone
- list:
  - listitem:
    - link "+41 32 324 39 90":
      - /url: tel:+41%2032%20324%2039%2090
- list:
  - listitem:
    - img
    - text: E-mail
- list:
  - listitem:
    - link "info@dolomed.ch":
      - /url: mailto:info@dolomed.ch
- list:
  - listitem: Standort Bern / Site de Berne
- list:
  - listitem: Sidlerstrasse 4, 3012 Bern-Berne 2. Stock / 2Ã¨me Ã©tages, 2502 Bern-Berne
- list:
  - listitem:
    - img
    - text: NumÃ©ro de tÃ©lÃ©phone
- list:
  - listitem:
    - link "+41 32 324 39 90":
      - /url: tel:+41%2032%20324%2039%2090
- list:
  - listitem:
    - img
    - text: E-mail
- list:
  - listitem:
    - link "info@dolomed.ch":
      - /url: mailto:info@dolomed.ch
- contentinfo:
  - link "Image link":
    - /url: https://dolomed.ch/
    - img "Image link"
  - paragraph: Suivez nous
  - list:
    - listitem:
      - link:
        - /url: https://www.instagram.com/dolomed.ag
        - img
  - text: Pages
  - link "Accueil":
    - /url: https://dolomed.ch/fr/
  - link "Offre":
    - /url: https://dolomed.ch/fr/#angebot
  - link "Pour les patients et les dÃ©lÃ©gations":
    - /url: https://dolomed.ch/fr/#patienten
  - link "Contact":
    - /url: https://dolomed.ch/fr/#kontakt
  - link "TEAM":
    - /url: https://dolomed.ch/fr/#team
  - link "CarriÃ¨re":
    - /url: https://dolomed.ch/fr/#karriere
  - text: Maladies
  - link "Appareil locomoteur":
    - /url: /fr/appareil-locomoteur/
  - link "Douleurs d'organes internes":
    - /url: /fr/douleurs-dorganes-internes/
  - link "Maux de tÃªte et douleurs faciales":
    - /url: /fr/maux-de-tete-et-douleurs-faciales/
  - link "Maladies vasculaires":
    - /url: /fr/maladies-vasculaires/
  - link "Traitement des douleurs nerveuses":
    - /url: /fr/traitement-des-douleurs-nerveuses/
  - text: ThÃ©rapie
  - link "Stimulation nerveuse":
    - /url: /fr/stimulation-nerveuse/
  - link "Un soulagement naturel grÃ¢ce Ã  l'acupuncture":
    - /url: fr/soulagement-naturel-par-lacupuncture/
  - link "douleurs chroniques":
    - /url: /fr/douleurs-chroniques/
  - link "Traitement de la douleur chronique":
    - /url: /fr/traitement-des-maladies-chroniques/
  - link "Traitement du mal de dos":
    - /url: /fr/traitement-du-mal-de-dos/
  - link "Plasma (PRP) pour un traitement efficace":
    - /url: /fr/plasma-prp/
  - link "ThÃ©rapie par cellules souches":
    - /url: /fr/therapie-par-cellules-souches/
  - link "ThÃ©rapie au laser":
    - /url: /fr/therapie-au-laser/
  - link "ThÃ©rapie extracorporelle par ondes de choc":
    - /url: /fr/therapie-extracorporelle-par-ondes-de-choc/
  - link "ThÃ©rapie par le mouvement et entraÃ®nement des fascias":
    - /url: /fr/therapie-par-le-mouvement-et-entrainement-des-fascias/
  - link "ThÃ©rapie topique Ã  base de capsaÃ¯cine hautement concentrÃ©e":
    - /url: /fr/therapie-topique-a-base-de-capsaicine-hautement-concentree/
  - text: Mentions lÃ©gales
  - link "Mentions lÃ©gales":
    - /url: /fr/mentions-legales/
  - link "Protection des donnÃ©es":
    - /url: /fr/protection-des-donnees/
  - paragraph: Copyright 2025 â€“ Tous droits rÃ©servÃ©s Dolomed.
- button
- button "retour":
  - img
  - text: retour
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- heading "Nous aimons toujours discuter avec toi" [level=2]
- text: Parlons
- link "Phone +41 32 324 39 90":
  - /url: tel:+41323243990
  - img "Phone"
  - text: +41 32 324 39 90
- link "Email info@dolomed.ch":
  - /url: mailto:info@dolomed.ch
  - img "Email"
  - text: info@dolomed.ch
- list:
  - listitem:
    - img "list icon"
    - heading "Prendre rendez-vous" [level=3]
  - listitem:
    - link "list icon Support technique":
      - /url: https://dolomed.ch/fr/#kontaktform
      - img "list icon"
      - heading "Support technique" [level=3]
- button "retour":
  - img
  - text: retour
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- text: Envoyer un message Ã  Dolomed Si vous avez des questions ou des prÃ©occupations, veuillez nous contacter. Des rÃ©ponses rapides et une aide sont garanties.
- list
- form "Formulaire de contact":
  - paragraph:
    - text: Nom
    - textbox "Nom"
  - paragraph:
    - text: Adresse Ã©lectronique
    - textbox "Adresse Ã©lectronique"
  - paragraph:
    - text: NumÃ©ro de tÃ©lÃ©phone
    - textbox "NumÃ©ro de tÃ©lÃ©phone"
  - paragraph:
    - text: Ã‰crivez votre message ci-dessous
    - textbox "Ã‰crivez votre message ci-dessous"
  - paragraph:
    - button "Envoyer"
- button "retour":
  - img
  - text: retour
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- text: Demander Ã  Ãªtre rappelÃ© Si vous avez des questions ou des prÃ©occupations, veuillez nous contacter. Des rÃ©ponses rapides et une aide sont garanties.
- list
- form "Formulaire de contact":
  - paragraph:
    - text: Nom
    - textbox "Nom"
  - paragraph:
    - text: Adresse Ã©lectronique
    - textbox "Adresse Ã©lectronique"
  - paragraph:
    - text: NumÃ©ro de tÃ©lÃ©phone
    - textbox "NumÃ©ro de tÃ©lÃ©phone"
  - paragraph:
    - text: Ã‰crivez votre message ci-dessous
    - textbox "Ã‰crivez votre message ci-dessous"
  - paragraph:
    - button "Envoyer"
- link "Go to top":
  - /url: "#"
  - img
- text: tablet
```

# Test source

```ts
   1 | import { test, expect, Page, Browser } from '@playwright/test';
   2 | import { ImageComparison, DiffResult, SizeMismatchTolerance } from './image-diff';
   3 |
   4 | export interface VisualTestConfig {
   5 |   url: string;
   6 |   testName: string;
   7 |   diffThreshold?: number;
   8 |   viewport?: { width: number; height: number };
   9 |   waitForLoadState?: 'load' | 'domcontentloaded' | 'networkidle';
   10 |   customStyles?: string;
   11 |   scrollToBottom?: boolean;
   12 |   waitAfterScroll?: number;
   13 |   sizeMismatchTolerance?: SizeMismatchTolerance;
   14 | }
   15 |
   16 | export class VisualTestHelper {
   17 |   private imageComparison: ImageComparison;
   18 |   private page!: Page;
   19 |   private timestamp: string;
   20 |   private currentUser: string;
   21 |
   22 |   constructor() {
   23 |     this.imageComparison = new ImageComparison();
   24 |     this.timestamp = new Date().toISOString().replace('T', ' ').slice(0, 19);
   25 |     this.currentUser = process.env.USER || process.env.USERNAME || 'unknown';
   26 |   }
   27 |
   28 |   async setup(browser: Browser, viewport = { width: 1366, height: 768 }): Promise<void> {
   29 |     const context = await browser.newContext({ viewport });
   30 |     this.page = await context.newPage();
   31 |     console.log(`Test setup initialized at ${this.timestamp} by ${this.currentUser}`);
   32 |   }
   33 |
   34 |   async cleanup(): Promise<void> {
   35 |     if (this.page) {
   36 |       await this.page.close();
   37 |     }
   38 |   }
   39 |
   40 |   async runVisualTest(config: VisualTestConfig): Promise<DiffResult> {
   41 |     const {
   42 |       url,
   43 |       testName,
   44 |       diffThreshold = 0.1,
   45 |       waitForLoadState = 'networkidle',
   46 |       customStyles,
   47 |       scrollToBottom = true,
   48 |       waitAfterScroll = 1000,
   49 |       sizeMismatchTolerance
   50 |     } = config;
   51 |
   52 |     console.log(`Starting visual test at ${this.timestamp}`);
   53 |     console.log(`Test running by user: ${this.currentUser}`);
   54 |     console.log('Page dimensions:', await this.page.viewportSize());
   55 |
   56 |     try {
   57 |       // Navigate to the page
   58 |       await this.page.goto(url);
   59 |       await this.page.waitForLoadState(waitForLoadState);
   60 |
   61 |       // Apply custom styles if provided
   62 |       if (customStyles) {
   63 |         await this.page.addStyleTag({ content: customStyles });
   64 |       }
   65 |
   66 |       // Auto-scroll if enabled
   67 |       if (scrollToBottom) {
   68 |         await this.autoScroll(waitAfterScroll);
   69 |       }
   70 |
   71 |       // Perform image comparison
   72 |       const diffResult = await this.imageComparison.compareScreenshots(
   73 |         this.page, 
   74 |         testName, 
   75 |         diffThreshold, 
   76 |         sizeMismatchTolerance
   77 |       );
   78 |       const reportPath = this.imageComparison.generateDiffReport(testName, diffResult);
   79 |       
   80 |       console.log(`
   81 |         Test Results:
   82 |         - Timestamp: ${this.timestamp}
   83 |         - User: ${this.currentUser}
   84 |         - Report Path: ${reportPath}
   85 |         - Diff Percentage: ${diffResult.diffPercentage.toFixed(2)}%
   86 |       `);
   87 |
   88 |       // Assert the diff percentage
>  89 |       expect(diffResult.diffPercentage).toBeLessThanOrEqual(diffThreshold);
      |                                         ^ Error: expect(received).toBeLessThanOrEqual(expected)
   90 |
   91 |       return diffResult;
   92 |
   93 |     } catch (error) {
   94 |       console.error(`
   95 |         Test failed at ${this.timestamp}
   96 |         User: ${this.currentUser}
   97 |         Error: ${error}
   98 |       `);
   99 |       throw error;
  100 |     }
  101 |   }
  102 |
  103 |   private async autoScroll(waitAfterScroll: number = 1000): Promise<void> {
  104 |     await this.page.evaluate(async () => {
  105 |       await new Promise<void>((resolve) => {
  106 |         let totalHeight = 0;
  107 |         const distance = 100;
  108 |         const timer = setInterval(() => {
  109 |           const scrollHeight = document.documentElement.scrollHeight;
  110 |           window.scrollBy(0, distance);
  111 |           totalHeight += distance;
  112 |
  113 |           if (totalHeight >= scrollHeight) {
  114 |             clearInterval(timer);
  115 |             window.scrollTo(0, scrollHeight);
  116 |             resolve();
  117 |           }
  118 |         }, 240);
  119 |       });
  120 |     });
  121 |
  122 |     await this.page.waitForTimeout(waitAfterScroll);
  123 |   }
  124 |
  125 |   // Getter method for accessing the image comparison instance if needed
  126 |   get imageComparisonInstance(): ImageComparison {
  127 |     return this.imageComparison;
  128 |   }
  129 |
  130 |   // Getter method for accessing the page instance if needed
  131 |   getPage(): Page {
  132 |     return this.page;
  133 |   }
  134 | }
```