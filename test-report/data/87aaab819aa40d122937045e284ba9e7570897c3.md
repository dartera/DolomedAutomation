# Test info

- Name: Visual Regression - Stammzellentherapie Page (Desktop) >> stammzellentherapie-visual-desktop-de
- Location: /Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/tests/Stammzellentherapie/StammzellentherapieUITest.spec.ts:34:9

# Error details

```
Error: expect(received).toBeLessThanOrEqual(expected)

Expected: <= 0.7
Received:    3.293699905704856
    at VisualTestHelper.runVisualTest (/Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/utils/visual-test-helper.ts:89:41)
    at MultiLanguageVisualHelper.runIndividualLanguageTest (/Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/utils/multi-language-visual-helper.ts:56:5)
    at /Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/tests/Stammzellentherapie/StammzellentherapieUITest.spec.ts:35:7
```

# Page snapshot

```yaml
- heading "ðŸª Wir schÃ¤tzen Ihre PrivatsphÃ¤re" [level=1]
- paragraph: Wir verwenden Cookies, um Ihr Surferlebnis zu verbessern, personalisierte Anzeigen oder Inhalte einzusetzen und unseren Datenverkehr zu analysieren. Wenn Sie auf â€žAlle akzeptieren" klicken, stimmen Sie der Anwendung von Cookies zu.
- button "Anpassen"
- button "Alle akzeptieren"
- banner:
  - navigation:
    - link "DOLOMED_Logo_RGB_Claim 1":
      - /url: /
      - img "DOLOMED_Logo_RGB_Claim 1"
    - button "Open/Close Menu":
      - img
    - button "Deutsch":
      - link "Deutsch":
        - /url: "#"
        - img
        - text: Deutsch
- img "Dolomed-Bewegungsapparat-Tendinopathie-Illustration-02"
- heading "Stammzellentherapie" [level=1]
- 'heading "Moderne Heilungsmethoden mit Stammzellentherapie: Effektive BehandlungsmÃ¶glichkeiten bei Dolomed" [level=2]'
- paragraph: Die Stammzellentherapie ist eine innovative und zukunftsweisende Behandlungsmethode, die die kÃ¶rpereigenen Regenerationsprozesse nutzt, um verschiedene Erkrankungen zu behandeln. Bei Dolomed setzen unsere fÃ¼hrenden Spezialisten auf die Stammzellentherapie aus der stomavaskulÃ¤ren Fraktion (Fettgewebe), um unseren Patienten eine effektive und sichere Therapie zu bieten.
- link "Termin vereinbaren":
  - /url: "#"
- link "Jetzt anrufen":
  - /url: tel:032 324 39 90
- img "Dolomed-Bewegungsapparat-Arthrose-circle-light"
- img "Dolomed-Bewegungsapparat-arthrose-circles-4"
- heading "Was ist die Stammzellentherapie?" [level=2]
- paragraph: Die Stammzellentherapie verwendet kÃ¶rpereigene Stammzellen, um geschÃ¤digtes Gewebe zu reparieren und die Heilung zu fÃ¶rdern. Diese Stammzellen werden aus dem Fettgewebe des Patienten gewonnen und anschlieÃŸend aufbereitet, um eine konzentrierte LÃ¶sung zu erhalten, die reich an regenerativen Zellen ist. Diese Therapieform wird in der Schweiz und weltweit immer populÃ¤rer und bietet zahlreiche EinsatzmÃ¶glichkeiten.
- list:
  - listitem:
    - strong: "Stammzellen:"
    - text: KÃ¶rpereigene Zellen mit der FÃ¤higkeit, sich in verschiedene Zelltypen zu verwandeln und geschÃ¤digtes Gewebe zu reparieren.
  - listitem:
    - strong: "SVF (Stromal Vascular Fraction):"
    - text: Eine konzentrierte Mischung aus Stammzellen und Wachstumsfaktoren, die aus dem Fettgewebe gewonnen wird
- img "Dolomed-Bewegungsapparat-Tendinopathie-Illustration-02"
- heading "EinsatzmÃ¶glichkeiten der Stammzellentherapie" [level=2]
- paragraph: "Die Stammzellentherapie kann bei einer Vielzahl von Erkrankungen und Verletzungen eingesetzt werden, darunter:"
- list:
  - listitem:
    - strong: "Arthrose:"
    - text: Behandlung von Gelenkarthrose, insbesondere im Knie und in der HÃ¼fte, zur Reduktion von Schmerzen und Verbesserung der Gelenkfunktion.
  - listitem:
    - strong: "Sportverletzungen:"
    - text: Beschleunigung der Heilung von Muskel-, Sehnen- und Bandverletzungen.
  - listitem:
    - strong: "OrthopÃ¤dische Erkrankungen:"
    - text: Behandlung von chronischen RÃ¼ckenschmerzen und degenerativen Erkrankungen der WirbelsÃ¤ule, aber auch im Bereich von peripheren Gelenken.
  - listitem:
    - strong: "Traumatologie:"
    - text: UnterstÃ¼tzung der Heilung nach UnfÃ¤llen und Operationen.
- img "Dolomed-Bewegungsapparat-arthrose-circles-4"
- heading "Theoretische Grundlagen der Stammzellentherapie" [level=2]
- paragraph: Stammzellen haben die einzigartige FÃ¤higkeit, sich in verschiedene Zelltypen zu differenzieren und beschÃ¤digtes Gewebe zu regenerieren. Bei der SVF-Therapie werden diese Zellen aus dem Fettgewebe des Patienten extrahiert, in einer Zentrifuge aufbereitet und dann in die betroffene Stelle injiziert. Die Kombination aus Wachstumsfaktoren und Zytokine in der SVF fÃ¶rdern die Heilung und reduzieren EntzÃ¼ndungen. Eine wirkliche Neubildung von beispielsweise Knorpel findet in der Regel nicht statt. Die injizierten Stammzellen Ã¤ndern die Umgebungsbedingungen im Gelenk (pH, saure Proteasen) und tragen so zu einer Schmerzlinderung und einer Regeneration der umliegenden Strukturen bei.
- list:
  - listitem:
    - strong: "Gewinnung:"
    - text: Die Stammzellen werden durch eine minimalinvasive Fettabsaugung gewonnen. Diese ist kosmetisch nicht relevant. Parallel wird Blut entnommen, um Platelet Rich Plasma (PRP) mit angereicherten Wachstumsfaktoren zu gewinnen.
  - listitem:
    - strong: "Aufbereitung:"
    - text: Die Zellen und das PRP werden in einer speziellen Zentrifuge konzentriert und aufbereitet.
  - listitem:
    - strong: "Injektion:"
    - text: Die aufbereiteten Stammzellen werden mit dem PRP gemischt und in die betroffene Stelle injiziert, um die Heilung zu fÃ¶rdern.
- heading "Ablauf der Stammzellentherapie bei Dolomed" [level=2]
- paragraph: "Eine typische Stammzellentherapie bei Dolomed umfasst mehrere Schritte:"
- list:
  - listitem:
    - strong: "ErstgesprÃ¤ch und Diagnostik:"
    - text: Detaillierte Anamnese und bildgebende Verfahren zur genauen Diagnose.
  - listitem:
    - strong: "Gewinnung, Aufbereitung und Injektion der Stammzellen (ein OP-Termin):"
    - text: Entnahme von Fettgewebe unter lokaler BetÃ¤ubung oder Sedation. Konzentration der Stammzellen in einer Zentrifuge. Injektion der Stammzellen in die betroffene Struktur.
  - listitem:
    - strong: "Nachsorge:"
    - text: RegelmÃ¤ÃŸige Kontrolltermine zur Ãœberwachung des Heilungsprozesses.
- img "Dolomed-Bewegungsapparat-Spastik-Illustration-02"
- img "Dolomed-Bewegungsapparat-arthrose-circles-4"
- heading "Vorteile der Stammzelltherapie" [level=2]
- paragraph: "Die Stammzelltherapie bietet zahlreiche Vorteile fÃ¼r Patienten mit verschiedenen Beschwerden:"
- list:
  - listitem:
    - strong: "NatÃ¼rliche Heilung:"
    - text: Nutzung kÃ¶rpereigener Zellen zur FÃ¶rderung der Heilung.
  - listitem:
    - strong: "Minimalinvasiv:"
    - text: Schonende Methode mit geringer Belastung fÃ¼r den Patienten.
  - listitem:
    - strong: "Anhaltende Ergebnisse:"
    - text: Bei erfolgreicher Therapie zum Teil jahrelange Beschwerdereduktion.
  - listitem:
    - strong: "Vielseitige Anwendung:"
    - text: Effektiv bei einer Vielzahl von Erkrankungen und Verletzungen.
- heading "Wie weiter?" [level=2]
- img "Dolomed-Bewegungsapparat-Wieweiter-Illustration-02"
- text: Interessieren Sie sich fÃ¼r die Stammzelltherapie und wÃ¼nschen weitere Infos zu diesem Gebiet? Entdecken Sie die Vorteile dieser innovativen Behandlung bei Dolomed. Unsere erfahrenen Ã„rzte beraten Sie gerne Ã¼ber die Indikation und MÃ¶glichkeiten der Stammzelltherapie und erstellen einen individuellen Behandlungsplan fÃ¼r Sie. Kontaktieren Sie uns noch heute unter
- link "info@dolomed.ch":
  - /url: mailto:info@dolomed.ch
- text: ", um einen Termin zu vereinbaren und mehr Ã¼ber unsere Therapieoptionen zu erfahren."
- link "Einen Termin vereinbaren":
  - /url: "#"
- img "faq-dots-bg-img"
- heading "HÃ¤ufig gestellte Fragen (FAQ)" [level=2]
- button "Ist Stammzellentherapie in der Schweiz erlaubt?" [expanded]
- region "Ist Stammzellentherapie in der Schweiz erlaubt?": Ja, die Stammzelltherapie ist in der Schweiz erlaubt und wird unter strengen gesetzlichen Auflagen durchgefÃ¼hrt, um die Sicherheit der Patienten zu gewÃ¤hrleisten.
- button "Welche Risiken gibt es bei der Stammzelltherapie?"
- button "Wie funktioniert die Stammzellentherapie?"
- button "Welche Krankheiten kÃ¶nnen mit Stammzellen behandelt werden?"
- button "Werden die Kosten der Stammzelltherapie von der Krankenkasse Ã¼bernommen?"
- button "Wie viel kostet eine Stammzelltherapie?"
- button "Wer darf eine Stammzelltherapie durchfÃ¼hren?"
- button "Wie lange dauert die Regeneration nach einer Stammzelltherapie?"
- heading "ZUWEISUNG / BON DE DÃ‰LÃ‰GATION" [level=2]
- paragraph: Kompetenzzentrum fÃ¼r Schmerzmedizin Centre de compÃ©tence pour la mÃ©decine de la douleur
- list:
  - listitem: Standort Biel / Site Bienne
- list:
  - listitem: Bahnhofplatz 2C / Place de la Gare 2C 2. Stock / 2Ã¨me Ã©tage, 2502 Biel-Bienne
- list:
  - listitem:
    - img
    - text: Telefonnummer
- list:
  - listitem:
    - link "+41 32 324 39 90":
      - /url: tel:+41%2032%20324%2039%2090
- list:
  - listitem:
    - img
    - text: E-Mail
- list:
  - listitem:
    - link "info@dolomed.ch":
      - /url: mailto:info@dolomed.ch
- list:
  - listitem: Standort Bern / Site de Berne
- list:
  - listitem: Sidlerstrasse 4, 3012 Bern-Berne 2. Stock / 2Ã¨me Ã©tages, 2502 Bern-Berne
- list:
  - listitem:
    - img
    - text: Telefonnummer
- list:
  - listitem:
    - link "+41 32 324 39 90":
      - /url: tel:+41%2032%20324%2039%2090
- list:
  - listitem:
    - img
    - text: E-Mail
- list:
  - listitem:
    - link "info@dolomed.ch":
      - /url: mailto:info@dolomed.ch
- contentinfo:
  - link "Image link":
    - /url: https://dolomed.ch/
    - img "Image link"
  - paragraph: Folgen Sie uns
  - list:
    - listitem:
      - link:
        - /url: https://www.instagram.com/dolomed.ag
        - img
  - text: Seiten
  - link "Startseite":
    - /url: https://dolomed.ch/
  - link "Angebot":
    - /url: https://dolomed.ch///#angebot
  - link "FÃ¼r Patienten und Zuweiser":
    - /url: https://dolomed.ch//#patienten
  - link "Kontakt":
    - /url: https://dolomed.ch//#kontakt
  - link "Team":
    - /url: https://dolomed.ch/#team
  - link "Karriere":
    - /url: https://dolomed.ch//#karriere
  - text: Krankheiten
  - link "Bewegungsapparat":
    - /url: /bewegungsapparat/
  - link "Schmerzen Innerer organe":
    - /url: https://dolomed.ch/schmerzen-innerer-organe/
  - link "kopfschmerzen und gesichtsschmerzen":
    - /url: https://dolomed.ch/kopfschmerzen-und-gesichtsschmerzen/
  - link "gefaesserkrankungen":
    - /url: https://dolomed.ch/gefaesserkrankungen/
  - link "behandlung von nervenschmerzen":
    - /url: https://dolomed.ch/behandlung-von-nervenschmerzen/
  - text: Therapie
  - link "nervenstimulation":
    - /url: https://dolomed.ch/nervenstimulation/
  - link "natuerliche linderung durch akupunktur":
    - /url: https://dolomed.ch/natuerliche-linderung-durch-akupunktur/
  - link "chronischen schmerzen":
    - /url: https://dolomed.ch/chronischen-schmerzen/
  - link "behandlung von chronischen":
    - /url: https://dolomed.ch/behandlung-von-chronischen/
  - link "behandlung von rueckenschmerzen":
    - /url: https://dolomed.ch/behandlung-von-rueckenschmerzen/
  - link "plasma prp":
    - /url: https://dolomed.ch/plasma-prp/
  - link "stammzellentherapie":
    - /url: https://dolomed.ch/stammzellentherapie/
  - link "Lasertherapie":
    - /url: /lasertherapie/
  - link "Extrakorporale StoÃŸwellentherapie":
    - /url: /extrakorporale-stosswellentherapie/
  - link "Bewegungstherapie und Faszientraining":
    - /url: /bewegungstherapie-und-faszientraining/
  - link "Topische Therapie mit hochkonzentriertem Capsaicin":
    - /url: /topische-therapie-mit-hochkonzentriertem-capsaicin/
  - text: Rechtliches
  - link "Impressum":
    - /url: /impressum
  - link "Datenschutz":
    - /url: /datenschutz
  - paragraph: Copyright 2025 â€“ Alle Rechte vorbehalten Dolomed.
- button
- button:
  - img
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- heading "Wir freuen uns immer mit Ihnen zu sprechen." [level=2]
- text: Unterhalten wir uns
- link "Phone +41 32 324 39 90":
  - /url: tel:+41323243990
  - img "Phone"
  - text: +41 32 324 39 90
- link "Email info@dolomed.ch":
  - /url: mailto:info@dolomed.ch
  - img "Email"
  - text: info@dolomed.ch
- text: Wir sind Mo-Fr von 8-18 Uhr kostenlos fÃ¼r Sie erreichbar.
- list:
  - listitem:
    - img "list icon"
    - heading "Termin vereinbaren" [level=3]
  - listitem:
    - link "list icon Kontaktseite Ã¶ffnen":
      - /url: https://dolomed.ch/#kontaktform
      - img "list icon"
      - heading "Kontaktseite Ã¶ffnen" [level=3]
- button:
  - img
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- text: Senden Sie eine Nachricht an Dolomed Bei Fragen oder Anliegen wenden Sie sich bitte an uns. Schnelle Antworten und Hilfe sind garantiert.
- list
- form "Kontaktformular":
  - paragraph:
    - text: Name
    - textbox "Name"
  - paragraph:
    - text: E-Mail-Adresse
    - textbox "E-Mail-Adresse"
  - paragraph:
    - text: Telefonnummer
    - textbox "Telefonnummer"
  - paragraph:
    - text: Schreiben Sie unten Ihre Nachricht
    - textbox "Schreiben Sie unten Ihre Nachricht"
  - paragraph:
    - button "Senden"
- button:
  - img
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- text: RÃ¼ckruf anfordern Bei Fragen oder Anliegen wenden Sie sich bitte an uns. Schnelle Antworten und Hilfe sind garantiert.
- list
- form "Kontaktformular":
  - paragraph:
    - text: Name
    - textbox "Name"
  - paragraph:
    - text: E-Mail-Adresse
    - textbox "E-Mail-Adresse"
  - paragraph:
    - text: Telefonnummer
    - textbox "Telefonnummer"
  - paragraph:
    - text: Schreiben Sie unten Ihre Nachricht
    - textbox "Schreiben Sie unten Ihre Nachricht"
  - paragraph:
    - button "Senden"
- link "Go to top":
  - /url: "#"
  - img
- text: tablet
```

# Test source

```ts
   1 | import { test, expect, Page, Browser } from '@playwright/test';
   2 | import { ImageComparison, DiffResult, SizeMismatchTolerance } from './image-diff';
   3 |
   4 | export interface VisualTestConfig {
   5 |   url: string;
   6 |   testName: string;
   7 |   diffThreshold?: number;
   8 |   viewport?: { width: number; height: number };
   9 |   waitForLoadState?: 'load' | 'domcontentloaded' | 'networkidle';
   10 |   customStyles?: string;
   11 |   scrollToBottom?: boolean;
   12 |   waitAfterScroll?: number;
   13 |   sizeMismatchTolerance?: SizeMismatchTolerance;
   14 | }
   15 |
   16 | export class VisualTestHelper {
   17 |   private imageComparison: ImageComparison;
   18 |   private page!: Page;
   19 |   private timestamp: string;
   20 |   private currentUser: string;
   21 |
   22 |   constructor() {
   23 |     this.imageComparison = new ImageComparison();
   24 |     this.timestamp = new Date().toISOString().replace('T', ' ').slice(0, 19);
   25 |     this.currentUser = process.env.USER || process.env.USERNAME || 'unknown';
   26 |   }
   27 |
   28 |   async setup(browser: Browser, viewport = { width: 1366, height: 768 }): Promise<void> {
   29 |     const context = await browser.newContext({ viewport });
   30 |     this.page = await context.newPage();
   31 |     console.log(`Test setup initialized at ${this.timestamp} by ${this.currentUser}`);
   32 |   }
   33 |
   34 |   async cleanup(): Promise<void> {
   35 |     if (this.page) {
   36 |       await this.page.close();
   37 |     }
   38 |   }
   39 |
   40 |   async runVisualTest(config: VisualTestConfig): Promise<DiffResult> {
   41 |     const {
   42 |       url,
   43 |       testName,
   44 |       diffThreshold = 0.1,
   45 |       waitForLoadState = 'networkidle',
   46 |       customStyles,
   47 |       scrollToBottom = true,
   48 |       waitAfterScroll = 1000,
   49 |       sizeMismatchTolerance
   50 |     } = config;
   51 |
   52 |     console.log(`Starting visual test at ${this.timestamp}`);
   53 |     console.log(`Test running by user: ${this.currentUser}`);
   54 |     console.log('Page dimensions:', await this.page.viewportSize());
   55 |
   56 |     try {
   57 |       // Navigate to the page
   58 |       await this.page.goto(url);
   59 |       await this.page.waitForLoadState(waitForLoadState);
   60 |
   61 |       // Apply custom styles if provided
   62 |       if (customStyles) {
   63 |         await this.page.addStyleTag({ content: customStyles });
   64 |       }
   65 |
   66 |       // Auto-scroll if enabled
   67 |       if (scrollToBottom) {
   68 |         await this.autoScroll(waitAfterScroll);
   69 |       }
   70 |
   71 |       // Perform image comparison
   72 |       const diffResult = await this.imageComparison.compareScreenshots(
   73 |         this.page, 
   74 |         testName, 
   75 |         diffThreshold, 
   76 |         sizeMismatchTolerance
   77 |       );
   78 |       const reportPath = this.imageComparison.generateDiffReport(testName, diffResult);
   79 |       
   80 |       console.log(`
   81 |         Test Results:
   82 |         - Timestamp: ${this.timestamp}
   83 |         - User: ${this.currentUser}
   84 |         - Report Path: ${reportPath}
   85 |         - Diff Percentage: ${diffResult.diffPercentage.toFixed(2)}%
   86 |       `);
   87 |
   88 |       // Assert the diff percentage
>  89 |       expect(diffResult.diffPercentage).toBeLessThanOrEqual(diffThreshold);
      |                                         ^ Error: expect(received).toBeLessThanOrEqual(expected)
   90 |
   91 |       return diffResult;
   92 |
   93 |     } catch (error) {
   94 |       console.error(`
   95 |         Test failed at ${this.timestamp}
   96 |         User: ${this.currentUser}
   97 |         Error: ${error}
   98 |       `);
   99 |       throw error;
  100 |     }
  101 |   }
  102 |
  103 |   private async autoScroll(waitAfterScroll: number = 1000): Promise<void> {
  104 |     await this.page.evaluate(async () => {
  105 |       await new Promise<void>((resolve) => {
  106 |         let totalHeight = 0;
  107 |         const distance = 100;
  108 |         const timer = setInterval(() => {
  109 |           const scrollHeight = document.documentElement.scrollHeight;
  110 |           window.scrollBy(0, distance);
  111 |           totalHeight += distance;
  112 |
  113 |           if (totalHeight >= scrollHeight) {
  114 |             clearInterval(timer);
  115 |             window.scrollTo(0, scrollHeight);
  116 |             resolve();
  117 |           }
  118 |         }, 240);
  119 |       });
  120 |     });
  121 |
  122 |     await this.page.waitForTimeout(waitAfterScroll);
  123 |   }
  124 |
  125 |   // Getter method for accessing the image comparison instance if needed
  126 |   get imageComparisonInstance(): ImageComparison {
  127 |     return this.imageComparison;
  128 |   }
  129 |
  130 |   // Getter method for accessing the page instance if needed
  131 |   getPage(): Page {
  132 |     return this.page;
  133 |   }
  134 | }
```