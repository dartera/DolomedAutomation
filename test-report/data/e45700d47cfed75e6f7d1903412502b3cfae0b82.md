# Test info

- Name: Visual Regression - Akupunktur Page (Desktop) >> akupunktur-visual-desktop-de
- Location: /Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/tests/akupunktur/AkupunkturPageUITest.spec.ts:34:9

# Error details

```
Error: expect(received).toBeLessThanOrEqual(expected)

Expected: <= 0.7
Received:    2.756111927649679
    at VisualTestHelper.runVisualTest (/Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/utils/visual-test-helper.ts:89:41)
    at MultiLanguageVisualHelper.runIndividualLanguageTest (/Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/utils/multi-language-visual-helper.ts:56:5)
    at /Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/tests/akupunktur/AkupunkturPageUITest.spec.ts:35:7
```

# Page snapshot

```yaml
- heading "ðŸª Wir schÃ¤tzen Ihre PrivatsphÃ¤re" [level=1]
- paragraph: Wir verwenden Cookies, um Ihr Surferlebnis zu verbessern, personalisierte Anzeigen oder Inhalte einzusetzen und unseren Datenverkehr zu analysieren. Wenn Sie auf â€žAlle akzeptieren" klicken, stimmen Sie der Anwendung von Cookies zu.
- button "Anpassen"
- button "Alle akzeptieren"
- banner:
  - navigation:
    - link "DOLOMED_Logo_RGB_Claim 1":
      - /url: /
      - img "DOLOMED_Logo_RGB_Claim 1"
    - button "Open/Close Menu":
      - img
    - button "Deutsch":
      - link "Deutsch":
        - /url: "#"
        - img
        - text: Deutsch
- 'heading "NatÃ¼rliche Linderung durch Akupunktur: Eine bewÃ¤hrte Methode der traditionellen chinesischen Medizin" [level=1]':
  - text: "NatÃ¼rliche Linderung durch Akupunktur: Eine bewÃ¤hrte Methode der"
  - strong: traditionellen
  - text: chinesischen
  - strong: Medizin
- paragraph: Akupunktur ist eine jahrtausendealte Praxis der traditionellen chinesischen Medizin, die durch das Einstechen feiner Nadeln an spezifischen Punkten des KÃ¶rpers die Lebensenergie (Qi) beeinflusst. Wenn der Fluss dieser Energie gestÃ¶rt ist, kann das gezielte Stechen dieser Punkte die Blockaden lÃ¶sen und das Gleichgewicht wiederherstellen. Akupunktur wurde lange und ausgiebig praktiziert. Es konnten mit Akupunktur Kopfschmerzen, Bauchschmerzen, Schmerzen des Bewegungsapparats und UnruhezustÃ¤nde sehr gut behandelt werden.
- paragraph: Bei Dolomed bieten wir Akupunktur als Teil unserer ganzheitlichen Therapiekonzepte an, um Schmerzen zu lindern und die LebensqualitÃ¤t unserer Patienten zu verbessern.
- link "Termin vereinbaren":
  - /url: "#"
- link "Jetzt anrufen":
  - /url: tel:032 324 39 90
- img "Dolomed-Behandlung-Von-Nervenschmerzen-Hero-Illustrator-01"
- img "Dolomed-Bewegungsapparat-Arthrose-circle-light"
- img "Dolomed-Natuerliche-linderung-durch-Akupunktur-was-Illustrator-01"
- img "Dolomed-Bewegungsapparat-arthrose-circles-4"
- heading "Was ist Akupunktur?" [level=2]
- paragraph: Akupunktur ist eine Therapieform, bei der dÃ¼nne Nadeln in bestimmte Punkte des KÃ¶rpers gestochen werden. Diese Punkte liegen entlang der Meridiane, durch die nach der Lehre der traditionellen chinesischen Medizin die Lebensenergie flieÃŸt. Durch die Stimulation dieser Punkte sollen Blockaden gelÃ¶st und das energetische Gleichgewicht wiederhergestellt werden.
- paragraph: Die Traditionell Chinesische Medizin zeichnet im Gegensatz zur westlichen Medizin ein eher funktionelles Bild des menschlichen KÃ¶rpers, weniger ein anatomisches. Eine Kombination beider Sichtweisen hilft uns, ein ganzheitliches Bild des Menschen zu sehen.
- heading "Akupunktur bei Kopfschmerzen und MigrÃ¤ne" [level=2]
- paragraph: Akupunktur hat sich als wirksam bei der Behandlung von Kopfschmerzen, einschlieÃŸlich MigrÃ¤ne und chronischen Kopfschmerzen inkl. Spannungskopfschmerzen, erwiesen. Zahlreiche Studien haben gezeigt, dass Akupunktur die HÃ¤ufigkeit und IntensitÃ¤t von Kopfschmerzen reduzieren kann.
- heading "Vorteile der Akupunktur bei Kopfschmerzen:" [level=3]
- list:
  - listitem: Reduktion der KopfschmerzhÃ¤ufigkeit und -intensitÃ¤t
  - listitem: Linderung von MigrÃ¤ne und Spannungskopfschmerzen
  - listitem: Verbesserung der LebensqualitÃ¤t durch natÃ¼rliche Schmerzlinderung
- img "Dolomed-Natuerliche-linderung-durch-Akupunktur-Akupunktur-Illustrator-01-1"
- img "Dolomed-Natuerliche-linderung-durch-Akupunktur-wasIllustrator-01-1"
- img "Dolomed-Bewegungsapparat-arthrose-circles-4"
- heading "Akupunktur bei Regelschmerzen" [level=2]
- paragraph: Der weibliche Zyklus und die hormonellen VerÃ¤nderungen, die damit einhergehen, kÃ¶nnen bisweilen starke Symptome wie Kopfschmerzen, Bauchschmerzen und Ãœbelkeit verursachen. Akupunktur kann hier eine sanfte Methode zur Linderung der Beschwerden unserer Patientinnen sein.
- heading "Vorteile der Anwendung von Akupunktur zur Reduktion von Symptomen der Regel:" [level=3]
- list:
  - listitem: Prophylaxe (Vorbeugung) von negativen Symptomen
  - listitem: Linderung von Schmerzen Ã¼ber lÃ¤ngere Zeit ohne Medikamente
  - listitem: Verbesserung der LebensqualitÃ¤t durch natÃ¼rliche Schmerzlinderung
- heading "Weitere Anwendungen der Akupunktur" [level=2]
- paragraph: Neben der Behandlung von Kopfschmerzen, MigrÃ¤ne und Regelschmerzen wird
- heading "Akupunktur auch erfolgreich bei anderen Beschwerden eingesetzt:" [level=3]
- list:
  - listitem:
    - strong: "Akupunktur bei Tinnitus:"
    - text: Linderung von OhrgerÃ¤uschen und Verbesserung des Wohlbefindens.
  - listitem:
    - strong: "Akupunktur bei SchwindelgefÃ¼hl:"
    - text: Reduktion von Schwindel und GleichgewichtsstÃ¶rungen.
  - listitem:
    - strong: "Akupunktur bei Ãœbelkeit:"
    - text: Effektive Behandlung von Ãœbelkeit und Erbrechen, insbesondere wÃ¤hrend der Schwangerschaft oder bei Chemotherapie.
  - listitem:
    - strong: "Akupunktur bei Schmerzen:"
    - text: Vor allem Schmerzen im Bereich des Bewegungsapparats, aber auch der inneren Organe, kann die Akupunktur in vielen FÃ¤llen zur Vorbeugung und Behandlung eingesetzt werden.
- img "Dolomed-Natuerliche-linderung-durch-Akupunktur-Weitere-Illustrator-01"
- img "Dolomed-Bewegungsapparat-Spastik-Illustration-02"
- img "Dolomed-Natuerliche-linderung-durch-Akupunktur-Wie-Illustrator-01-1"
- img "Dolomed-Bewegungsapparat-arthrose-circles-4"
- heading "Wie funktioniert Akupunktur?" [level=2]
- paragraph: Die Akupunkturbehandlung stimuliert das Nervensystem und fÃ¶rdert die Freisetzung von Endorphinen, die natÃ¼rliche Schmerzmittel des KÃ¶rpers. Zudem verbessert sie die Durchblutung und unterstÃ¼tzt die Muskelentspannung, was zur Schmerzlinderung beitrÃ¤gt. Es kommt zum positiven Effekt auf StÃ¶rungen des KÃ¶rpers und der Psyche mit Besserung des allgemeinen Befindens.
- heading "Der Ablauf einer Akupunktursitzung" [level=2]
- paragraph: ZunÃ¤chst werden die Akupunkturnadeln an spezifische Akupunkturpunkte gesetzt. Es folgt eine Ruhephase mit den liegenden Nadeln fÃ¼r ca. 20-30 Minuten. WÃ¤hrend dieser Zeit sollen Sie sich entspannen oder schlafen. Anschliessend werden die Nadeln wieder entfernt.
- paragraph: Wie hÃ¤ufig eine Sitzung stattfinden soll, ob einmal pro Woche oder mehr, wird durch Ihren behandelnden Arzt individuell festgelegt.
- img "Dolomed-Natuerliche-linderung-durch-Akupunktur-Der-Illustrator-01-1"
- img "Dolomed-Natuerliche-linderung-durch-Akupunktur-Kosten-Illustrator-01-1"
- img "Dolomed-Bewegungsapparat-arthrose-circles-4"
- heading "Kosten und Krankenkasse" [level=2]
- paragraph: GrundsÃ¤tzlich ist eine Akupunktur-Behandlung in der Schweiz erstattungspflichtig, das heisst die Grundversicherung Ã¼bernimmt die Kosten der Behandlung. Die KostenÃ¼bernahme ist jedoch an bestimmten Bedingungen geknÃ¼pft. Die behandelnde Person muss hierfÃ¼r ein Arzt sein mit einer Zusatzausbildung. Im Gegensatz hierzu wird eine Behandlung von Personen mit anderer, nicht-Ã¤rztlicher Ausbildung wie zum Beispiel Heilpraktiker oder TCM-Therapeuten grundsÃ¤tzlich nicht erstattet und ist wiederum an eine Zusatzversicherung geknÃ¼pft.
- paragraph: Akupunktur wird bei Dolomed ausschliesslich von Ã„rzten mit einer Zusatzausbildung praktiziert.
- heading "Wie weiter?" [level=2]
- text: Leiden Sie unter RÃ¼ckenschmerzen oder BandscheibenvorfÃ¤llen? Entdecken Sie die Vorteile der Infiltrationen bei Dolomed. Unsere erfahrenen Ã„rzte beraten Sie gerne Ã¼ber die verschiedenen TherapiemÃ¶glichkeiten und erstellen einen individuellen Behandlungsplan fÃ¼r Sie. Kontaktieren Sie uns noch heute unter
- link "info@dolomed.ch":
  - /url: mailto:info@dolomed.ch
- text: ", um einen Termin zu vereinbaren und mehr Ã¼ber unsere BehandlungsmÃ¶glichkeiten zu erfahren."
- link "Einen Termin vereinbaren":
  - /url: "#"
- heading "HÃ¤ufig gestellte Fragen (FAQ)" [level=2]
- button "Was bewirkt eine Akupunkturnadel im Kopf?" [expanded]
- region "Was bewirkt eine Akupunkturnadel im Kopf?":
  - paragraph: Eine Akupunkturnadel im Kopf stimuliert spezifische Akupunkturpunkte, die die Freisetzung von Endorphinen fÃ¶rdern und die Durchblutung verbessern, was zur Linderung von Kopfschmerzen beitragen kann.
- button "Kann die Behandlung mit Akupunktur Kopfschmerzen auslÃ¶sen ?"
- button "Wann sollte Akupunktur nicht angewendet werden?"
- button "Wie lange dauert es, bis die Akupunktur wirkt?"
- button "Wo ist der Akupunkturpunkt fÃ¼r Kopfschmerzen?"
- button "Wie schnell hilft Akupunktur bei MigrÃ¤ne? Hilft sie auch zur Vorbeugung?"
- button "Was sind die Vorteile der Akupunktur gegenÃ¼ber anderen Therapien?"
- button "Was ist der Unterschied zwischen Akupunktur und Scheinakupunktur?"
- button "Bieten Sie auch andere TCM-Behandlungen an wie Tuina-Massage?"
- heading "ZUWEISUNG / BON DE DÃ‰LÃ‰GATION" [level=2]
- paragraph: Kompetenzzentrum fÃ¼r Schmerzmedizin Centre de compÃ©tence pour la mÃ©decine de la douleur
- list:
  - listitem: Standort Biel / Site Bienne
- list:
  - listitem: Bahnhofplatz 2C / Place de la Gare 2C 2. Stock / 2Ã¨me Ã©tage, 2502 Biel-Bienne
- list:
  - listitem:
    - img
    - text: Telefonnummer
- list:
  - listitem:
    - link "+41 32 324 39 90":
      - /url: tel:+41%2032%20324%2039%2090
- list:
  - listitem:
    - img
    - text: E-Mail
- list:
  - listitem:
    - link "info@dolomed.ch":
      - /url: mailto:info@dolomed.ch
- list:
  - listitem: Standort Bern / Site de Berne
- list:
  - listitem: Sidlerstrasse 4, 3012 Bern-Berne 2. Stock / 2Ã¨me Ã©tages, 2502 Bern-Berne
- list:
  - listitem:
    - img
    - text: Telefonnummer
- list:
  - listitem:
    - link "+41 32 324 39 90":
      - /url: tel:+41%2032%20324%2039%2090
- list:
  - listitem:
    - img
    - text: E-Mail
- list:
  - listitem:
    - link "info@dolomed.ch":
      - /url: mailto:info@dolomed.ch
- contentinfo:
  - link "Image link":
    - /url: https://dolomed.ch/
    - img "Image link"
  - paragraph: Folgen Sie uns
  - list:
    - listitem:
      - link:
        - /url: https://www.instagram.com/dolomed.ag
        - img
  - text: Seiten
  - link "Startseite":
    - /url: https://dolomed.ch/
  - link "Angebot":
    - /url: https://dolomed.ch///#angebot
  - link "FÃ¼r Patienten und Zuweiser":
    - /url: https://dolomed.ch//#patienten
  - link "Kontakt":
    - /url: https://dolomed.ch//#kontakt
  - link "Team":
    - /url: https://dolomed.ch/#team
  - link "Karriere":
    - /url: https://dolomed.ch//#karriere
  - text: Krankheiten
  - link "Bewegungsapparat":
    - /url: /bewegungsapparat/
  - link "Schmerzen Innerer organe":
    - /url: https://dolomed.ch/schmerzen-innerer-organe/
  - link "kopfschmerzen und gesichtsschmerzen":
    - /url: https://dolomed.ch/kopfschmerzen-und-gesichtsschmerzen/
  - link "gefaesserkrankungen":
    - /url: https://dolomed.ch/gefaesserkrankungen/
  - link "behandlung von nervenschmerzen":
    - /url: https://dolomed.ch/behandlung-von-nervenschmerzen/
  - text: Therapie
  - link "nervenstimulation":
    - /url: https://dolomed.ch/nervenstimulation/
  - link "natuerliche linderung durch akupunktur":
    - /url: https://dolomed.ch/natuerliche-linderung-durch-akupunktur/
  - link "chronischen schmerzen":
    - /url: https://dolomed.ch/chronischen-schmerzen/
  - link "behandlung von chronischen":
    - /url: https://dolomed.ch/behandlung-von-chronischen/
  - link "behandlung von rueckenschmerzen":
    - /url: https://dolomed.ch/behandlung-von-rueckenschmerzen/
  - link "plasma prp":
    - /url: https://dolomed.ch/plasma-prp/
  - link "stammzellentherapie":
    - /url: https://dolomed.ch/stammzellentherapie/
  - link "Lasertherapie":
    - /url: /lasertherapie/
  - link "Extrakorporale StoÃŸwellentherapie":
    - /url: /extrakorporale-stosswellentherapie/
  - link "Bewegungstherapie und Faszientraining":
    - /url: /bewegungstherapie-und-faszientraining/
  - link "Topische Therapie mit hochkonzentriertem Capsaicin":
    - /url: /topische-therapie-mit-hochkonzentriertem-capsaicin/
  - text: Rechtliches
  - link "Impressum":
    - /url: /impressum
  - link "Datenschutz":
    - /url: /datenschutz
  - paragraph: Copyright 2025 â€“ Alle Rechte vorbehalten Dolomed.
- button
- button:
  - img
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- heading "Wir freuen uns immer mit Ihnen zu sprechen." [level=2]
- text: Unterhalten wir uns
- link "Phone +41 32 324 39 90":
  - /url: tel:+41323243990
  - img "Phone"
  - text: +41 32 324 39 90
- link "Email info@dolomed.ch":
  - /url: mailto:info@dolomed.ch
  - img "Email"
  - text: info@dolomed.ch
- text: Wir sind Mo-Fr von 8-18 Uhr kostenlos fÃ¼r Sie erreichbar.
- list:
  - listitem:
    - img "list icon"
    - heading "Termin vereinbaren" [level=3]
  - listitem:
    - link "list icon Kontaktseite Ã¶ffnen":
      - /url: https://dolomed.ch/#kontaktform
      - img "list icon"
      - heading "Kontaktseite Ã¶ffnen" [level=3]
- button:
  - img
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- text: Senden Sie eine Nachricht an Dolomed Bei Fragen oder Anliegen wenden Sie sich bitte an uns. Schnelle Antworten und Hilfe sind garantiert.
- list
- form "Kontaktformular":
  - paragraph:
    - text: Name
    - textbox "Name"
  - paragraph:
    - text: E-Mail-Adresse
    - textbox "E-Mail-Adresse"
  - paragraph:
    - text: Telefonnummer
    - textbox "Telefonnummer"
  - paragraph:
    - text: Schreiben Sie unten Ihre Nachricht
    - textbox "Schreiben Sie unten Ihre Nachricht"
  - paragraph:
    - button "Senden"
- button:
  - img
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- text: RÃ¼ckruf anfordern Bei Fragen oder Anliegen wenden Sie sich bitte an uns. Schnelle Antworten und Hilfe sind garantiert.
- list
- form "Kontaktformular":
  - paragraph:
    - text: Name
    - textbox "Name"
  - paragraph:
    - text: E-Mail-Adresse
    - textbox "E-Mail-Adresse"
  - paragraph:
    - text: Telefonnummer
    - textbox "Telefonnummer"
  - paragraph:
    - text: Schreiben Sie unten Ihre Nachricht
    - textbox "Schreiben Sie unten Ihre Nachricht"
  - paragraph:
    - button "Senden"
- link "Go to top":
  - /url: "#"
  - img
- text: tablet
```

# Test source

```ts
   1 | import { test, expect, Page, Browser } from '@playwright/test';
   2 | import { ImageComparison, DiffResult, SizeMismatchTolerance } from './image-diff';
   3 |
   4 | export interface VisualTestConfig {
   5 |   url: string;
   6 |   testName: string;
   7 |   diffThreshold?: number;
   8 |   viewport?: { width: number; height: number };
   9 |   waitForLoadState?: 'load' | 'domcontentloaded' | 'networkidle';
   10 |   customStyles?: string;
   11 |   scrollToBottom?: boolean;
   12 |   waitAfterScroll?: number;
   13 |   sizeMismatchTolerance?: SizeMismatchTolerance;
   14 | }
   15 |
   16 | export class VisualTestHelper {
   17 |   private imageComparison: ImageComparison;
   18 |   private page!: Page;
   19 |   private timestamp: string;
   20 |   private currentUser: string;
   21 |
   22 |   constructor() {
   23 |     this.imageComparison = new ImageComparison();
   24 |     this.timestamp = new Date().toISOString().replace('T', ' ').slice(0, 19);
   25 |     this.currentUser = process.env.USER || process.env.USERNAME || 'unknown';
   26 |   }
   27 |
   28 |   async setup(browser: Browser, viewport = { width: 1366, height: 768 }): Promise<void> {
   29 |     const context = await browser.newContext({ viewport });
   30 |     this.page = await context.newPage();
   31 |     console.log(`Test setup initialized at ${this.timestamp} by ${this.currentUser}`);
   32 |   }
   33 |
   34 |   async cleanup(): Promise<void> {
   35 |     if (this.page) {
   36 |       await this.page.close();
   37 |     }
   38 |   }
   39 |
   40 |   async runVisualTest(config: VisualTestConfig): Promise<DiffResult> {
   41 |     const {
   42 |       url,
   43 |       testName,
   44 |       diffThreshold = 0.1,
   45 |       waitForLoadState = 'networkidle',
   46 |       customStyles,
   47 |       scrollToBottom = true,
   48 |       waitAfterScroll = 1000,
   49 |       sizeMismatchTolerance
   50 |     } = config;
   51 |
   52 |     console.log(`Starting visual test at ${this.timestamp}`);
   53 |     console.log(`Test running by user: ${this.currentUser}`);
   54 |     console.log('Page dimensions:', await this.page.viewportSize());
   55 |
   56 |     try {
   57 |       // Navigate to the page
   58 |       await this.page.goto(url);
   59 |       await this.page.waitForLoadState(waitForLoadState);
   60 |
   61 |       // Apply custom styles if provided
   62 |       if (customStyles) {
   63 |         await this.page.addStyleTag({ content: customStyles });
   64 |       }
   65 |
   66 |       // Auto-scroll if enabled
   67 |       if (scrollToBottom) {
   68 |         await this.autoScroll(waitAfterScroll);
   69 |       }
   70 |
   71 |       // Perform image comparison
   72 |       const diffResult = await this.imageComparison.compareScreenshots(
   73 |         this.page, 
   74 |         testName, 
   75 |         diffThreshold, 
   76 |         sizeMismatchTolerance
   77 |       );
   78 |       const reportPath = this.imageComparison.generateDiffReport(testName, diffResult);
   79 |       
   80 |       console.log(`
   81 |         Test Results:
   82 |         - Timestamp: ${this.timestamp}
   83 |         - User: ${this.currentUser}
   84 |         - Report Path: ${reportPath}
   85 |         - Diff Percentage: ${diffResult.diffPercentage.toFixed(2)}%
   86 |       `);
   87 |
   88 |       // Assert the diff percentage
>  89 |       expect(diffResult.diffPercentage).toBeLessThanOrEqual(diffThreshold);
      |                                         ^ Error: expect(received).toBeLessThanOrEqual(expected)
   90 |
   91 |       return diffResult;
   92 |
   93 |     } catch (error) {
   94 |       console.error(`
   95 |         Test failed at ${this.timestamp}
   96 |         User: ${this.currentUser}
   97 |         Error: ${error}
   98 |       `);
   99 |       throw error;
  100 |     }
  101 |   }
  102 |
  103 |   private async autoScroll(waitAfterScroll: number = 1000): Promise<void> {
  104 |     await this.page.evaluate(async () => {
  105 |       await new Promise<void>((resolve) => {
  106 |         let totalHeight = 0;
  107 |         const distance = 100;
  108 |         const timer = setInterval(() => {
  109 |           const scrollHeight = document.documentElement.scrollHeight;
  110 |           window.scrollBy(0, distance);
  111 |           totalHeight += distance;
  112 |
  113 |           if (totalHeight >= scrollHeight) {
  114 |             clearInterval(timer);
  115 |             window.scrollTo(0, scrollHeight);
  116 |             resolve();
  117 |           }
  118 |         }, 240);
  119 |       });
  120 |     });
  121 |
  122 |     await this.page.waitForTimeout(waitAfterScroll);
  123 |   }
  124 |
  125 |   // Getter method for accessing the image comparison instance if needed
  126 |   get imageComparisonInstance(): ImageComparison {
  127 |     return this.imageComparison;
  128 |   }
  129 |
  130 |   // Getter method for accessing the page instance if needed
  131 |   getPage(): Page {
  132 |     return this.page;
  133 |   }
  134 | }
```