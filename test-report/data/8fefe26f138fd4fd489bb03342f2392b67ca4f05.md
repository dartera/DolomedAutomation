# Test info

- Name: Visual Regression - Chronische Schmerzen Page (Desktop) >> chronische-schmerzen-visual-desktop-de
- Location: /Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/tests/ChronischeSchmerzen/ChronischeSchmerzenUITest.spec.ts:34:9

# Error details

```
Error: expect(received).toBeLessThanOrEqual(expected)

Expected: <= 0.7
Received:    3.6181632265451125
    at VisualTestHelper.runVisualTest (/Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/utils/visual-test-helper.ts:89:41)
    at MultiLanguageVisualHelper.runIndividualLanguageTest (/Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/utils/multi-language-visual-helper.ts:56:5)
    at /Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/tests/ChronischeSchmerzen/ChronischeSchmerzenUITest.spec.ts:35:7
```

# Page snapshot

```yaml
- heading "🍪 Wir schätzen Ihre Privatsphäre" [level=1]
- paragraph: Wir verwenden Cookies, um Ihr Surferlebnis zu verbessern, personalisierte Anzeigen oder Inhalte einzusetzen und unseren Datenverkehr zu analysieren. Wenn Sie auf „Alle akzeptieren" klicken, stimmen Sie der Anwendung von Cookies zu.
- button "Anpassen"
- button "Alle akzeptieren"
- banner:
  - navigation:
    - link "DOLOMED_Logo_RGB_Claim 1":
      - /url: /
      - img "DOLOMED_Logo_RGB_Claim 1"
    - button "Open/Close Menu":
      - img
    - button "Deutsch":
      - link "Deutsch":
        - /url: "#"
        - img
        - text: Deutsch
- 'heading "Effektive Schmerzlinderung durch Neuromodulation: Innovative Behandlung von chronischen Schmerzen" [level=1]':
  - text: "Effektive Schmerzlinderung durch Neuromodulation: Innovative"
  - strong: Behandlung von chronischen Schmerzen
- paragraph: Bei der Neuromodulation/Neurostimulation wird mit Hilfe der Weiterleitung von elektrischen Impulse die Aktivität des Nervensystems verändert und somit chronische Schmerzen gelindert. Bei Dolomed bieten wir verschiedene Formen der Neuromodulation an, um Patienten mit schwer behandelbaren Schmerzen eine effektive Linderung und eine verbesserte Lebensqualität zu ermöglichen.
- link "Termin vereinbaren":
  - /url: "#"
- link "Jetzt anrufen":
  - /url: tel:032 324 39 90
- img "Dolomed-Behandlung-von-chronischen-Hero-Illustrator-01-1-1-1"
- img "Dolomed-Bewegungsapparat-Arthrose-circle-light"
- img "Dolomed-Behandlung-von-chronischen-Zentrale-Illustrator-01"
- img "Dolomed-Bewegungsapparat-arthrose-circles-4"
- heading "Zentrale Rückenmarksstimulation versus periphere Stimulation von Nerven:" [level=2]
- list:
  - listitem:
    - strong: "Rückenmarkstimulation (Spinal Cord Stimulation):"
    - text: Diese Methode nutzt elektrische Impulse, die über Elektroden am Rückenmark abgegeben werden, um Schmerzsignale zu blockieren. Hierfür werden Elektroden in den Wirbelkanal implantiert, die mit einem Impulsgeber verbunden werden. Dieses Neurostimulationssystem erzeugt elektrische Impulse, die vom Rückenmark aufgenommen und zum Gehirn weitergeleitet werden.
  - listitem:
    - strong: "Periphere Nervenstimulation:"
    - text: Elektrische Impulse werden direkt an die peripheren Nerven gesendet, um Schmerzen zu lindern. Die Elektroden werden unter Ultraschallkontrolle direkt an den Nerven implantiert. Es werden elektrische Impulse erzeugt, die den Nerven und seine Reaktion auf Schmerzen modulieren.
- heading "Ablauf der Neurostimulationstherapie (Rückenmarkstimulation /periphere Nervenstimulation)" [level=2]
- paragraph: "Eine Neurostimulationstherapie bei Dolomed umfasst mehrere Schritte, die sicherstellen, dass die Behandlung effektiv und sicher ist:"
- list:
  - listitem:
    - strong: "Anamnese und Beratung:"
    - text: Ein ausführliches Gespräch mit dem behandelnden Arzt, um die Eignung der Neuromodulation zu bestimmen.
  - listitem:
    - strong: "Therapie:"
    - text: Bevor die Implantation einer Neurostimulation in Erwägung gezogen wird, muss zunächst eine konservative und interventionelle Schmerztherapie durchgeführt werden. Bringt diese nicht den gewünschten Erfolg, kann ein Kostengutsprachegesuch an die Krankenkasse geschickt und der Einsatz der Neurostimulation geplant werden.
  - listitem:
    - strong: "Teststimulation:"
    - text: Eine vorübergehende Platzierung der Elektroden, um die Wirksamkeit der Stimulation zu testen. Die Stimulation erfolgt von extern, der Impulsgeber wird noch nicht definitiv implantiert. Meist erfolgt diese Behandlung 2 bis 3 Tage stationär.
  - listitem:
    - strong: "Implantation:"
    - text: Bei erfolgreicher Teststimulation wird das Neurostimulationssystem dauerhaft implantiert. Diese Implantation kann meist ambulant erfolgen.
  - listitem:
    - strong: "Nachsorge:"
    - text: Regelmäßige Nachuntersuchungen, um die Funktionsfähigkeit des Systems zu überwachen und Anpassungen vorzunehmen.
- img "Dolomed-Nervenstimulation-Periphere-Illustrator-04-1"
- img "Dolomed-Behandlung-von-chronischen-Ablauf-Illustrator-01-2048x2048"
- img "Dolomed-Bewegungsapparat-arthrose-circles-4"
- heading "Vorteile der Neuromodulation" [level=2]
- list:
  - listitem:
    - strong: "Wirksame Schmerzlinderung:"
    - text: Viele Patienten berichten von einer signifikanten Reduktion ihrer Schmerzen. Dieser Effekt kann bereits innert weniger Tage festgestellt werden (Testphase). Eine Feineinstellung des Stimulationssystems dauert meist einige Wochen.
  - listitem:
    - strong: "Verbesserte Lebensqualität:"
    - text: Durch die Reduktion von Schmerzen können Patienten wieder aktiver am Leben teilnehmen.
  - listitem:
    - strong: "Reduktion von Medikamenten:"
    - text: Viele Patienten können ihren Bedarf an Schmerzmitteln reduzieren.
- heading "Indikationen für die Implantation eines Neurostimulators zur Stimulation vom Rückenmark oder peripheren Nerven" [level=2]
- list:
  - listitem: Chronische Rückenschmerzen, vor allem nach Operationen
  - listitem: Komplexes regionales Schmerzsyndrom (CRPS) oder Morbus Sudeck
  - listitem: Neuropathische Schmerzen
  - listitem: Diabetische oder sonstige Polyneuropathie
  - listitem: Periphere arterielle Verschlusskrankheit zur Verbesserung der Schmerzsituation und der Mikrozirkulation
- img "Dolomed-Behandlung-Von-Nervenschmerzen-CRPS-Illustrator-01-2-1"
- heading "Wie weiter?" [level=2]
- text: Leiden Sie unter Rückenschmerzen oder Bandscheibenvorfällen? Entdecken Sie die Vorteile der Infiltrationen bei Dolomed. Unsere erfahrenen Ärzte beraten Sie gerne über die verschiedenen Therapiemöglichkeiten und erstellen einen individuellen Behandlungsplan für Sie. Kontaktieren Sie uns noch heute unter
- link "info@dolomed.ch":
  - /url: mailto:info@dolomed.ch
- text: ", um einen Termin zu vereinbaren und mehr über unsere Behandlungsmöglichkeiten zu erfahren."
- link "Einen Termin vereinbaren":
  - /url: "#"
- heading "Häufig gestellte Fragen (FAQ)" [level=2]
- button "Wie wirksam ist die Neurostimulation bei Schmerzen?" [expanded]
- region "Wie wirksam ist die Neurostimulation bei Schmerzen?":
  - paragraph: Bei richtiger Indikationsstellung kann die Neurostimulation sehr wirksam und eine signifikante Schmerzlinderung und Verbesserung der Lebensqualität bieten.
- button "Was ist die Technik der Neurostimulation?"
- button "Was ist der Unterschied zwischen Neuromodulation und Neurostimulation?"
- button "Wer führt die Neurostimulation durch?"
- button "Für wen eignet sich die Neurostimulation?"
- button "Wie lange hält ein Neurostimulator?"
- button "Wie gefährlich ist ein Neurostimulator?"
- heading "ZUWEISUNG / BON DE DÉLÉGATION" [level=2]
- paragraph: Kompetenzzentrum für Schmerzmedizin Centre de compétence pour la médecine de la douleur
- list:
  - listitem: Standort Biel / Site Bienne
- list:
  - listitem: Bahnhofplatz 2C / Place de la Gare 2C 2. Stock / 2ème étage, 2502 Biel-Bienne
- list:
  - listitem:
    - img
    - text: Telefonnummer
- list:
  - listitem:
    - link "+41 32 324 39 90":
      - /url: tel:+41%2032%20324%2039%2090
- list:
  - listitem:
    - img
    - text: E-Mail
- list:
  - listitem:
    - link "info@dolomed.ch":
      - /url: mailto:info@dolomed.ch
- list:
  - listitem: Standort Bern / Site de Berne
- list:
  - listitem: Sidlerstrasse 4, 3012 Bern-Berne 2. Stock / 2ème étages, 2502 Bern-Berne
- list:
  - listitem:
    - img
    - text: Telefonnummer
- list:
  - listitem:
    - link "+41 32 324 39 90":
      - /url: tel:+41%2032%20324%2039%2090
- list:
  - listitem:
    - img
    - text: E-Mail
- list:
  - listitem:
    - link "info@dolomed.ch":
      - /url: mailto:info@dolomed.ch
- contentinfo:
  - link "Image link":
    - /url: https://dolomed.ch/
    - img "Image link"
  - paragraph: Folgen Sie uns
  - list:
    - listitem:
      - link:
        - /url: https://www.instagram.com/dolomed.ag
        - img
  - text: Seiten
  - link "Startseite":
    - /url: https://dolomed.ch/
  - link "Angebot":
    - /url: https://dolomed.ch///#angebot
  - link "Für Patienten und Zuweiser":
    - /url: https://dolomed.ch//#patienten
  - link "Kontakt":
    - /url: https://dolomed.ch//#kontakt
  - link "Team":
    - /url: https://dolomed.ch/#team
  - link "Karriere":
    - /url: https://dolomed.ch//#karriere
  - text: Krankheiten
  - link "Bewegungsapparat":
    - /url: /bewegungsapparat/
  - link "Schmerzen Innerer organe":
    - /url: https://dolomed.ch/schmerzen-innerer-organe/
  - link "kopfschmerzen und gesichtsschmerzen":
    - /url: https://dolomed.ch/kopfschmerzen-und-gesichtsschmerzen/
  - link "gefaesserkrankungen":
    - /url: https://dolomed.ch/gefaesserkrankungen/
  - link "behandlung von nervenschmerzen":
    - /url: https://dolomed.ch/behandlung-von-nervenschmerzen/
  - text: Therapie
  - link "nervenstimulation":
    - /url: https://dolomed.ch/nervenstimulation/
  - link "natuerliche linderung durch akupunktur":
    - /url: https://dolomed.ch/natuerliche-linderung-durch-akupunktur/
  - link "chronischen schmerzen":
    - /url: https://dolomed.ch/chronischen-schmerzen/
  - link "behandlung von chronischen":
    - /url: https://dolomed.ch/behandlung-von-chronischen/
  - link "behandlung von rueckenschmerzen":
    - /url: https://dolomed.ch/behandlung-von-rueckenschmerzen/
  - link "plasma prp":
    - /url: https://dolomed.ch/plasma-prp/
  - link "stammzellentherapie":
    - /url: https://dolomed.ch/stammzellentherapie/
  - link "Lasertherapie":
    - /url: /lasertherapie/
  - link "Extrakorporale Stoßwellentherapie":
    - /url: /extrakorporale-stosswellentherapie/
  - link "Bewegungstherapie und Faszientraining":
    - /url: /bewegungstherapie-und-faszientraining/
  - link "Topische Therapie mit hochkonzentriertem Capsaicin":
    - /url: /topische-therapie-mit-hochkonzentriertem-capsaicin/
  - text: Rechtliches
  - link "Impressum":
    - /url: /impressum
  - link "Datenschutz":
    - /url: /datenschutz
  - paragraph: Copyright 2025 – Alle Rechte vorbehalten Dolomed.
- button
- button:
  - img
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- heading "Wir freuen uns immer mit Ihnen zu sprechen." [level=2]
- text: Unterhalten wir uns
- link "Phone +41 32 324 39 90":
  - /url: tel:+41323243990
  - img "Phone"
  - text: +41 32 324 39 90
- link "Email info@dolomed.ch":
  - /url: mailto:info@dolomed.ch
  - img "Email"
  - text: info@dolomed.ch
- text: Wir sind Mo-Fr von 8-18 Uhr kostenlos für Sie erreichbar.
- list:
  - listitem:
    - img "list icon"
    - heading "Termin vereinbaren" [level=3]
  - listitem:
    - link "list icon Kontaktseite öffnen":
      - /url: https://dolomed.ch/#kontaktform
      - img "list icon"
      - heading "Kontaktseite öffnen" [level=3]
- button:
  - img
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- text: Senden Sie eine Nachricht an Dolomed Bei Fragen oder Anliegen wenden Sie sich bitte an uns. Schnelle Antworten und Hilfe sind garantiert.
- list
- form "Kontaktformular":
  - paragraph:
    - text: Name
    - textbox "Name"
  - paragraph:
    - text: E-Mail-Adresse
    - textbox "E-Mail-Adresse"
  - paragraph:
    - text: Telefonnummer
    - textbox "Telefonnummer"
  - paragraph:
    - text: Schreiben Sie unten Ihre Nachricht
    - textbox "Schreiben Sie unten Ihre Nachricht"
  - paragraph:
    - button "Senden"
- button:
  - img
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- text: Rückruf anfordern Bei Fragen oder Anliegen wenden Sie sich bitte an uns. Schnelle Antworten und Hilfe sind garantiert.
- list
- form "Kontaktformular":
  - paragraph:
    - text: Name
    - textbox "Name"
  - paragraph:
    - text: E-Mail-Adresse
    - textbox "E-Mail-Adresse"
  - paragraph:
    - text: Telefonnummer
    - textbox "Telefonnummer"
  - paragraph:
    - text: Schreiben Sie unten Ihre Nachricht
    - textbox "Schreiben Sie unten Ihre Nachricht"
  - paragraph:
    - button "Senden"
- link "Go to top":
  - /url: "#"
  - img
- text: tablet
```

# Test source

```ts
   1 | import { test, expect, Page, Browser } from '@playwright/test';
   2 | import { ImageComparison, DiffResult, SizeMismatchTolerance } from './image-diff';
   3 |
   4 | export interface VisualTestConfig {
   5 |   url: string;
   6 |   testName: string;
   7 |   diffThreshold?: number;
   8 |   viewport?: { width: number; height: number };
   9 |   waitForLoadState?: 'load' | 'domcontentloaded' | 'networkidle';
   10 |   customStyles?: string;
   11 |   scrollToBottom?: boolean;
   12 |   waitAfterScroll?: number;
   13 |   sizeMismatchTolerance?: SizeMismatchTolerance;
   14 | }
   15 |
   16 | export class VisualTestHelper {
   17 |   private imageComparison: ImageComparison;
   18 |   private page!: Page;
   19 |   private timestamp: string;
   20 |   private currentUser: string;
   21 |
   22 |   constructor() {
   23 |     this.imageComparison = new ImageComparison();
   24 |     this.timestamp = new Date().toISOString().replace('T', ' ').slice(0, 19);
   25 |     this.currentUser = process.env.USER || process.env.USERNAME || 'unknown';
   26 |   }
   27 |
   28 |   async setup(browser: Browser, viewport = { width: 1366, height: 768 }): Promise<void> {
   29 |     const context = await browser.newContext({ viewport });
   30 |     this.page = await context.newPage();
   31 |     console.log(`Test setup initialized at ${this.timestamp} by ${this.currentUser}`);
   32 |   }
   33 |
   34 |   async cleanup(): Promise<void> {
   35 |     if (this.page) {
   36 |       await this.page.close();
   37 |     }
   38 |   }
   39 |
   40 |   async runVisualTest(config: VisualTestConfig): Promise<DiffResult> {
   41 |     const {
   42 |       url,
   43 |       testName,
   44 |       diffThreshold = 0.1,
   45 |       waitForLoadState = 'networkidle',
   46 |       customStyles,
   47 |       scrollToBottom = true,
   48 |       waitAfterScroll = 1000,
   49 |       sizeMismatchTolerance
   50 |     } = config;
   51 |
   52 |     console.log(`Starting visual test at ${this.timestamp}`);
   53 |     console.log(`Test running by user: ${this.currentUser}`);
   54 |     console.log('Page dimensions:', await this.page.viewportSize());
   55 |
   56 |     try {
   57 |       // Navigate to the page
   58 |       await this.page.goto(url);
   59 |       await this.page.waitForLoadState(waitForLoadState);
   60 |
   61 |       // Apply custom styles if provided
   62 |       if (customStyles) {
   63 |         await this.page.addStyleTag({ content: customStyles });
   64 |       }
   65 |
   66 |       // Auto-scroll if enabled
   67 |       if (scrollToBottom) {
   68 |         await this.autoScroll(waitAfterScroll);
   69 |       }
   70 |
   71 |       // Perform image comparison
   72 |       const diffResult = await this.imageComparison.compareScreenshots(
   73 |         this.page, 
   74 |         testName, 
   75 |         diffThreshold, 
   76 |         sizeMismatchTolerance
   77 |       );
   78 |       const reportPath = this.imageComparison.generateDiffReport(testName, diffResult);
   79 |       
   80 |       console.log(`
   81 |         Test Results:
   82 |         - Timestamp: ${this.timestamp}
   83 |         - User: ${this.currentUser}
   84 |         - Report Path: ${reportPath}
   85 |         - Diff Percentage: ${diffResult.diffPercentage.toFixed(2)}%
   86 |       `);
   87 |
   88 |       // Assert the diff percentage
>  89 |       expect(diffResult.diffPercentage).toBeLessThanOrEqual(diffThreshold);
      |                                         ^ Error: expect(received).toBeLessThanOrEqual(expected)
   90 |
   91 |       return diffResult;
   92 |
   93 |     } catch (error) {
   94 |       console.error(`
   95 |         Test failed at ${this.timestamp}
   96 |         User: ${this.currentUser}
   97 |         Error: ${error}
   98 |       `);
   99 |       throw error;
  100 |     }
  101 |   }
  102 |
  103 |   private async autoScroll(waitAfterScroll: number = 1000): Promise<void> {
  104 |     await this.page.evaluate(async () => {
  105 |       await new Promise<void>((resolve) => {
  106 |         let totalHeight = 0;
  107 |         const distance = 100;
  108 |         const timer = setInterval(() => {
  109 |           const scrollHeight = document.documentElement.scrollHeight;
  110 |           window.scrollBy(0, distance);
  111 |           totalHeight += distance;
  112 |
  113 |           if (totalHeight >= scrollHeight) {
  114 |             clearInterval(timer);
  115 |             window.scrollTo(0, scrollHeight);
  116 |             resolve();
  117 |           }
  118 |         }, 240);
  119 |       });
  120 |     });
  121 |
  122 |     await this.page.waitForTimeout(waitAfterScroll);
  123 |   }
  124 |
  125 |   // Getter method for accessing the image comparison instance if needed
  126 |   get imageComparisonInstance(): ImageComparison {
  127 |     return this.imageComparison;
  128 |   }
  129 |
  130 |   // Getter method for accessing the page instance if needed
  131 |   getPage(): Page {
  132 |     return this.page;
  133 |   }
  134 | }
```