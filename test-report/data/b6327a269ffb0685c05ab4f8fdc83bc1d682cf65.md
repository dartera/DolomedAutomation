# Test info

- Name: Visual Regression - Kopfschmerzen Page (Mobile) >> kopfschmerzen-visual-mobile-fr
- Location: /Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/tests/kopfschmerzen/KopfschmerzenPageUITest.spec.ts:64:9

# Error details

```
Error: expect(received).toBeLessThanOrEqual(expected)

Expected: <= 0.7
Received:    6.755177254745766
    at VisualTestHelper.runVisualTest (/Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/utils/visual-test-helper.ts:89:41)
    at MultiLanguageVisualHelper.runIndividualLanguageTest (/Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/utils/multi-language-visual-helper.ts:56:5)
    at /Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/tests/kopfschmerzen/KopfschmerzenPageUITest.spec.ts:65:7
```

# Page snapshot

```yaml
- heading "ðŸª Wir schÃ¤tzen Ihre PrivatsphÃ¤re" [level=1]
- paragraph: Wir verwenden Cookies, um Ihr Surferlebnis zu verbessern, personalisierte Anzeigen oder Inhalte einzusetzen und unseren Datenverkehr zu analysieren. Wenn Sie auf â€žAlle akzeptieren" klicken, stimmen Sie der Anwendung von Cookies zu.
- button "Anpassen"
- button "Alle akzeptieren"
- banner:
  - navigation:
    - link "DOLOMED_Logo_RGB_Claim 1":
      - /url: https://dolomed.ch/fr/
      - img "DOLOMED_Logo_RGB_Claim 1"
    - button "Open/Close Menu":
      - img
    - button "FranÃ§ais":
      - link "FranÃ§ais":
        - /url: "#"
        - img
        - text: FranÃ§ais
- 'heading "Une meilleure qualitÃ© de vie en cas de maux de tÃªte : notre approche holistique du traitement des maux de tÃªte et des douleurs faciales" [level=1]':
  - text: "Une meilleure qualitÃ© de vie en cas de maux de tÃªte : notre approche holistique du traitement des"
  - strong: maux de tÃªte et des douleurs faciales
- paragraph: Les maux de tÃªte et les douleurs faciales peuvent avoir un impact considÃ©rable sur la qualitÃ© de vie et ont de nombreuses causes possibles. Chez Dolomed, nous sommes spÃ©cialisÃ©s dans le diagnostic et le traitement de diffÃ©rents types de maux de tÃªte et de douleurs faciales. Pour traiter efficacement les douleurs, il est particuliÃ¨rement important d'avoir une anamnÃ¨se prÃ©cise, en particulier la localisation (cÃ©phalÃ©es de la partie supÃ©rieure du crÃ¢ne ou de l'occiput, des tempes, du cÃ´tÃ©), les diagnostics secondaires (nicotine, alcool, fiÃ¨vre). En rÃ¨gle gÃ©nÃ©rale, il est difficile de guÃ©rir complÃ¨tement les maux de tÃªte, mÃªme si dans de rares cas, on y parvient. Cependant, il est souvent possible de soulager les symptÃ´mes et d'apprendre aux patients Ã  gÃ©rer leur maladie. Notre approche holistique combine des thÃ©rapies de pointe et des plans de traitement individuels pour vous offrir un soulagement efficace.
- link "Prendre rendez-vous":
  - /url: "#"
- link "Appeler maintenant":
  - /url: tel:032 324 39 90
- img "Dolomed-Kopfschmerzen-Und-Gesichtsschmerzen-Hero-Illustrator-01"
- img "Dolomed-Bewegungsapparat-Arthrose-circle-light"
- img "Dolomed-Kopfschmerzen-Und-Gesichtsschmerzen-Migrane-Illustrator-01"
- heading "Migraine" [level=2]
- paragraph: La migraine est un mal de tÃªte primaire et une maladie neurologique qui se caractÃ©rise par des maux de tÃªte intenses, ainsi que par des symptÃ´mes associÃ©s tels que des nausÃ©es et une sensibilitÃ© Ã  la lumiÃ¨re. Elle survient gÃ©nÃ©ralement chez les adultes, mais rarement chez les enfants. La raison de l'apparition de la migraine fait toujours l'objet de recherches intensives. Il existe plusieurs thÃ©ories sur les raisons de ces crises douloureuses. On postule par exemple une surcharge du cerveau suivie d'une irritation inflammatoire des mÃ©ninges. Une activitÃ© physique rÃ©guliÃ¨re et un mode de vie sain peuvent avoir un effet prÃ©ventif.
- heading "Nos options de traitement comprennent, outre les analgÃ©siques conventionnels :" [level=3]
- list:
  - listitem:
    - strong: "TENS :"
    - text: stimulation nerveuse Ã©lectrique transcutanÃ©e pour le soulagement de la douleur.
  - listitem:
    - strong: "SphÃ©nocath :"
    - text: thÃ©rapie non invasive pour bloquer le ganglion sphÃ©nopalatinum dans le traitement de la migraine.
  - listitem:
    - strong: "Neuromodulation :"
    - text: action sur la fonction et l'activitÃ© nerveuses pour rÃ©duire les crises de migraine.
- heading "CÃ©phalÃ©es de tension" [level=2]
- paragraph: Les cÃ©phalÃ©es de tension sont la forme la plus courante de maux de tÃªte et se caractÃ©risent par une douleur sourde et oppressante. Elles s'accompagnent souvent de douleurs cervicales, car la douleur provient souvent du cou et des muscles, ligaments et articulations qui s'y trouvent. La propagation de la douleur se fait donc souvent de l'arriÃ¨re de la tÃªte vers le front.
- heading "Les options de traitement chez Dolomed comprennent" [level=3]
- list:
  - listitem:
    - strong: "Infiltrations de nerfs et de muscles spÃ©cifiques :"
    - text: Injections ciblÃ©es pour soulager les tensions musculaires et les irritations nerveuses.
  - listitem:
    - strong: "Blocage du ganglion sphÃ©nopalatinum :"
    - text: injection intranasale de lidocaÃ¯ne pour le traitement des cÃ©phalÃ©es.
  - listitem:
    - strong: "TENS :"
    - text: soulagement de la douleur et promotion de la relaxation musculaire.
- img "Dolomed-Kopfschmerzen-Und-Gesichtsschmerzen-Migrane-Illustrator-01"
- img "Dolomed-Kopfschmerzen-Und-Gesichtsschmerzen-Clusterkipfschmerzen-Illustrator-01"
- heading "Maux de tÃªte en grappe" [level=2]
- paragraph: Les cÃ©phalÃ©es en grappe sont des maux de tÃªte extrÃªmement intenses et unilatÃ©raux qui surviennent par Ã©pisodes. Elles sont souvent qualifiÃ©es de "douleurs d'anÃ©antissement" et il n'est pas rare qu'elles se terminent aux urgences. La crise aiguÃ« est difficile Ã  distinguer d'une hÃ©morragie cÃ©rÃ©brale, c'est pourquoi il est recommandÃ© de se rendre dans un service d'urgence ou d'appeler une ambulance. Si ces causes de troubles sont exclues, il est possible d'adresser le patient Ã  Dolomed afin de prÃ©venir de nouveaux troubles.
- heading "Nos options thÃ©rapeutiques incluent" [level=3]
- list:
  - listitem:
    - strong: "SphÃ©nocath :"
    - text: mÃ©thode efficace pour soulager la douleur en bloquant le ganglion sphÃ©nopalatinum.
  - listitem:
    - strong: "Neuromodulation :"
    - text: rÃ©duction de l'intensitÃ© et de la frÃ©quence de la douleur.
  - listitem:
    - strong: "OxygÃ¨ne :"
    - text: administration intranasale d'oxygÃ¨ne pour le traitement de la crise.
- heading "Maux de tÃªte post-ponction" [level=2]
- paragraph: Les cÃ©phalÃ©es post-ponction surviennent souvent aprÃ¨s une ponction lombaire ou une anesthÃ©sie pÃ©ridurale. Les symptÃ´mes typiques sont des maux de tÃªte en se levant d'une position assise ou couchÃ©e, qui se concentrent dans la partie supÃ©rieure du crÃ¢ne. L'origine est souvent une irritation des mÃ©ninges.
- heading "Nos traitements comprennent" [level=3]
- list:
  - listitem:
    - strong: "Patch sanguin :"
    - text: une intervention peu invasive qui colmate la fuite dans le sac dural.
  - listitem:
    - strong: "SphÃ©nocath :"
    - text: mÃ©thode efficace pour soulager la douleur en bloquant le ganglion sphÃ©nopalatinum.
  - listitem:
    - strong: "Hydratation :"
    - text: favoriser la cicatrisation en augmentant l'apport en liquide.
- img "Dolomed-Kopfschmerzen-Und-Gesichtsschmerzen-Postpun-Illustrator-01"
- img "Dolomed-Bewegungsapparat-Spastik-Illustration-03"
- heading "Douleurs faciales" [level=2]
- paragraph: Les douleurs faciales peuvent Ãªtre causÃ©es par une variÃ©tÃ© de causes telles que des lÃ©sions nerveuses, des maladies dentaires ou des problÃ¨mes de mÃ¢choire. Il est souvent impossible de dÃ©terminer la cause de ces troubles.
- heading "Chez Dolomed, nous offrons des traitements spÃ©cialisÃ©s, notamment" [level=3]
- list:
  - listitem:
    - strong: "Infiltrations de nerfs et de muscles spÃ©cifiques :"
    - text: Injections prÃ©cises pour soulager la douleur.
  - listitem:
    - strong: "Neuromodulation :"
    - text: action sur l'activitÃ© nerveuse pour rÃ©duire la douleur.
- heading "NÃ©vralgie du trijumeau" [level=2]
- paragraph: La nÃ©vralgie du trijumeau provoque des douleurs faciales soudaines et intenses le long du nerf trijumeau. Ces douleurs en crise peuvent considÃ©rablement rÃ©duire la qualitÃ© de vie des personnes concernÃ©es. Outre les possibilitÃ©s chirurgicales, il existe Ã©galement des mÃ©thodes interventionnelles qui peuvent dÃ©jÃ  apporter un soulagement.
- heading "Chez Dolomed, nous proposons les traitements suivants :" [level=3]
- list:
  - listitem:
    - strong: "Infiltrations de nerfs et de muscles spÃ©cifiques :"
    - text: Injections prÃ©cises pour bloquer le nerf trijumeau.
  - listitem:
    - strong: "SphÃ©nocath :"
    - text: mÃ©thode efficace pour soulager la douleur en bloquant le ganglion sphÃ©nopalatinum.
  - listitem:
    - strong: "KÃ©tamine :"
    - text: thÃ©rapie intraveineuse pour le soulagement de la douleur et l'amÃ©lioration de la qualitÃ© de vie.
- img "Dolomed-Kopfschmerzen-Und-Gesichtsschmerzen-Trigeminusneuralgie-Illustrator-01"
- heading "Comment continuer ?" [level=2]
- img "Dolomed-Bewegungsapparat-Wieweiter-Illustration-02"
- text: Vous souffrez de douleurs dorsales ou dâ€™autres douleurs musculo-squelettiques ? Prenez rendez-vous chez Dolomed dÃ¨s aujourdâ€™hui et demandez conseil Ã  nos experts. Contactez-nous Ã  lâ€™adresse
- link "info@dolomed.ch":
  - /url: mailto:info@dolomed.ch
- text: pour en savoir plus sur nos options de traitement individuel. Veuillez noter quâ€™il est nÃ©cessaire dâ€™Ãªtre adressÃ© pour le traitement.
- link "Prendre un rendez-vous":
  - /url: "#"
- heading "Foire aux questions (FAQ)" [level=2]
- button "Quelles sont les causes les plus frÃ©quentes des maux de tÃªte ?" [expanded]
- region "Quelles sont les causes les plus frÃ©quentes des maux de tÃªte ?":
  - paragraph: Les maux de tÃªte peuvent Ãªtre causÃ©s par une variÃ©tÃ© de facteurs, y compris les migraines, les cÃ©phalÃ©es de tension, les cÃ©phalÃ©es en grappe, les cÃ©phalÃ©es post-ponction et la nÃ©vralgie du trijumeau.
- button "Quels sont les traitements que vous proposez aux personnes concernÃ©es chez Dolomed ?"
- button "Comment fonctionne le TENS ?"
- button "Qu'est-ce que Sphenocath et comment fonctionne-t-il ?"
- button "Qu'est-ce que la neuromodulation ?"
- button "Que sont les infiltrations de certains nerfs et muscles ?"
- button "Comment prendre rendez-vous ?"
- button "Que faire contre les maux de tÃªte en haut de la tÃªte ?"
- heading "ZUWEISUNG / BON DE DÃ‰LÃ‰GATION" [level=2]
- paragraph: Centre de compÃ©tence pour la mÃ©decine de la douleur Centre de compÃ©tence pour la mÃ©decine de la douleur
- list:
  - listitem: Site Biel / Site Bienne
- list:
  - listitem: Bahnhofplatz 2C / Place de la Gare 2C 2Ã¨me Ã©tage / Stock, 2502 Biel-Bienne
- list:
  - listitem:
    - img
    - text: NumÃ©ro de tÃ©lÃ©phone
- list:
  - listitem:
    - link "+41 32 324 39 90":
      - /url: tel:+41%2032%20324%2039%2090
- list:
  - listitem:
    - img
    - text: E-mail
- list:
  - listitem:
    - link "info@dolomed.ch":
      - /url: mailto:info@dolomed.ch
- list:
  - listitem: Standort Bern / Site de Berne
- list:
  - listitem: Sidlerstrasse 4, 3012 Bern-Berne 2. Stock / 2Ã¨me Ã©tages, 2502 Bern-Berne
- list:
  - listitem:
    - img
    - text: NumÃ©ro de tÃ©lÃ©phone
- list:
  - listitem:
    - link "+41 32 324 39 90":
      - /url: tel:+41%2032%20324%2039%2090
- list:
  - listitem:
    - img
    - text: E-mail
- list:
  - listitem:
    - link "info@dolomed.ch":
      - /url: mailto:info@dolomed.ch
- contentinfo:
  - link "Image link":
    - /url: https://dolomed.ch/
    - img "Image link"
  - text: Pages
  - link "Accueil":
    - /url: https://dolomed.ch/fr/
  - link "Offre":
    - /url: https://dolomed.ch/fr/#angebot
  - link "Pour les patients et les dÃ©lÃ©gations":
    - /url: https://dolomed.ch/fr/#patienten
  - link "Contact":
    - /url: https://dolomed.ch/fr/#kontakt
  - link "TEAM":
    - /url: https://dolomed.ch/fr/#team
  - link "CarriÃ¨re":
    - /url: https://dolomed.ch/fr/#karriere
  - text: Maladies
  - link "Appareil locomoteur":
    - /url: /fr/appareil-locomoteur/
  - link "Douleurs d'organes internes":
    - /url: /fr/douleurs-dorganes-internes/
  - link "Maux de tÃªte et douleurs faciales":
    - /url: /fr/maux-de-tete-et-douleurs-faciales/
  - link "Maladies vasculaires":
    - /url: /fr/maladies-vasculaires/
  - link "Traitement des douleurs nerveuses":
    - /url: /fr/traitement-des-douleurs-nerveuses/
  - text: ThÃ©rapie
  - link "Stimulation nerveuse":
    - /url: /fr/stimulation-nerveuse/
  - link "Un soulagement naturel grÃ¢ce Ã  l'acupuncture":
    - /url: fr/soulagement-naturel-par-lacupuncture/
  - link "douleurs chroniques":
    - /url: /fr/douleurs-chroniques/
  - link "Traitement de la douleur chronique":
    - /url: /fr/traitement-des-maladies-chroniques/
  - link "Traitement du mal de dos":
    - /url: /fr/traitement-du-mal-de-dos/
  - link "Plasma (PRP) pour un traitement efficace":
    - /url: /fr/plasma-prp/
  - link "ThÃ©rapie par cellules souches":
    - /url: /fr/therapie-par-cellules-souches/
  - link "ThÃ©rapie au laser":
    - /url: /fr/therapie-au-laser/
  - link "ThÃ©rapie extracorporelle par ondes de choc":
    - /url: /fr/therapie-extracorporelle-par-ondes-de-choc/
  - link "ThÃ©rapie par le mouvement et entraÃ®nement des fascias":
    - /url: /fr/therapie-par-le-mouvement-et-entrainement-des-fascias/
  - link "ThÃ©rapie topique Ã  base de capsaÃ¯cine hautement concentrÃ©e":
    - /url: /fr/therapie-topique-a-base-de-capsaicine-hautement-concentree/
  - text: Mentions lÃ©gales
  - link "Mentions lÃ©gales":
    - /url: /fr/mentions-legales/
  - link "Protection des donnÃ©es":
    - /url: /fr/protection-des-donnees/
  - text: Suivez nous
  - list:
    - listitem:
      - link:
        - /url: https://www.instagram.com/dolomed.ag
        - img
  - paragraph: Copyright 2025 â€“ Tous droits rÃ©servÃ©s Dolomed.
- button
- button "retour":
  - img
  - text: retour
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- heading "Nous aimons toujours discuter avec toi" [level=2]
- text: Parlons
- link "Phone +41 32 324 39 90":
  - /url: tel:+41323243990
  - img "Phone"
  - text: +41 32 324 39 90
- link "Email info@dolomed.ch":
  - /url: mailto:info@dolomed.ch
  - img "Email"
  - text: info@dolomed.ch
- list:
  - listitem:
    - img "list icon"
    - heading "Prendre rendez-vous" [level=3]
  - listitem:
    - link "list icon Support technique":
      - /url: https://dolomed.ch/fr/#kontaktform
      - img "list icon"
      - heading "Support technique" [level=3]
- button "retour":
  - img
  - text: retour
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- text: Envoyer un message Ã  Dolomed Si vous avez des questions ou des prÃ©occupations, veuillez nous contacter. Des rÃ©ponses rapides et une aide sont garanties.
- list
- form "Formulaire de contact":
  - paragraph:
    - text: Nom
    - textbox "Nom"
  - paragraph:
    - text: Adresse Ã©lectronique
    - textbox "Adresse Ã©lectronique"
  - paragraph:
    - text: NumÃ©ro de tÃ©lÃ©phone
    - textbox "NumÃ©ro de tÃ©lÃ©phone"
  - paragraph:
    - text: Ã‰crivez votre message ci-dessous
    - textbox "Ã‰crivez votre message ci-dessous"
  - paragraph:
    - button "Envoyer"
- button "retour":
  - img
  - text: retour
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- text: Demander Ã  Ãªtre rappelÃ© Si vous avez des questions ou des prÃ©occupations, veuillez nous contacter. Des rÃ©ponses rapides et une aide sont garanties.
- list
- form "Formulaire de contact":
  - paragraph:
    - text: Nom
    - textbox "Nom"
  - paragraph:
    - text: Adresse Ã©lectronique
    - textbox "Adresse Ã©lectronique"
  - paragraph:
    - text: NumÃ©ro de tÃ©lÃ©phone
    - textbox "NumÃ©ro de tÃ©lÃ©phone"
  - paragraph:
    - text: Ã‰crivez votre message ci-dessous
    - textbox "Ã‰crivez votre message ci-dessous"
  - paragraph:
    - button "Envoyer"
- link "Go to top":
  - /url: "#"
  - img
- text: mobile
```

# Test source

```ts
   1 | import { test, expect, Page, Browser } from '@playwright/test';
   2 | import { ImageComparison, DiffResult, SizeMismatchTolerance } from './image-diff';
   3 |
   4 | export interface VisualTestConfig {
   5 |   url: string;
   6 |   testName: string;
   7 |   diffThreshold?: number;
   8 |   viewport?: { width: number; height: number };
   9 |   waitForLoadState?: 'load' | 'domcontentloaded' | 'networkidle';
   10 |   customStyles?: string;
   11 |   scrollToBottom?: boolean;
   12 |   waitAfterScroll?: number;
   13 |   sizeMismatchTolerance?: SizeMismatchTolerance;
   14 | }
   15 |
   16 | export class VisualTestHelper {
   17 |   private imageComparison: ImageComparison;
   18 |   private page!: Page;
   19 |   private timestamp: string;
   20 |   private currentUser: string;
   21 |
   22 |   constructor() {
   23 |     this.imageComparison = new ImageComparison();
   24 |     this.timestamp = new Date().toISOString().replace('T', ' ').slice(0, 19);
   25 |     this.currentUser = process.env.USER || process.env.USERNAME || 'unknown';
   26 |   }
   27 |
   28 |   async setup(browser: Browser, viewport = { width: 1366, height: 768 }): Promise<void> {
   29 |     const context = await browser.newContext({ viewport });
   30 |     this.page = await context.newPage();
   31 |     console.log(`Test setup initialized at ${this.timestamp} by ${this.currentUser}`);
   32 |   }
   33 |
   34 |   async cleanup(): Promise<void> {
   35 |     if (this.page) {
   36 |       await this.page.close();
   37 |     }
   38 |   }
   39 |
   40 |   async runVisualTest(config: VisualTestConfig): Promise<DiffResult> {
   41 |     const {
   42 |       url,
   43 |       testName,
   44 |       diffThreshold = 0.1,
   45 |       waitForLoadState = 'networkidle',
   46 |       customStyles,
   47 |       scrollToBottom = true,
   48 |       waitAfterScroll = 1000,
   49 |       sizeMismatchTolerance
   50 |     } = config;
   51 |
   52 |     console.log(`Starting visual test at ${this.timestamp}`);
   53 |     console.log(`Test running by user: ${this.currentUser}`);
   54 |     console.log('Page dimensions:', await this.page.viewportSize());
   55 |
   56 |     try {
   57 |       // Navigate to the page
   58 |       await this.page.goto(url);
   59 |       await this.page.waitForLoadState(waitForLoadState);
   60 |
   61 |       // Apply custom styles if provided
   62 |       if (customStyles) {
   63 |         await this.page.addStyleTag({ content: customStyles });
   64 |       }
   65 |
   66 |       // Auto-scroll if enabled
   67 |       if (scrollToBottom) {
   68 |         await this.autoScroll(waitAfterScroll);
   69 |       }
   70 |
   71 |       // Perform image comparison
   72 |       const diffResult = await this.imageComparison.compareScreenshots(
   73 |         this.page, 
   74 |         testName, 
   75 |         diffThreshold, 
   76 |         sizeMismatchTolerance
   77 |       );
   78 |       const reportPath = this.imageComparison.generateDiffReport(testName, diffResult);
   79 |       
   80 |       console.log(`
   81 |         Test Results:
   82 |         - Timestamp: ${this.timestamp}
   83 |         - User: ${this.currentUser}
   84 |         - Report Path: ${reportPath}
   85 |         - Diff Percentage: ${diffResult.diffPercentage.toFixed(2)}%
   86 |       `);
   87 |
   88 |       // Assert the diff percentage
>  89 |       expect(diffResult.diffPercentage).toBeLessThanOrEqual(diffThreshold);
      |                                         ^ Error: expect(received).toBeLessThanOrEqual(expected)
   90 |
   91 |       return diffResult;
   92 |
   93 |     } catch (error) {
   94 |       console.error(`
   95 |         Test failed at ${this.timestamp}
   96 |         User: ${this.currentUser}
   97 |         Error: ${error}
   98 |       `);
   99 |       throw error;
  100 |     }
  101 |   }
  102 |
  103 |   private async autoScroll(waitAfterScroll: number = 1000): Promise<void> {
  104 |     await this.page.evaluate(async () => {
  105 |       await new Promise<void>((resolve) => {
  106 |         let totalHeight = 0;
  107 |         const distance = 100;
  108 |         const timer = setInterval(() => {
  109 |           const scrollHeight = document.documentElement.scrollHeight;
  110 |           window.scrollBy(0, distance);
  111 |           totalHeight += distance;
  112 |
  113 |           if (totalHeight >= scrollHeight) {
  114 |             clearInterval(timer);
  115 |             window.scrollTo(0, scrollHeight);
  116 |             resolve();
  117 |           }
  118 |         }, 240);
  119 |       });
  120 |     });
  121 |
  122 |     await this.page.waitForTimeout(waitAfterScroll);
  123 |   }
  124 |
  125 |   // Getter method for accessing the image comparison instance if needed
  126 |   get imageComparisonInstance(): ImageComparison {
  127 |     return this.imageComparison;
  128 |   }
  129 |
  130 |   // Getter method for accessing the page instance if needed
  131 |   getPage(): Page {
  132 |     return this.page;
  133 |   }
  134 | }
```