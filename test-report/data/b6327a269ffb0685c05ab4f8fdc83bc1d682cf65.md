# Test info

- Name: Visual Regression - Kopfschmerzen Page (Mobile) >> kopfschmerzen-visual-mobile-fr
- Location: /Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/tests/kopfschmerzen/KopfschmerzenPageUITest.spec.ts:64:9

# Error details

```
Error: expect(received).toBeLessThanOrEqual(expected)

Expected: <= 0.7
Received:    6.755177254745766
    at VisualTestHelper.runVisualTest (/Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/utils/visual-test-helper.ts:89:41)
    at MultiLanguageVisualHelper.runIndividualLanguageTest (/Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/utils/multi-language-visual-helper.ts:56:5)
    at /Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/tests/kopfschmerzen/KopfschmerzenPageUITest.spec.ts:65:7
```

# Page snapshot

```yaml
- heading "🍪 Wir schätzen Ihre Privatsphäre" [level=1]
- paragraph: Wir verwenden Cookies, um Ihr Surferlebnis zu verbessern, personalisierte Anzeigen oder Inhalte einzusetzen und unseren Datenverkehr zu analysieren. Wenn Sie auf „Alle akzeptieren" klicken, stimmen Sie der Anwendung von Cookies zu.
- button "Anpassen"
- button "Alle akzeptieren"
- banner:
  - navigation:
    - link "DOLOMED_Logo_RGB_Claim 1":
      - /url: https://dolomed.ch/fr/
      - img "DOLOMED_Logo_RGB_Claim 1"
    - button "Open/Close Menu":
      - img
    - button "Français":
      - link "Français":
        - /url: "#"
        - img
        - text: Français
- 'heading "Une meilleure qualité de vie en cas de maux de tête : notre approche holistique du traitement des maux de tête et des douleurs faciales" [level=1]':
  - text: "Une meilleure qualité de vie en cas de maux de tête : notre approche holistique du traitement des"
  - strong: maux de tête et des douleurs faciales
- paragraph: Les maux de tête et les douleurs faciales peuvent avoir un impact considérable sur la qualité de vie et ont de nombreuses causes possibles. Chez Dolomed, nous sommes spécialisés dans le diagnostic et le traitement de différents types de maux de tête et de douleurs faciales. Pour traiter efficacement les douleurs, il est particulièrement important d'avoir une anamnèse précise, en particulier la localisation (céphalées de la partie supérieure du crâne ou de l'occiput, des tempes, du côté), les diagnostics secondaires (nicotine, alcool, fièvre). En règle générale, il est difficile de guérir complètement les maux de tête, même si dans de rares cas, on y parvient. Cependant, il est souvent possible de soulager les symptômes et d'apprendre aux patients à gérer leur maladie. Notre approche holistique combine des thérapies de pointe et des plans de traitement individuels pour vous offrir un soulagement efficace.
- link "Prendre rendez-vous":
  - /url: "#"
- link "Appeler maintenant":
  - /url: tel:032 324 39 90
- img "Dolomed-Kopfschmerzen-Und-Gesichtsschmerzen-Hero-Illustrator-01"
- img "Dolomed-Bewegungsapparat-Arthrose-circle-light"
- img "Dolomed-Kopfschmerzen-Und-Gesichtsschmerzen-Migrane-Illustrator-01"
- heading "Migraine" [level=2]
- paragraph: La migraine est un mal de tête primaire et une maladie neurologique qui se caractérise par des maux de tête intenses, ainsi que par des symptômes associés tels que des nausées et une sensibilité à la lumière. Elle survient généralement chez les adultes, mais rarement chez les enfants. La raison de l'apparition de la migraine fait toujours l'objet de recherches intensives. Il existe plusieurs théories sur les raisons de ces crises douloureuses. On postule par exemple une surcharge du cerveau suivie d'une irritation inflammatoire des méninges. Une activité physique régulière et un mode de vie sain peuvent avoir un effet préventif.
- heading "Nos options de traitement comprennent, outre les analgésiques conventionnels :" [level=3]
- list:
  - listitem:
    - strong: "TENS :"
    - text: stimulation nerveuse électrique transcutanée pour le soulagement de la douleur.
  - listitem:
    - strong: "Sphénocath :"
    - text: thérapie non invasive pour bloquer le ganglion sphénopalatinum dans le traitement de la migraine.
  - listitem:
    - strong: "Neuromodulation :"
    - text: action sur la fonction et l'activité nerveuses pour réduire les crises de migraine.
- heading "Céphalées de tension" [level=2]
- paragraph: Les céphalées de tension sont la forme la plus courante de maux de tête et se caractérisent par une douleur sourde et oppressante. Elles s'accompagnent souvent de douleurs cervicales, car la douleur provient souvent du cou et des muscles, ligaments et articulations qui s'y trouvent. La propagation de la douleur se fait donc souvent de l'arrière de la tête vers le front.
- heading "Les options de traitement chez Dolomed comprennent" [level=3]
- list:
  - listitem:
    - strong: "Infiltrations de nerfs et de muscles spécifiques :"
    - text: Injections ciblées pour soulager les tensions musculaires et les irritations nerveuses.
  - listitem:
    - strong: "Blocage du ganglion sphénopalatinum :"
    - text: injection intranasale de lidocaïne pour le traitement des céphalées.
  - listitem:
    - strong: "TENS :"
    - text: soulagement de la douleur et promotion de la relaxation musculaire.
- img "Dolomed-Kopfschmerzen-Und-Gesichtsschmerzen-Migrane-Illustrator-01"
- img "Dolomed-Kopfschmerzen-Und-Gesichtsschmerzen-Clusterkipfschmerzen-Illustrator-01"
- heading "Maux de tête en grappe" [level=2]
- paragraph: Les céphalées en grappe sont des maux de tête extrêmement intenses et unilatéraux qui surviennent par épisodes. Elles sont souvent qualifiées de "douleurs d'anéantissement" et il n'est pas rare qu'elles se terminent aux urgences. La crise aiguë est difficile à distinguer d'une hémorragie cérébrale, c'est pourquoi il est recommandé de se rendre dans un service d'urgence ou d'appeler une ambulance. Si ces causes de troubles sont exclues, il est possible d'adresser le patient à Dolomed afin de prévenir de nouveaux troubles.
- heading "Nos options thérapeutiques incluent" [level=3]
- list:
  - listitem:
    - strong: "Sphénocath :"
    - text: méthode efficace pour soulager la douleur en bloquant le ganglion sphénopalatinum.
  - listitem:
    - strong: "Neuromodulation :"
    - text: réduction de l'intensité et de la fréquence de la douleur.
  - listitem:
    - strong: "Oxygène :"
    - text: administration intranasale d'oxygène pour le traitement de la crise.
- heading "Maux de tête post-ponction" [level=2]
- paragraph: Les céphalées post-ponction surviennent souvent après une ponction lombaire ou une anesthésie péridurale. Les symptômes typiques sont des maux de tête en se levant d'une position assise ou couchée, qui se concentrent dans la partie supérieure du crâne. L'origine est souvent une irritation des méninges.
- heading "Nos traitements comprennent" [level=3]
- list:
  - listitem:
    - strong: "Patch sanguin :"
    - text: une intervention peu invasive qui colmate la fuite dans le sac dural.
  - listitem:
    - strong: "Sphénocath :"
    - text: méthode efficace pour soulager la douleur en bloquant le ganglion sphénopalatinum.
  - listitem:
    - strong: "Hydratation :"
    - text: favoriser la cicatrisation en augmentant l'apport en liquide.
- img "Dolomed-Kopfschmerzen-Und-Gesichtsschmerzen-Postpun-Illustrator-01"
- img "Dolomed-Bewegungsapparat-Spastik-Illustration-03"
- heading "Douleurs faciales" [level=2]
- paragraph: Les douleurs faciales peuvent être causées par une variété de causes telles que des lésions nerveuses, des maladies dentaires ou des problèmes de mâchoire. Il est souvent impossible de déterminer la cause de ces troubles.
- heading "Chez Dolomed, nous offrons des traitements spécialisés, notamment" [level=3]
- list:
  - listitem:
    - strong: "Infiltrations de nerfs et de muscles spécifiques :"
    - text: Injections précises pour soulager la douleur.
  - listitem:
    - strong: "Neuromodulation :"
    - text: action sur l'activité nerveuse pour réduire la douleur.
- heading "Névralgie du trijumeau" [level=2]
- paragraph: La névralgie du trijumeau provoque des douleurs faciales soudaines et intenses le long du nerf trijumeau. Ces douleurs en crise peuvent considérablement réduire la qualité de vie des personnes concernées. Outre les possibilités chirurgicales, il existe également des méthodes interventionnelles qui peuvent déjà apporter un soulagement.
- heading "Chez Dolomed, nous proposons les traitements suivants :" [level=3]
- list:
  - listitem:
    - strong: "Infiltrations de nerfs et de muscles spécifiques :"
    - text: Injections précises pour bloquer le nerf trijumeau.
  - listitem:
    - strong: "Sphénocath :"
    - text: méthode efficace pour soulager la douleur en bloquant le ganglion sphénopalatinum.
  - listitem:
    - strong: "Kétamine :"
    - text: thérapie intraveineuse pour le soulagement de la douleur et l'amélioration de la qualité de vie.
- img "Dolomed-Kopfschmerzen-Und-Gesichtsschmerzen-Trigeminusneuralgie-Illustrator-01"
- heading "Comment continuer ?" [level=2]
- img "Dolomed-Bewegungsapparat-Wieweiter-Illustration-02"
- text: Vous souffrez de douleurs dorsales ou d’autres douleurs musculo-squelettiques ? Prenez rendez-vous chez Dolomed dès aujourd’hui et demandez conseil à nos experts. Contactez-nous à l’adresse
- link "info@dolomed.ch":
  - /url: mailto:info@dolomed.ch
- text: pour en savoir plus sur nos options de traitement individuel. Veuillez noter qu’il est nécessaire d’être adressé pour le traitement.
- link "Prendre un rendez-vous":
  - /url: "#"
- heading "Foire aux questions (FAQ)" [level=2]
- button "Quelles sont les causes les plus fréquentes des maux de tête ?" [expanded]
- region "Quelles sont les causes les plus fréquentes des maux de tête ?":
  - paragraph: Les maux de tête peuvent être causés par une variété de facteurs, y compris les migraines, les céphalées de tension, les céphalées en grappe, les céphalées post-ponction et la névralgie du trijumeau.
- button "Quels sont les traitements que vous proposez aux personnes concernées chez Dolomed ?"
- button "Comment fonctionne le TENS ?"
- button "Qu'est-ce que Sphenocath et comment fonctionne-t-il ?"
- button "Qu'est-ce que la neuromodulation ?"
- button "Que sont les infiltrations de certains nerfs et muscles ?"
- button "Comment prendre rendez-vous ?"
- button "Que faire contre les maux de tête en haut de la tête ?"
- heading "ZUWEISUNG / BON DE DÉLÉGATION" [level=2]
- paragraph: Centre de compétence pour la médecine de la douleur Centre de compétence pour la médecine de la douleur
- list:
  - listitem: Site Biel / Site Bienne
- list:
  - listitem: Bahnhofplatz 2C / Place de la Gare 2C 2ème étage / Stock, 2502 Biel-Bienne
- list:
  - listitem:
    - img
    - text: Numéro de téléphone
- list:
  - listitem:
    - link "+41 32 324 39 90":
      - /url: tel:+41%2032%20324%2039%2090
- list:
  - listitem:
    - img
    - text: E-mail
- list:
  - listitem:
    - link "info@dolomed.ch":
      - /url: mailto:info@dolomed.ch
- list:
  - listitem: Standort Bern / Site de Berne
- list:
  - listitem: Sidlerstrasse 4, 3012 Bern-Berne 2. Stock / 2ème étages, 2502 Bern-Berne
- list:
  - listitem:
    - img
    - text: Numéro de téléphone
- list:
  - listitem:
    - link "+41 32 324 39 90":
      - /url: tel:+41%2032%20324%2039%2090
- list:
  - listitem:
    - img
    - text: E-mail
- list:
  - listitem:
    - link "info@dolomed.ch":
      - /url: mailto:info@dolomed.ch
- contentinfo:
  - link "Image link":
    - /url: https://dolomed.ch/
    - img "Image link"
  - text: Pages
  - link "Accueil":
    - /url: https://dolomed.ch/fr/
  - link "Offre":
    - /url: https://dolomed.ch/fr/#angebot
  - link "Pour les patients et les délégations":
    - /url: https://dolomed.ch/fr/#patienten
  - link "Contact":
    - /url: https://dolomed.ch/fr/#kontakt
  - link "TEAM":
    - /url: https://dolomed.ch/fr/#team
  - link "Carrière":
    - /url: https://dolomed.ch/fr/#karriere
  - text: Maladies
  - link "Appareil locomoteur":
    - /url: /fr/appareil-locomoteur/
  - link "Douleurs d'organes internes":
    - /url: /fr/douleurs-dorganes-internes/
  - link "Maux de tête et douleurs faciales":
    - /url: /fr/maux-de-tete-et-douleurs-faciales/
  - link "Maladies vasculaires":
    - /url: /fr/maladies-vasculaires/
  - link "Traitement des douleurs nerveuses":
    - /url: /fr/traitement-des-douleurs-nerveuses/
  - text: Thérapie
  - link "Stimulation nerveuse":
    - /url: /fr/stimulation-nerveuse/
  - link "Un soulagement naturel grâce à l'acupuncture":
    - /url: fr/soulagement-naturel-par-lacupuncture/
  - link "douleurs chroniques":
    - /url: /fr/douleurs-chroniques/
  - link "Traitement de la douleur chronique":
    - /url: /fr/traitement-des-maladies-chroniques/
  - link "Traitement du mal de dos":
    - /url: /fr/traitement-du-mal-de-dos/
  - link "Plasma (PRP) pour un traitement efficace":
    - /url: /fr/plasma-prp/
  - link "Thérapie par cellules souches":
    - /url: /fr/therapie-par-cellules-souches/
  - link "Thérapie au laser":
    - /url: /fr/therapie-au-laser/
  - link "Thérapie extracorporelle par ondes de choc":
    - /url: /fr/therapie-extracorporelle-par-ondes-de-choc/
  - link "Thérapie par le mouvement et entraînement des fascias":
    - /url: /fr/therapie-par-le-mouvement-et-entrainement-des-fascias/
  - link "Thérapie topique à base de capsaïcine hautement concentrée":
    - /url: /fr/therapie-topique-a-base-de-capsaicine-hautement-concentree/
  - text: Mentions légales
  - link "Mentions légales":
    - /url: /fr/mentions-legales/
  - link "Protection des données":
    - /url: /fr/protection-des-donnees/
  - text: Suivez nous
  - list:
    - listitem:
      - link:
        - /url: https://www.instagram.com/dolomed.ag
        - img
  - paragraph: Copyright 2025 – Tous droits réservés Dolomed.
- button
- button "retour":
  - img
  - text: retour
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- heading "Nous aimons toujours discuter avec toi" [level=2]
- text: Parlons
- link "Phone +41 32 324 39 90":
  - /url: tel:+41323243990
  - img "Phone"
  - text: +41 32 324 39 90
- link "Email info@dolomed.ch":
  - /url: mailto:info@dolomed.ch
  - img "Email"
  - text: info@dolomed.ch
- list:
  - listitem:
    - img "list icon"
    - heading "Prendre rendez-vous" [level=3]
  - listitem:
    - link "list icon Support technique":
      - /url: https://dolomed.ch/fr/#kontaktform
      - img "list icon"
      - heading "Support technique" [level=3]
- button "retour":
  - img
  - text: retour
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- text: Envoyer un message à Dolomed Si vous avez des questions ou des préoccupations, veuillez nous contacter. Des réponses rapides et une aide sont garanties.
- list
- form "Formulaire de contact":
  - paragraph:
    - text: Nom
    - textbox "Nom"
  - paragraph:
    - text: Adresse électronique
    - textbox "Adresse électronique"
  - paragraph:
    - text: Numéro de téléphone
    - textbox "Numéro de téléphone"
  - paragraph:
    - text: Écrivez votre message ci-dessous
    - textbox "Écrivez votre message ci-dessous"
  - paragraph:
    - button "Envoyer"
- button "retour":
  - img
  - text: retour
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- text: Demander à être rappelé Si vous avez des questions ou des préoccupations, veuillez nous contacter. Des réponses rapides et une aide sont garanties.
- list
- form "Formulaire de contact":
  - paragraph:
    - text: Nom
    - textbox "Nom"
  - paragraph:
    - text: Adresse électronique
    - textbox "Adresse électronique"
  - paragraph:
    - text: Numéro de téléphone
    - textbox "Numéro de téléphone"
  - paragraph:
    - text: Écrivez votre message ci-dessous
    - textbox "Écrivez votre message ci-dessous"
  - paragraph:
    - button "Envoyer"
- link "Go to top":
  - /url: "#"
  - img
- text: mobile
```

# Test source

```ts
   1 | import { test, expect, Page, Browser } from '@playwright/test';
   2 | import { ImageComparison, DiffResult, SizeMismatchTolerance } from './image-diff';
   3 |
   4 | export interface VisualTestConfig {
   5 |   url: string;
   6 |   testName: string;
   7 |   diffThreshold?: number;
   8 |   viewport?: { width: number; height: number };
   9 |   waitForLoadState?: 'load' | 'domcontentloaded' | 'networkidle';
   10 |   customStyles?: string;
   11 |   scrollToBottom?: boolean;
   12 |   waitAfterScroll?: number;
   13 |   sizeMismatchTolerance?: SizeMismatchTolerance;
   14 | }
   15 |
   16 | export class VisualTestHelper {
   17 |   private imageComparison: ImageComparison;
   18 |   private page!: Page;
   19 |   private timestamp: string;
   20 |   private currentUser: string;
   21 |
   22 |   constructor() {
   23 |     this.imageComparison = new ImageComparison();
   24 |     this.timestamp = new Date().toISOString().replace('T', ' ').slice(0, 19);
   25 |     this.currentUser = process.env.USER || process.env.USERNAME || 'unknown';
   26 |   }
   27 |
   28 |   async setup(browser: Browser, viewport = { width: 1366, height: 768 }): Promise<void> {
   29 |     const context = await browser.newContext({ viewport });
   30 |     this.page = await context.newPage();
   31 |     console.log(`Test setup initialized at ${this.timestamp} by ${this.currentUser}`);
   32 |   }
   33 |
   34 |   async cleanup(): Promise<void> {
   35 |     if (this.page) {
   36 |       await this.page.close();
   37 |     }
   38 |   }
   39 |
   40 |   async runVisualTest(config: VisualTestConfig): Promise<DiffResult> {
   41 |     const {
   42 |       url,
   43 |       testName,
   44 |       diffThreshold = 0.1,
   45 |       waitForLoadState = 'networkidle',
   46 |       customStyles,
   47 |       scrollToBottom = true,
   48 |       waitAfterScroll = 1000,
   49 |       sizeMismatchTolerance
   50 |     } = config;
   51 |
   52 |     console.log(`Starting visual test at ${this.timestamp}`);
   53 |     console.log(`Test running by user: ${this.currentUser}`);
   54 |     console.log('Page dimensions:', await this.page.viewportSize());
   55 |
   56 |     try {
   57 |       // Navigate to the page
   58 |       await this.page.goto(url);
   59 |       await this.page.waitForLoadState(waitForLoadState);
   60 |
   61 |       // Apply custom styles if provided
   62 |       if (customStyles) {
   63 |         await this.page.addStyleTag({ content: customStyles });
   64 |       }
   65 |
   66 |       // Auto-scroll if enabled
   67 |       if (scrollToBottom) {
   68 |         await this.autoScroll(waitAfterScroll);
   69 |       }
   70 |
   71 |       // Perform image comparison
   72 |       const diffResult = await this.imageComparison.compareScreenshots(
   73 |         this.page, 
   74 |         testName, 
   75 |         diffThreshold, 
   76 |         sizeMismatchTolerance
   77 |       );
   78 |       const reportPath = this.imageComparison.generateDiffReport(testName, diffResult);
   79 |       
   80 |       console.log(`
   81 |         Test Results:
   82 |         - Timestamp: ${this.timestamp}
   83 |         - User: ${this.currentUser}
   84 |         - Report Path: ${reportPath}
   85 |         - Diff Percentage: ${diffResult.diffPercentage.toFixed(2)}%
   86 |       `);
   87 |
   88 |       // Assert the diff percentage
>  89 |       expect(diffResult.diffPercentage).toBeLessThanOrEqual(diffThreshold);
      |                                         ^ Error: expect(received).toBeLessThanOrEqual(expected)
   90 |
   91 |       return diffResult;
   92 |
   93 |     } catch (error) {
   94 |       console.error(`
   95 |         Test failed at ${this.timestamp}
   96 |         User: ${this.currentUser}
   97 |         Error: ${error}
   98 |       `);
   99 |       throw error;
  100 |     }
  101 |   }
  102 |
  103 |   private async autoScroll(waitAfterScroll: number = 1000): Promise<void> {
  104 |     await this.page.evaluate(async () => {
  105 |       await new Promise<void>((resolve) => {
  106 |         let totalHeight = 0;
  107 |         const distance = 100;
  108 |         const timer = setInterval(() => {
  109 |           const scrollHeight = document.documentElement.scrollHeight;
  110 |           window.scrollBy(0, distance);
  111 |           totalHeight += distance;
  112 |
  113 |           if (totalHeight >= scrollHeight) {
  114 |             clearInterval(timer);
  115 |             window.scrollTo(0, scrollHeight);
  116 |             resolve();
  117 |           }
  118 |         }, 240);
  119 |       });
  120 |     });
  121 |
  122 |     await this.page.waitForTimeout(waitAfterScroll);
  123 |   }
  124 |
  125 |   // Getter method for accessing the image comparison instance if needed
  126 |   get imageComparisonInstance(): ImageComparison {
  127 |     return this.imageComparison;
  128 |   }
  129 |
  130 |   // Getter method for accessing the page instance if needed
  131 |   getPage(): Page {
  132 |     return this.page;
  133 |   }
  134 | }
```