# Test info

- Name: Visual Regression - Bewegungsapparat Page (Desktop) >> bewegungsapparat-visual-desktop-fr
- Location: /Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/tests/bewegungsapparat/BewegungsapparatPageUITest.spec.ts:34:9

# Error details

```
Error: expect(received).toBeLessThanOrEqual(expected)

Expected: <= 0.7
Received:    3.145200774531747
    at VisualTestHelper.runVisualTest (/Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/utils/visual-test-helper.ts:89:41)
    at MultiLanguageVisualHelper.runIndividualLanguageTest (/Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/utils/multi-language-visual-helper.ts:56:5)
    at /Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/tests/bewegungsapparat/BewegungsapparatPageUITest.spec.ts:35:7
```

# Page snapshot

```yaml
- heading "🍪 Wir schätzen Ihre Privatsphäre" [level=1]
- paragraph: Wir verwenden Cookies, um Ihr Surferlebnis zu verbessern, personalisierte Anzeigen oder Inhalte einzusetzen und unseren Datenverkehr zu analysieren. Wenn Sie auf „Alle akzeptieren" klicken, stimmen Sie der Anwendung von Cookies zu.
- button "Anpassen"
- button "Alle akzeptieren"
- banner:
  - navigation:
    - link "DOLOMED_Logo_RGB_Claim 1":
      - /url: https://dolomed.ch/fr/
      - img "DOLOMED_Logo_RGB_Claim 1"
    - button "Open/Close Menu":
      - img
    - button "Français":
      - link "Français":
        - /url: "#"
        - img
        - text: Français
- 'heading "Les troubles musculo-squelettiques : une approche holistique" [level=1]'
- heading "Un réseau complexe d'os, de muscles, de tendons, de ligaments et d'articulations" [level=2]
- paragraph: Le corps humain et les différents éléments de l'appareil locomoteur nous permettent de bouger et nous assurent stabilité et force. Chez Dolomed, nous proposons une gamme complète de thérapies pour vous aider à retrouver une meilleure qualité de vie.
- link "Prendre rendez-vous":
  - /url: "#"
- link "Appeler maintenant":
  - /url: tel:032 324 39 90
- img "Dolomed-Bewegungsapparat-Hero-Illustration-01"
- img "Dolomed-Bewegungsapparat-Arthrose-circle-light"
- img "Dolomed-Bewegungsapparat-Fibromyalgie-Illustration-01"
- img "Dolomed-Bewegungsapparat-arthrose-circles-4"
- heading "Arthrose" [level=2]
- paragraph: L'arthrose est une maladie dégénérative des articulations causée par la dégradation du cartilage. Ce cartilage fait office d'amortisseur entre les os et réduit la friction pendant le mouvement. Les blessures, une forte sollicitation et également l'âge biologique entraînent l'arthrose. Celle-ci peut apparaître dans les jambes (arthrose du genou, arthrose de la hanche), dans le dos et, en théorie, dans presque toutes les articulations du squelette humain.
- paragraph: Les symptômes typiques sont la douleur (par exemple, douleur au genou, douleur au dos), la raideur et la mobilité réduite. Les douleurs liées à l'arthrose sont un problème fréquent dans le cadre du vieillissement de la population. En l'absence de traitement, une arthrose sévère peut également entraîner une usure et une inflammation des os.
- heading "Traitements possibles :" [level=3]
- list:
  - listitem:
    - strong: PRP
    - text: ": plasma riche en plaquettes utilisé pour réduire l'inflammation des articulations touchées par l'arthrose."
  - listitem:
    - strong: Thérapie par cellules souches
    - text: ": cellules souches autologues pour la guérison du cartilage et de la synovie."
- heading "Tendinopathie" [level=2]
- paragraph: La tendinopathie fait référence à l'inflammation, aux blessures ou à l'usure des tendons qui relient les muscles aux os. Les problèmes liés aux fascias du corps entrent également dans cette définition.
- paragraph: Les fascias sont une structure solide et élastique de tissu conjonctif qui relie le corps, les organes et les muscles squelettiques entre eux, tout en assurant une séparation élastique. Les fascias relient presque toutes les structures du corps, des pieds à la tête en passant par le bassin, le dos et l'abdomen. Les fascias permettent à notre corps de conserver sa forme. La fonction exacte des fascias dans le système musculo-squelettique actif et passif fait encore l'objet de recherches. Cette pathologie survient souvent en cas de surmenage ou de blessure aiguë.
- heading "options de traitement comprennent :" [level=3]
- list:
  - listitem:
    - strong: Thérapie par ondes de choc
    - text: ": ondes ultrasonores focalisées pour la guérison des tendons, des ligaments et des muscles."
  - listitem:
    - strong: Infiltrations
    - text: ": Injections pour un soulagement ciblé de la douleur et une réduction de l'inflammation."
  - listitem:
    - strong: PRP
    - text: ": stimulation de la cicatrisation par du plasma riche en plaquettes."
- img "Dolomed-Bewegungsapparat-Tendinopathie-Illustration-01"
- img "Dolomed-Bewegungsapparat-arthrose-circles-4"
- heading "Fibromyalgie" [level=2]
- paragraph: La fibromyalgie est une maladie chronique qui se caractérise par des muscles douloureux, de la fatigue et une sensibilité dans certaines parties du corps. Le diagnostic de cette maladie comprend divers tests. Il s'agit d'un diagnostic dit d'exclusion, ce qui signifie que d'autres causes de la symptomatologie doivent d'abord être exclues. Il s'agit notamment de problèmes osseux (par ex. fractures), musculaires (blessures) ou articulaires.
- paragraph: On ne peut parler de fibromyalgie qu'après avoir clarifié ces structures et obtenu des résultats positifs à divers tests. Le traitement doit être adapté et individualisé à chaque personne.
- heading "Nos thérapies possibles comprennent" [level=3]
- list:
  - listitem:
    - strong: Kétamine
    - text: ": thérapie intraveineuse pour le soulagement de la douleur et l'amélioration de la qualité de vie."
  - listitem:
    - strong: Prise en charge psychologique
    - text: ": modulation de la gestion de la douleur et renforcement des capacités d'autoguérison."
- heading "Blessures sportives" [level=2]
- paragraph: Les blessures sportives touchent souvent les os, les muscles, les tendons et les articulations et peuvent entraîner des douleurs aiguës ou chroniques. Les blessures des fibres musculaires, des os, des disques ou des articulations sont souvent dues à un traumatisme. Elles sont diagnostiquées sur la base des symptômes cliniques, mais parfois aussi uniquement par des techniques d'imagerie telles que la radiographie ou l'IRM. La plupart du temps, les petites blessures guérissent sans problème. Si ce n'est pas le cas, il convient de faire appel à un service médical spécialisé dans ce domaine.
- paragraph: Nous comptons également parmi les blessures sportives les syndromes de surcharge comme le coude de tennis ou de golf ou les douleurs dorsales dues à des lésions musculaires traumatiques. Il est important de commencer la thérapie tôt afin d'éviter les douleurs chroniques.
- paragraph: Chez Dolomed, nous tenons à établir un plan de traitement individuel à chaque fois.
- heading "Les plans de traitement possibles incluent" [level=3]
- list:
  - listitem:
    - strong: TENS
    - text: ": soulager les douleurs aiguës et favoriser la guérison."
  - listitem:
    - strong: PRP
    - text: ": accélération de la régénération."
  - listitem:
    - strong: Infiltrations
    - text: ": Gestion de la douleur et anti-inflammatoire."
- img "Dolomed-Bewegungsapparat-Sportverletzungen-Illustration-04"
- img "Dolomed-Bewegungsapparat-Spastik-Illustration-02"
- img "Dolomed-Bewegungsapparat-Rheumatische-Illustration-01"
- heading "Maladies rhumatismales" [level=2]
- paragraph: Les maladies rhumatismales sont un groupe de maladies qui affectent les articulations, les disques intervertébraux, les os, les muscles et les ligaments. Elles sont à l'origine de maux de dos, de douleurs osseuses, de douleurs musculo-squelettiques, de gonflements et de raideurs. Les maladies rhumatismales peuvent être symétriques ou n'affecter qu'un seul côté du corps. Dans les cas graves, des lésions osseuses à long terme peuvent apparaître. Le traitement doit être coordonné avec les collègues rhumatologues, ergothérapeutes et physiothérapeutes afin d'améliorer la qualité de vie.
- heading "Nos méthodes de traitement incluent" [level=3]
- list:
  - listitem:
    - strong: Thérapie topique
    - text: ": soulagement de l'inflammation par application directe."
  - listitem:
    - strong: Neuromodulation
    - text: ": gestion de la douleur à long terme."
  - listitem:
    - strong: Les infiltrations
    - text: ": Thérapie ciblée pour le soulagement de la douleur."
- heading "Douleurs fantômes" [level=2]
- paragraph: La tendinopathie fait référence à l'inflammation, aux blessures ou à l'usure des tendons qui relient les muscles aux os. Les problèmes liés aux fascias du corps entrent également dans cette définition.
- paragraph: Les douleurs fantômes surviennent après l'amputation d'un membre et sont ressenties dans la partie du corps qui n'existe plus. Il n'existe aucune preuve que la douleur fantôme résulte d'une lésion directe des os, des muscles ou des nerfs. La douleur fantôme résulte plutôt d'une reprogrammation du système nerveux central.
- heading "Nous pouvons vous proposer, entre autres, les thérapies suivantes :" [level=3]
- list:
  - listitem:
    - strong: Kétamine
    - text: ": pour le soulagement de la douleur et l'amélioration de la qualité de vie."
  - listitem:
    - strong: Neuromodulation
    - text: ": modification des signaux de la douleur dans le cerveau."
- img "Dolomed-Bewegungsapparat-Spastik-Illustration-01"
- img "Dolomed-Bewegungsapparat-arthrose-circles-4"
- heading "Spasticité" [level=2]
- paragraph: La spasticité est une raideur musculaire qui peut survenir dans le cadre de maladies neurologiques. De plus, des contractions musculaires involontaires peuvent se produire. La première chose à faire est de traiter la maladie neurologique sous-jacente.
- heading "Les approches de traitement complémentaires sont par exemple" [level=3]
- list:
  - listitem:
    - strong: TENS
    - text: ": relaxation des muscles et soulagement de la douleur."
  - listitem:
    - strong: Neuromodulation
    - text: ": action sur les signaux nerveux pour détendre les muscles."
- heading "Comment continuer ?" [level=2]
- img "Dolomed-Bewegungsapparat-Wieweiter-Illustration-02"
- text: Vous souffrez de douleurs dorsales ou d’autres douleurs musculo-squelettiques ? Prenez rendez-vous chez Dolomed dès aujourd’hui et demandez conseil à nos experts. Contactez-nous à l’adresse
- link "info@dolomed.ch":
  - /url: mailto:info@dolomed.ch
- text: pour en savoir plus sur nos options de traitement individuel. Veuillez noter qu’il est nécessaire d’être adressé pour le traitement.
- link "Prendre un rendez-vous":
  - /url: "#"
- heading "Foire aux questions (FAQ)" [level=2]
- button "Qu'est-ce que l'appareil locomoteur ?" [expanded]
- region "Qu'est-ce que l'appareil locomoteur ?":
  - paragraph: L’appareil locomoteur comprend toutes les structures responsables du mouvement du corps, y compris les os, les muscles, les tendons, les ligaments et les articulations.
- button "Quels sont les traitements que vous proposez chez Dolomed ?"
- button "Comment prendre rendez-vous ?"
- button "Quelles sont les causes les plus fréquentes des douleurs musculo-squelettiques ?"
- button "Comment fonctionne le TENS ?"
- button "Qu'est-ce que la neuromodulation ?"
- button "Qu'est-ce que le PRP et comment fonctionne-t-il ?"
- button "Puis-je rentrer chez moi immédiatement après une infiltration ?"
- heading "ZUWEISUNG / BON DE DÉLÉGATION" [level=2]
- paragraph: Centre de compétence pour la médecine de la douleur Centre de compétence pour la médecine de la douleur
- list:
  - listitem: Site Biel / Site Bienne
- list:
  - listitem: Bahnhofplatz 2C / Place de la Gare 2C 2ème étage / Stock, 2502 Biel-Bienne
- list:
  - listitem:
    - img
    - text: Numéro de téléphone
- list:
  - listitem:
    - link "+41 32 324 39 90":
      - /url: tel:+41%2032%20324%2039%2090
- list:
  - listitem:
    - img
    - text: E-mail
- list:
  - listitem:
    - link "info@dolomed.ch":
      - /url: mailto:info@dolomed.ch
- list:
  - listitem: Standort Bern / Site de Berne
- list:
  - listitem: Sidlerstrasse 4, 3012 Bern-Berne 2. Stock / 2ème étages, 2502 Bern-Berne
- list:
  - listitem:
    - img
    - text: Numéro de téléphone
- list:
  - listitem:
    - link "+41 32 324 39 90":
      - /url: tel:+41%2032%20324%2039%2090
- list:
  - listitem:
    - img
    - text: E-mail
- list:
  - listitem:
    - link "info@dolomed.ch":
      - /url: mailto:info@dolomed.ch
- contentinfo:
  - link "Image link":
    - /url: https://dolomed.ch/
    - img "Image link"
  - paragraph: Suivez nous
  - list:
    - listitem:
      - link:
        - /url: https://www.instagram.com/dolomed.ag
        - img
  - text: Pages
  - link "Accueil":
    - /url: https://dolomed.ch/fr/
  - link "Offre":
    - /url: https://dolomed.ch/fr/#angebot
  - link "Pour les patients et les délégations":
    - /url: https://dolomed.ch/fr/#patienten
  - link "Contact":
    - /url: https://dolomed.ch/fr/#kontakt
  - link "TEAM":
    - /url: https://dolomed.ch/fr/#team
  - link "Carrière":
    - /url: https://dolomed.ch/fr/#karriere
  - text: Maladies
  - link "Appareil locomoteur":
    - /url: /fr/appareil-locomoteur/
  - link "Douleurs d'organes internes":
    - /url: /fr/douleurs-dorganes-internes/
  - link "Maux de tête et douleurs faciales":
    - /url: /fr/maux-de-tete-et-douleurs-faciales/
  - link "Maladies vasculaires":
    - /url: /fr/maladies-vasculaires/
  - link "Traitement des douleurs nerveuses":
    - /url: /fr/traitement-des-douleurs-nerveuses/
  - text: Thérapie
  - link "Stimulation nerveuse":
    - /url: /fr/stimulation-nerveuse/
  - link "Un soulagement naturel grâce à l'acupuncture":
    - /url: fr/soulagement-naturel-par-lacupuncture/
  - link "douleurs chroniques":
    - /url: /fr/douleurs-chroniques/
  - link "Traitement de la douleur chronique":
    - /url: /fr/traitement-des-maladies-chroniques/
  - link "Traitement du mal de dos":
    - /url: /fr/traitement-du-mal-de-dos/
  - link "Plasma (PRP) pour un traitement efficace":
    - /url: /fr/plasma-prp/
  - link "Thérapie par cellules souches":
    - /url: /fr/therapie-par-cellules-souches/
  - link "Thérapie au laser":
    - /url: /fr/therapie-au-laser/
  - link "Thérapie extracorporelle par ondes de choc":
    - /url: /fr/therapie-extracorporelle-par-ondes-de-choc/
  - link "Thérapie par le mouvement et entraînement des fascias":
    - /url: /fr/therapie-par-le-mouvement-et-entrainement-des-fascias/
  - link "Thérapie topique à base de capsaïcine hautement concentrée":
    - /url: /fr/therapie-topique-a-base-de-capsaicine-hautement-concentree/
  - text: Mentions légales
  - link "Mentions légales":
    - /url: /fr/mentions-legales/
  - link "Protection des données":
    - /url: /fr/protection-des-donnees/
  - paragraph: Copyright 2025 – Tous droits réservés Dolomed.
- button
- button "retour":
  - img
  - text: retour
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- heading "Nous aimons toujours discuter avec toi" [level=2]
- text: Parlons
- link "Phone +41 32 324 39 90":
  - /url: tel:+41323243990
  - img "Phone"
  - text: +41 32 324 39 90
- link "Email info@dolomed.ch":
  - /url: mailto:info@dolomed.ch
  - img "Email"
  - text: info@dolomed.ch
- list:
  - listitem:
    - img "list icon"
    - heading "Prendre rendez-vous" [level=3]
  - listitem:
    - link "list icon Support technique":
      - /url: https://dolomed.ch/fr/#kontaktform
      - img "list icon"
      - heading "Support technique" [level=3]
- button "retour":
  - img
  - text: retour
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- text: Envoyer un message à Dolomed Si vous avez des questions ou des préoccupations, veuillez nous contacter. Des réponses rapides et une aide sont garanties.
- list
- form "Formulaire de contact":
  - paragraph:
    - text: Nom
    - textbox "Nom"
  - paragraph:
    - text: Adresse électronique
    - textbox "Adresse électronique"
  - paragraph:
    - text: Numéro de téléphone
    - textbox "Numéro de téléphone"
  - paragraph:
    - text: Écrivez votre message ci-dessous
    - textbox "Écrivez votre message ci-dessous"
  - paragraph:
    - button "Envoyer"
- button "retour":
  - img
  - text: retour
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- text: Demander à être rappelé Si vous avez des questions ou des préoccupations, veuillez nous contacter. Des réponses rapides et une aide sont garanties.
- list
- form "Formulaire de contact":
  - paragraph:
    - text: Nom
    - textbox "Nom"
  - paragraph:
    - text: Adresse électronique
    - textbox "Adresse électronique"
  - paragraph:
    - text: Numéro de téléphone
    - textbox "Numéro de téléphone"
  - paragraph:
    - text: Écrivez votre message ci-dessous
    - textbox "Écrivez votre message ci-dessous"
  - paragraph:
    - button "Envoyer"
- link "Go to top":
  - /url: "#"
  - img
- text: tablet
```

# Test source

```ts
   1 | import { test, expect, Page, Browser } from '@playwright/test';
   2 | import { ImageComparison, DiffResult, SizeMismatchTolerance } from './image-diff';
   3 |
   4 | export interface VisualTestConfig {
   5 |   url: string;
   6 |   testName: string;
   7 |   diffThreshold?: number;
   8 |   viewport?: { width: number; height: number };
   9 |   waitForLoadState?: 'load' | 'domcontentloaded' | 'networkidle';
   10 |   customStyles?: string;
   11 |   scrollToBottom?: boolean;
   12 |   waitAfterScroll?: number;
   13 |   sizeMismatchTolerance?: SizeMismatchTolerance;
   14 | }
   15 |
   16 | export class VisualTestHelper {
   17 |   private imageComparison: ImageComparison;
   18 |   private page!: Page;
   19 |   private timestamp: string;
   20 |   private currentUser: string;
   21 |
   22 |   constructor() {
   23 |     this.imageComparison = new ImageComparison();
   24 |     this.timestamp = new Date().toISOString().replace('T', ' ').slice(0, 19);
   25 |     this.currentUser = process.env.USER || process.env.USERNAME || 'unknown';
   26 |   }
   27 |
   28 |   async setup(browser: Browser, viewport = { width: 1366, height: 768 }): Promise<void> {
   29 |     const context = await browser.newContext({ viewport });
   30 |     this.page = await context.newPage();
   31 |     console.log(`Test setup initialized at ${this.timestamp} by ${this.currentUser}`);
   32 |   }
   33 |
   34 |   async cleanup(): Promise<void> {
   35 |     if (this.page) {
   36 |       await this.page.close();
   37 |     }
   38 |   }
   39 |
   40 |   async runVisualTest(config: VisualTestConfig): Promise<DiffResult> {
   41 |     const {
   42 |       url,
   43 |       testName,
   44 |       diffThreshold = 0.1,
   45 |       waitForLoadState = 'networkidle',
   46 |       customStyles,
   47 |       scrollToBottom = true,
   48 |       waitAfterScroll = 1000,
   49 |       sizeMismatchTolerance
   50 |     } = config;
   51 |
   52 |     console.log(`Starting visual test at ${this.timestamp}`);
   53 |     console.log(`Test running by user: ${this.currentUser}`);
   54 |     console.log('Page dimensions:', await this.page.viewportSize());
   55 |
   56 |     try {
   57 |       // Navigate to the page
   58 |       await this.page.goto(url);
   59 |       await this.page.waitForLoadState(waitForLoadState);
   60 |
   61 |       // Apply custom styles if provided
   62 |       if (customStyles) {
   63 |         await this.page.addStyleTag({ content: customStyles });
   64 |       }
   65 |
   66 |       // Auto-scroll if enabled
   67 |       if (scrollToBottom) {
   68 |         await this.autoScroll(waitAfterScroll);
   69 |       }
   70 |
   71 |       // Perform image comparison
   72 |       const diffResult = await this.imageComparison.compareScreenshots(
   73 |         this.page, 
   74 |         testName, 
   75 |         diffThreshold, 
   76 |         sizeMismatchTolerance
   77 |       );
   78 |       const reportPath = this.imageComparison.generateDiffReport(testName, diffResult);
   79 |       
   80 |       console.log(`
   81 |         Test Results:
   82 |         - Timestamp: ${this.timestamp}
   83 |         - User: ${this.currentUser}
   84 |         - Report Path: ${reportPath}
   85 |         - Diff Percentage: ${diffResult.diffPercentage.toFixed(2)}%
   86 |       `);
   87 |
   88 |       // Assert the diff percentage
>  89 |       expect(diffResult.diffPercentage).toBeLessThanOrEqual(diffThreshold);
      |                                         ^ Error: expect(received).toBeLessThanOrEqual(expected)
   90 |
   91 |       return diffResult;
   92 |
   93 |     } catch (error) {
   94 |       console.error(`
   95 |         Test failed at ${this.timestamp}
   96 |         User: ${this.currentUser}
   97 |         Error: ${error}
   98 |       `);
   99 |       throw error;
  100 |     }
  101 |   }
  102 |
  103 |   private async autoScroll(waitAfterScroll: number = 1000): Promise<void> {
  104 |     await this.page.evaluate(async () => {
  105 |       await new Promise<void>((resolve) => {
  106 |         let totalHeight = 0;
  107 |         const distance = 100;
  108 |         const timer = setInterval(() => {
  109 |           const scrollHeight = document.documentElement.scrollHeight;
  110 |           window.scrollBy(0, distance);
  111 |           totalHeight += distance;
  112 |
  113 |           if (totalHeight >= scrollHeight) {
  114 |             clearInterval(timer);
  115 |             window.scrollTo(0, scrollHeight);
  116 |             resolve();
  117 |           }
  118 |         }, 240);
  119 |       });
  120 |     });
  121 |
  122 |     await this.page.waitForTimeout(waitAfterScroll);
  123 |   }
  124 |
  125 |   // Getter method for accessing the image comparison instance if needed
  126 |   get imageComparisonInstance(): ImageComparison {
  127 |     return this.imageComparison;
  128 |   }
  129 |
  130 |   // Getter method for accessing the page instance if needed
  131 |   getPage(): Page {
  132 |     return this.page;
  133 |   }
  134 | }
```