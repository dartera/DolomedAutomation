# Test info

- Name: Visual Regression - Nervenstimulation Page (Mobile) >> nervenstimulation-visual-mobile-de
- Location: /Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/tests/Nervenstimulation/NervenstimulationPageUITest.spec.ts:64:9

# Error details

```
Error: expect(received).toBeLessThanOrEqual(expected)

Expected: <= 0.7
Received:    8.165530510040044
    at VisualTestHelper.runVisualTest (/Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/utils/visual-test-helper.ts:89:41)
    at MultiLanguageVisualHelper.runIndividualLanguageTest (/Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/utils/multi-language-visual-helper.ts:56:5)
    at /Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/tests/Nervenstimulation/NervenstimulationPageUITest.spec.ts:65:7
```

# Page snapshot

```yaml
- heading "ðŸª Wir schÃ¤tzen Ihre PrivatsphÃ¤re" [level=1]
- paragraph: Wir verwenden Cookies, um Ihr Surferlebnis zu verbessern, personalisierte Anzeigen oder Inhalte einzusetzen und unseren Datenverkehr zu analysieren. Wenn Sie auf â€žAlle akzeptieren" klicken, stimmen Sie der Anwendung von Cookies zu.
- button "Anpassen"
- button "Alle akzeptieren"
- banner:
  - navigation:
    - link "DOLOMED_Logo_RGB_Claim 1":
      - /url: /
      - img "DOLOMED_Logo_RGB_Claim 1"
    - button "Open/Close Menu":
      - img
    - button "Deutsch":
      - link "Deutsch":
        - /url: "#"
        - img
        - text: Deutsch
- heading "Nervenstimulation" [level=1]:
  - strong: Nervenstimulation
- heading "Effektive Schmerzlinderung durch moderne Nervenstimulationstechniken" [level=2]
- paragraph: Nervenstimulation ist eine bewÃ¤hrte Methode zur Schmerzlinderung und Muskelstimulation, die sowohl bei akuten als auch bei chronischen Schmerzen eingesetzt werden kann. Bei Dolomed bieten wir verschiedene Formen der Nervenstimulation an, darunter TENS (Transkutane Elektrische Nervenstimulation), periphere Neurostimulation und zentrale Neurostimulation. Erfahren Sie mehr Ã¼ber diese innovativen TherapiemÃ¶glichkeiten und wie sie Ihnen helfen kÃ¶nnen, Ihre LebensqualitÃ¤t zu verbessern.
- link "Termin vereinbaren":
  - /url: "#"
- link "Jetzt anrufen":
  - /url: tel:032 324 39 90
- img "Dolomed-Nervenstimulation-Hero-Illustrator-01-1-1"
- img "Dolomed-Bewegungsapparat-Arthrose-circle-light"
- img "Dolomed-Nervenstimulation-Was-Ist-Illustrator-02"
- heading "Was ist Nervenstimulation?" [level=2]
- paragraph: Nervenstimulation, auch bekannt als Elektrostimulation, nutzt elektrische Impulse zur Stimulierung von Nerven und Muskeln. Diese Impulse kÃ¶nnen Schmerzen lindern, die Heilung fÃ¶rdern und die MuskelstÃ¤rke verbessern. Die einfachste Form der Elektrostimulation, die transkutane Elektrostimulation (TENS) wird hÃ¤ufig in der Physiotherapie und Rehabilitation eingesetzt und hat sich als wirksame Therapie bei verschiedenen Schmerzarten und Muskelproblemen erwiesen. Eine weiterfÃ¼hrende Therapie sind die periphere und zentrale Elektrostimulation, wo Elektroden implantiert werden, die eine Modulation des Schmerzsignals erreichen.
- heading "TENS GerÃ¤te (Transkutane Elektrische Nervenstimulation)" [level=2]
- paragraph: TENS, gelegentlich auch Elektrotherapie oder Elektrostimulation genannt, ist eine nicht-invasive Methode der Nervenstimulation, bei der kleine elektrische Impulse durch die Haut an die Nerven gesendet werden. Dies kann helfen, Schmerzen zu blockieren und die Freisetzung von Endorphinen zu fÃ¶rdern, die als natÃ¼rliche Schmerzmittel des KÃ¶rpers wirken.
- heading "Vorteile der TENS-Therapie:" [level=3]
- list:
  - listitem: Schmerzlinderung bei akuten und chronischen Schmerzen
  - listitem: Verbesserung der Durchblutung und FÃ¶rderung der Heilung
  - listitem: Anwendung zu Hause mit tragbaren TENS-GerÃ¤ten mÃ¶glich
- img "Dolomed-Nervenstimulation-Periphere-Illustrator-04-1"
- heading "Periphere Neurostimulation" [level=2]
- paragraph: Die periphere Neurostimulation zielt auf spezifische Nerven auÃŸerhalb des Gehirns und RÃ¼ckenmarks ab, um Schmerzen zu lindern und die Funktion der betroffenen Muskeln zu verbessern. Diese Behandlung wird hÃ¤ufig bei Schmerzen nach Verletzungen oder Operationen eingesetzt.
- heading "Vorteile der peripheren Neurostimulation:" [level=3]
- list:
  - listitem: Zielgerichtete Schmerzlinderung
  - listitem: Verbesserung der Muskel- und Nervenfunktion
  - listitem: Minimale Nebenwirkungen im Vergleich zu medikamentÃ¶sen Therapien
- heading "Zentrale Neurostimulation" [level=2]
- paragraph: Die zentrale Neurostimulation, auch als Spinal Cord Stimulation (SCS) bekannt, zielt auf das RÃ¼ckenmark ab, um chronische Schmerzen zu lindern. Diese Methode ist besonders wirksam bei Patienten, die auf herkÃ¶mmliche Schmerzbehandlungen nicht ansprechen. Bei der zentralen Neurostimulation werden in einer kleinen Operation 2 Elektroden in den Wirbelkanal implantiert. Die Modulation der Schmerzsignale fÃ¼hrt dann zu einer verminderten Empfindung der Schmerzen, ohne die sonstigen Funktionen des Nervensystems zu beeinflussen. Dieser sogenannte "Schmerzschrittmacher" eignet sich vor allem fÃ¼r Patienten, die bereits am RÃ¼cken operiert wurden, fÃ¼r Diabetiker (diabetische Polyneuropathie) und fÃ¼r Patienten mit eingeschrÃ¤nkter Durchblutung (pAVK).
- heading "Vorteile der zentralen Neurostimulation:" [level=3]
- list:
  - listitem: Linderung chronischer Schmerzen, Verbesserung der Mikrodurchblutung
  - listitem: Reduktion des Bedarfs an Schmerzmitteln
  - listitem: Verbesserung der LebensqualitÃ¤t bei schwer behandelbaren Schmerzen
- img "Dolomed-Nervenstimulation-Zentrale-Illustrator-05-1"
- heading "Wie weiter?" [level=2]
- paragraph:
  - text: Leiden Sie unter RÃ¼ckenschmerzen oder sonstigen Schmerzen im Bewegungsapparat? Vereinbaren Sie noch heute einen Termin bei Dolomed und lassen Sie sich von unseren Experten beraten. Kontaktieren Sie uns unter
  - link "info@dolomed.ch":
    - /url: mailto:info@dolomed.ch
  - text: um mehr Ã¼ber unsere individuellen Behandlungsoptionen zu erfahren. Bitte beachten Sie, dass fÃ¼r die Behandlung eine Zuweisung erforderlich ist.
- link "Einen Termin vereinbaren":
  - /url: "#"
- heading "HÃ¤ufig gestellte Fragen (FAQ)" [level=2]
- button "Was ist der Unterschied zwischen TENS und EMS?" [expanded]
- region "Was ist der Unterschied zwischen TENS und EMS?": TENS (Transkutane Elektrische Nervenstimulation) wird hauptsÃ¤chlich zur Schmerzlinderung eingesetzt, wÃ¤hrend EMS (Elektrische Muskelstimulation) darauf abzielt, die Muskeln zu stÃ¤rken und zu rehabilitieren.
- button "Ist Elektrostimulation gesund?"
- button "Wie effektiv ist EMS-Training wirklich?"
- button "Was sagen Ã„rzte zu EMS-Training?"
- button "FÃ¼r wen ist EMS nicht geeignet?"
- button "Was bringt EMS am Bauch?"
- button "Was ist TENS und wie funktioniert es?"
- button "Welche Nebenwirkungen hat die Elektrostimulation?"
- heading "ZUWEISUNG / BON DE DÃ‰LÃ‰GATION" [level=2]
- paragraph: Kompetenzzentrum fÃ¼r Schmerzmedizin Centre de compÃ©tence pour la mÃ©decine de la douleur
- list:
  - listitem: Standort Biel / Site Bienne
- list:
  - listitem: Bahnhofplatz 2C / Place de la Gare 2C 2. Stock / 2Ã¨me Ã©tage, 2502 Biel-Bienne
- list:
  - listitem:
    - img
    - text: Telefonnummer
- list:
  - listitem:
    - link "+41 32 324 39 90":
      - /url: tel:+41%2032%20324%2039%2090
- list:
  - listitem:
    - img
    - text: E-Mail
- list:
  - listitem:
    - link "info@dolomed.ch":
      - /url: mailto:info@dolomed.ch
- list:
  - listitem: Standort Bern / Site de Berne
- list:
  - listitem: Sidlerstrasse 4, 3012 Bern-Berne 2. Stock / 2Ã¨me Ã©tages, 2502 Bern-Berne
- list:
  - listitem:
    - img
    - text: Telefonnummer
- list:
  - listitem:
    - link "+41 32 324 39 90":
      - /url: tel:+41%2032%20324%2039%2090
- list:
  - listitem:
    - img
    - text: E-Mail
- list:
  - listitem:
    - link "info@dolomed.ch":
      - /url: mailto:info@dolomed.ch
- contentinfo:
  - link "Image link":
    - /url: https://dolomed.ch/
    - img "Image link"
  - text: Seiten
  - link "Startseite":
    - /url: https://dolomed.ch/
  - link "Angebot":
    - /url: https://dolomed.ch///#angebot
  - link "FÃ¼r Patienten und Zuweiser":
    - /url: https://dolomed.ch//#patienten
  - link "Kontakt":
    - /url: https://dolomed.ch//#kontakt
  - link "Team":
    - /url: https://dolomed.ch/#team
  - link "Karriere":
    - /url: https://dolomed.ch//#karriere
  - text: Krankheiten
  - link "Bewegungsapparat":
    - /url: /bewegungsapparat/
  - link "Schmerzen Innerer organe":
    - /url: https://dolomed.ch/schmerzen-innerer-organe/
  - link "kopfschmerzen und gesichtsschmerzen":
    - /url: https://dolomed.ch/kopfschmerzen-und-gesichtsschmerzen/
  - link "gefaesserkrankungen":
    - /url: https://dolomed.ch/gefaesserkrankungen/
  - link "behandlung von nervenschmerzen":
    - /url: https://dolomed.ch/behandlung-von-nervenschmerzen/
  - text: Therapie
  - link "nervenstimulation":
    - /url: https://dolomed.ch/nervenstimulation/
  - link "natuerliche linderung durch akupunktur":
    - /url: https://dolomed.ch/natuerliche-linderung-durch-akupunktur/
  - link "chronischen schmerzen":
    - /url: https://dolomed.ch/chronischen-schmerzen/
  - link "behandlung von chronischen":
    - /url: https://dolomed.ch/behandlung-von-chronischen/
  - link "behandlung von rueckenschmerzen":
    - /url: https://dolomed.ch/behandlung-von-rueckenschmerzen/
  - link "plasma prp":
    - /url: https://dolomed.ch/plasma-prp/
  - link "stammzellentherapie":
    - /url: https://dolomed.ch/stammzellentherapie/
  - link "Lasertherapie":
    - /url: /lasertherapie/
  - link "Extrakorporale StoÃŸwellentherapie":
    - /url: /extrakorporale-stosswellentherapie/
  - link "Bewegungstherapie und Faszientraining":
    - /url: /bewegungstherapie-und-faszientraining/
  - link "Topische Therapie mit hochkonzentriertem Capsaicin":
    - /url: /topische-therapie-mit-hochkonzentriertem-capsaicin/
  - text: Rechtliches
  - link "Impressum":
    - /url: /impressum
  - link "Datenschutz":
    - /url: /datenschutz
  - paragraph: Folgen Sie uns
  - list:
    - listitem:
      - link:
        - /url: https://www.instagram.com/dolomed.ag
        - img
  - paragraph: Copyright 2025 â€“ Alle Rechte vorbehalten Dolomed.
- button
- button:
  - img
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- heading "Wir freuen uns immer mit Ihnen zu sprechen." [level=2]
- text: Unterhalten wir uns
- link "Phone +41 32 324 39 90":
  - /url: tel:+41323243990
  - img "Phone"
  - text: +41 32 324 39 90
- link "Email info@dolomed.ch":
  - /url: mailto:info@dolomed.ch
  - img "Email"
  - text: info@dolomed.ch
- text: Wir sind Mo-Fr von 8-18 Uhr kostenlos fÃ¼r Sie erreichbar.
- list:
  - listitem:
    - img "list icon"
    - heading "Termin vereinbaren" [level=3]
  - listitem:
    - link "list icon Kontaktseite Ã¶ffnen":
      - /url: https://dolomed.ch/#kontaktform
      - img "list icon"
      - heading "Kontaktseite Ã¶ffnen" [level=3]
- button:
  - img
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- text: Senden Sie eine Nachricht an Dolomed Bei Fragen oder Anliegen wenden Sie sich bitte an uns. Schnelle Antworten und Hilfe sind garantiert.
- list
- form "Kontaktformular":
  - paragraph:
    - text: Name
    - textbox "Name"
  - paragraph:
    - text: E-Mail-Adresse
    - textbox "E-Mail-Adresse"
  - paragraph:
    - text: Telefonnummer
    - textbox "Telefonnummer"
  - paragraph:
    - text: Schreiben Sie unten Ihre Nachricht
    - textbox "Schreiben Sie unten Ihre Nachricht"
  - paragraph:
    - button "Senden"
- button:
  - img
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- text: RÃ¼ckruf anfordern Bei Fragen oder Anliegen wenden Sie sich bitte an uns. Schnelle Antworten und Hilfe sind garantiert.
- list
- form "Kontaktformular":
  - paragraph:
    - text: Name
    - textbox "Name"
  - paragraph:
    - text: E-Mail-Adresse
    - textbox "E-Mail-Adresse"
  - paragraph:
    - text: Telefonnummer
    - textbox "Telefonnummer"
  - paragraph:
    - text: Schreiben Sie unten Ihre Nachricht
    - textbox "Schreiben Sie unten Ihre Nachricht"
  - paragraph:
    - button "Senden"
- link "Go to top":
  - /url: "#"
  - img
- text: mobile
```

# Test source

```ts
   1 | import { test, expect, Page, Browser } from '@playwright/test';
   2 | import { ImageComparison, DiffResult, SizeMismatchTolerance } from './image-diff';
   3 |
   4 | export interface VisualTestConfig {
   5 |   url: string;
   6 |   testName: string;
   7 |   diffThreshold?: number;
   8 |   viewport?: { width: number; height: number };
   9 |   waitForLoadState?: 'load' | 'domcontentloaded' | 'networkidle';
   10 |   customStyles?: string;
   11 |   scrollToBottom?: boolean;
   12 |   waitAfterScroll?: number;
   13 |   sizeMismatchTolerance?: SizeMismatchTolerance;
   14 | }
   15 |
   16 | export class VisualTestHelper {
   17 |   private imageComparison: ImageComparison;
   18 |   private page!: Page;
   19 |   private timestamp: string;
   20 |   private currentUser: string;
   21 |
   22 |   constructor() {
   23 |     this.imageComparison = new ImageComparison();
   24 |     this.timestamp = new Date().toISOString().replace('T', ' ').slice(0, 19);
   25 |     this.currentUser = process.env.USER || process.env.USERNAME || 'unknown';
   26 |   }
   27 |
   28 |   async setup(browser: Browser, viewport = { width: 1366, height: 768 }): Promise<void> {
   29 |     const context = await browser.newContext({ viewport });
   30 |     this.page = await context.newPage();
   31 |     console.log(`Test setup initialized at ${this.timestamp} by ${this.currentUser}`);
   32 |   }
   33 |
   34 |   async cleanup(): Promise<void> {
   35 |     if (this.page) {
   36 |       await this.page.close();
   37 |     }
   38 |   }
   39 |
   40 |   async runVisualTest(config: VisualTestConfig): Promise<DiffResult> {
   41 |     const {
   42 |       url,
   43 |       testName,
   44 |       diffThreshold = 0.1,
   45 |       waitForLoadState = 'networkidle',
   46 |       customStyles,
   47 |       scrollToBottom = true,
   48 |       waitAfterScroll = 1000,
   49 |       sizeMismatchTolerance
   50 |     } = config;
   51 |
   52 |     console.log(`Starting visual test at ${this.timestamp}`);
   53 |     console.log(`Test running by user: ${this.currentUser}`);
   54 |     console.log('Page dimensions:', await this.page.viewportSize());
   55 |
   56 |     try {
   57 |       // Navigate to the page
   58 |       await this.page.goto(url);
   59 |       await this.page.waitForLoadState(waitForLoadState);
   60 |
   61 |       // Apply custom styles if provided
   62 |       if (customStyles) {
   63 |         await this.page.addStyleTag({ content: customStyles });
   64 |       }
   65 |
   66 |       // Auto-scroll if enabled
   67 |       if (scrollToBottom) {
   68 |         await this.autoScroll(waitAfterScroll);
   69 |       }
   70 |
   71 |       // Perform image comparison
   72 |       const diffResult = await this.imageComparison.compareScreenshots(
   73 |         this.page, 
   74 |         testName, 
   75 |         diffThreshold, 
   76 |         sizeMismatchTolerance
   77 |       );
   78 |       const reportPath = this.imageComparison.generateDiffReport(testName, diffResult);
   79 |       
   80 |       console.log(`
   81 |         Test Results:
   82 |         - Timestamp: ${this.timestamp}
   83 |         - User: ${this.currentUser}
   84 |         - Report Path: ${reportPath}
   85 |         - Diff Percentage: ${diffResult.diffPercentage.toFixed(2)}%
   86 |       `);
   87 |
   88 |       // Assert the diff percentage
>  89 |       expect(diffResult.diffPercentage).toBeLessThanOrEqual(diffThreshold);
      |                                         ^ Error: expect(received).toBeLessThanOrEqual(expected)
   90 |
   91 |       return diffResult;
   92 |
   93 |     } catch (error) {
   94 |       console.error(`
   95 |         Test failed at ${this.timestamp}
   96 |         User: ${this.currentUser}
   97 |         Error: ${error}
   98 |       `);
   99 |       throw error;
  100 |     }
  101 |   }
  102 |
  103 |   private async autoScroll(waitAfterScroll: number = 1000): Promise<void> {
  104 |     await this.page.evaluate(async () => {
  105 |       await new Promise<void>((resolve) => {
  106 |         let totalHeight = 0;
  107 |         const distance = 100;
  108 |         const timer = setInterval(() => {
  109 |           const scrollHeight = document.documentElement.scrollHeight;
  110 |           window.scrollBy(0, distance);
  111 |           totalHeight += distance;
  112 |
  113 |           if (totalHeight >= scrollHeight) {
  114 |             clearInterval(timer);
  115 |             window.scrollTo(0, scrollHeight);
  116 |             resolve();
  117 |           }
  118 |         }, 240);
  119 |       });
  120 |     });
  121 |
  122 |     await this.page.waitForTimeout(waitAfterScroll);
  123 |   }
  124 |
  125 |   // Getter method for accessing the image comparison instance if needed
  126 |   get imageComparisonInstance(): ImageComparison {
  127 |     return this.imageComparison;
  128 |   }
  129 |
  130 |   // Getter method for accessing the page instance if needed
  131 |   getPage(): Page {
  132 |     return this.page;
  133 |   }
  134 | }
```