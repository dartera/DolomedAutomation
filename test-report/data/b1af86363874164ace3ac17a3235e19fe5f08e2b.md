# Test info

- Name: Visual Regression - Schmerzen Innerer Organe Page (Desktop) >> schmerzen-organe-visual-desktop-fr
- Location: /Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/tests/schmerzenInnererOrgane/SchmerzenInnererOrganePageUITest.spec.ts:34:9

# Error details

```
Error: expect(received).toBeLessThanOrEqual(expected)

Expected: <= 0.7
Received:    3.3151847456633847
    at VisualTestHelper.runVisualTest (/Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/utils/visual-test-helper.ts:89:41)
    at MultiLanguageVisualHelper.runIndividualLanguageTest (/Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/utils/multi-language-visual-helper.ts:56:5)
    at /Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/tests/schmerzenInnererOrgane/SchmerzenInnererOrganePageUITest.spec.ts:35:7
```

# Page snapshot

```yaml
- heading "🍪 Wir schätzen Ihre Privatsphäre" [level=1]
- paragraph: Wir verwenden Cookies, um Ihr Surferlebnis zu verbessern, personalisierte Anzeigen oder Inhalte einzusetzen und unseren Datenverkehr zu analysieren. Wenn Sie auf „Alle akzeptieren" klicken, stimmen Sie der Anwendung von Cookies zu.
- button "Anpassen"
- button "Alle akzeptieren"
- banner:
  - navigation:
    - link "DOLOMED_Logo_RGB_Claim 1":
      - /url: https://dolomed.ch/fr/
      - img "DOLOMED_Logo_RGB_Claim 1"
    - button "Open/Close Menu":
      - img
    - button "Français":
      - link "Français":
        - /url: "#"
        - img
        - text: Français
- heading "Douleurs d'organes internes" [level=1]:
  - text: Douleurs d'
  - strong: organes
  - text: internes
- 'heading "Approches thérapeutiques globales des douleurs d''organes internes : des options de traitement efficaces chez Dolomed" [level=2]'
- paragraph: Les douleurs d'organes internes peuvent être causées par une multitude de maladies et avoir un impact considérable sur la qualité de vie. Chez Dolomed, nous proposons un large éventail d'options thérapeutiques pour soulager ces douleurs et améliorer la qualité de vie de nos patients. Nos approches holistiques incluent des techniques de pointe telles que le TENS, les perfusions de kétamine, les infiltrations et l'acupuncture.
- link "Prendre rendez-vous":
  - /url: "#"
- link "Appeler maintenant":
  - /url: tel:032 324 39 90
- img "Dolomed-Schmerzen-Innerer-Organe-Herob-Illustrator-01"
- img "Dolomed-Bewegungsapparat-Arthrose-circle-light"
- img "Dolomed-Schmerzen-Innerer-Organe-zon-Illustrator-01"
- img "Dolomed-Bewegungsapparat-arthrose-circles-4"
- heading "Que sont les douleurs d'organes internes ?" [level=2]
- paragraph: Les douleurs des organes internes sont dues à des maladies ou à des dysfonctionnements des organes internes tels que le pancréas, l'utérus, le bassin ou le cœur. Ces douleurs peuvent être aiguës ou chroniques et nécessitent un diagnostic précis et un traitement personnalisé. En cas de douleur aiguë, il convient également de toujours vérifier s'il existe une maladie sous-jacente (inflammation, infarctus, hémorragie). C'est pourquoi le premier point de contact doit être votre médecin généraliste, qui peut vous adresser à nous à tout moment si nécessaire.
- heading "Pancréatite chronique" [level=2]
- paragraph: La pancréatite chronique est une inflammation à long terme du pancréas qui peut entraîner des douleurs abdominales sévères et des troubles digestifs. Ces douleurs peuvent être continues ou épisodiques et sont souvent difficiles à traiter.
- heading "Options thérapeutiques pour Dolomed :" [level=3]
- list:
  - listitem:
    - strong: "TENS :"
    - text: stimulation électrique pour soulager la douleur.
  - listitem:
    - strong: "Perfusion de kétamine :"
    - text: Traitement efficace de la douleur dans les cas réfractaires.
  - listitem:
    - strong: "Infiltration :"
    - text: un blocage du plexus cœliaque peut réduire considérablement les symptômes de la pancréatite chronique.
- img "Dolomed-Schmerzen-Innerer-Organe-Chronische-01"
- img "Dolomed-Schmerzen-Innerer-Organe-Endometriose-01"
- img "Dolomed-Bewegungsapparat-arthrose-circles-4"
- heading "Endométriose" [level=2]
- paragraph: L'endométriose est une maladie dans laquelle le tissu similaire à la muqueuse utérine se développe en dehors de l'utérus, ce qui peut entraîner de fortes douleurs abdominales. Ces douleurs surviennent souvent pendant les règles, mais peuvent également être chroniques.
- heading "Options thérapeutiques pour Dolomed :" [level=3]
- list:
  - listitem:
    - strong: "Les infiltrations :"
    - text: Injections pour un soulagement ciblé de la douleur.
  - listitem:
    - strong: "TENS :"
    - text: soulagement non invasif de la douleur par stimulation électrique.
  - listitem:
    - strong: "Acupuncture :"
    - text: réduction de la douleur et promotion du bien-être général.
- heading "Douleur pelvienne" [level=2]
- paragraph: La douleur pelvienne, ou douleur pelvienne, peut être causée par une variété de facteurs, y compris des problèmes gynécologiques, urologiques et musculo-squelettiques. Ces douleurs peuvent être chroniques et difficiles à diagnostiquer. Une approche thérapeutique multidisciplinaire et multimodale est nécessaire pour trouver le bon diagnostic et, finalement, le bon traitement.
- heading "Options thérapeutiques pour Dolomed :" [level=3]
- list:
  - listitem:
    - strong: "Perfusion de kétamine :"
    - text: Soulagement rapide et efficace de la douleur.
  - listitem:
    - strong: "Infiltrations :"
    - text: Injections ciblées pour réduire la douleur.
  - listitem:
    - strong: "Acupuncture :"
    - text: soulager les douleurs pelviennes et favoriser la guérison.
- img "Dolomed-Schmerzen-Innerer-Organe-Pelvic-Pain-Illustrator-01-1"
- img "Dolomed-Bewegungsapparat-Sportverletzungen-Illustration-02"
- img "Dolomed-Bewegungsapparat-Spastik-Illustration-03"
- img "Dolomed-Schmerzen-Innerer-Organe-Angina-Pectoris-Illustrator-01-1"
- heading "Angine de poitrine" [level=2]
- paragraph: L'angine de poitrine est un symptôme de la maladie coronarienne qui se caractérise par une douleur ou une pression dans la poitrine. Ces douleurs sont dues à une réduction de la circulation sanguine dans le cœur. Les douleurs aiguës doivent être considérées comme une urgence potentiellement mortelle. Dans ce cas, il est conseillé d'appeler le service d'ambulance. En cas d'angine de poitrine chronique, un traitement de la douleur peut être indiqué.
- heading "Options thérapeutiques pour Dolomed :" [level=3]
- list:
  - listitem:
    - strong: "TENS :"
    - text: aide au soulagement de la douleur en cas de douleurs cardiaques chroniques.
  - listitem:
    - strong: "Neuromodulation centrale :"
    - text: réduction de la sensation de douleur par l'implantation d'une électrode dans le canal rachidien.
  - listitem:
    - strong: "Acupuncture :"
    - text: amélioration de la circulation sanguine et réduction des douleurs cardiaques.
- heading "Comment continuer ?" [level=2]
- img "https://dolomed.ch/wp-content/uploads/2024/09/Dolomed-Bewegungsapparat-Wieweiter-Illustration-01.svg"
- img "Dolomed-Bewegungsapparat-Wieweiter-Illustration-02"
- text: Vous souffrez de douleurs dorsales ou d’autres douleurs musculo-squelettiques ? Prenez rendez-vous chez Dolomed dès aujourd’hui et demandez à nos experts de vous conseiller. Contactez-nous à l’adresse
- link "info@dolomed.ch":
  - /url: mailto:info@dolomed.ch
- text: pour en savoir plus sur nos options de traitement individuel. Veuillez noter qu’il est nécessaire de s’adresser à un médecin pour bénéficier d’un traitement.
- link "Prendre un rendez-vous":
  - /url: "#"
- heading "Foire aux questions (FAQ)" [level=2]
- button "Quelles sont les causes des douleurs des organes internes ?" [expanded]
- region "Quelles sont les causes des douleurs des organes internes ?":
  - paragraph: La douleur des organes internes peut être causée par une grande variété de maladies et de dysfonctionnements, notamment la pancréatite chronique, l’endométriose, la douleur pelvienne et l’angine de poitrine.
- button "Quelles sont les options thérapeutiques disponibles chez Dolomed ?"
- button "Comment le TENS agit-il sur les douleurs des organes internes ?"
- button "Qu'est-ce que la thérapie par perfusion de kétamine ?"
- button "Comment fonctionnent les infiltrations ?"
- button "L'acupuncture peut-elle aider à soulager les douleurs des organes internes ?"
- button "Comment prendre rendez-vous chez Dolomed ?"
- button "Quels sont les effets secondaires des thérapies mentionnées ?"
- heading "ZUWEISUNG / BON DE DÉLÉGATION" [level=2]
- paragraph: Centre de compétence pour la médecine de la douleur Centre de compétence pour la médecine de la douleur
- list:
  - listitem: Site Biel / Site Bienne
- list:
  - listitem: Bahnhofplatz 2C / Place de la Gare 2C 2ème étage / Stock, 2502 Biel-Bienne
- list:
  - listitem:
    - img
    - text: Numéro de téléphone
- list:
  - listitem:
    - link "+41 32 324 39 90":
      - /url: tel:+41%2032%20324%2039%2090
- list:
  - listitem:
    - img
    - text: E-mail
- list:
  - listitem:
    - link "info@dolomed.ch":
      - /url: mailto:info@dolomed.ch
- list:
  - listitem: Standort Bern / Site de Berne
- list:
  - listitem: Sidlerstrasse 4, 3012 Bern-Berne 2. Stock / 2ème étages, 2502 Bern-Berne
- list:
  - listitem:
    - img
    - text: Numéro de téléphone
- list:
  - listitem:
    - link "+41 32 324 39 90":
      - /url: tel:+41%2032%20324%2039%2090
- list:
  - listitem:
    - img
    - text: E-mail
- list:
  - listitem:
    - link "info@dolomed.ch":
      - /url: mailto:info@dolomed.ch
- contentinfo:
  - link "Image link":
    - /url: https://dolomed.ch/
    - img "Image link"
  - paragraph: Suivez nous
  - list:
    - listitem:
      - link:
        - /url: https://www.instagram.com/dolomed.ag
        - img
  - text: Pages
  - link "Accueil":
    - /url: https://dolomed.ch/fr/
  - link "Offre":
    - /url: https://dolomed.ch/fr/#angebot
  - link "Pour les patients et les délégations":
    - /url: https://dolomed.ch/fr/#patienten
  - link "Contact":
    - /url: https://dolomed.ch/fr/#kontakt
  - link "TEAM":
    - /url: https://dolomed.ch/fr/#team
  - link "Carrière":
    - /url: https://dolomed.ch/fr/#karriere
  - text: Maladies
  - link "Appareil locomoteur":
    - /url: /fr/appareil-locomoteur/
  - link "Douleurs d'organes internes":
    - /url: /fr/douleurs-dorganes-internes/
  - link "Maux de tête et douleurs faciales":
    - /url: /fr/maux-de-tete-et-douleurs-faciales/
  - link "Maladies vasculaires":
    - /url: /fr/maladies-vasculaires/
  - link "Traitement des douleurs nerveuses":
    - /url: /fr/traitement-des-douleurs-nerveuses/
  - text: Thérapie
  - link "Stimulation nerveuse":
    - /url: /fr/stimulation-nerveuse/
  - link "Un soulagement naturel grâce à l'acupuncture":
    - /url: fr/soulagement-naturel-par-lacupuncture/
  - link "douleurs chroniques":
    - /url: /fr/douleurs-chroniques/
  - link "Traitement de la douleur chronique":
    - /url: /fr/traitement-des-maladies-chroniques/
  - link "Traitement du mal de dos":
    - /url: /fr/traitement-du-mal-de-dos/
  - link "Plasma (PRP) pour un traitement efficace":
    - /url: /fr/plasma-prp/
  - link "Thérapie par cellules souches":
    - /url: /fr/therapie-par-cellules-souches/
  - link "Thérapie au laser":
    - /url: /fr/therapie-au-laser/
  - link "Thérapie extracorporelle par ondes de choc":
    - /url: /fr/therapie-extracorporelle-par-ondes-de-choc/
  - link "Thérapie par le mouvement et entraînement des fascias":
    - /url: /fr/therapie-par-le-mouvement-et-entrainement-des-fascias/
  - link "Thérapie topique à base de capsaïcine hautement concentrée":
    - /url: /fr/therapie-topique-a-base-de-capsaicine-hautement-concentree/
  - text: Mentions légales
  - link "Mentions légales":
    - /url: /fr/mentions-legales/
  - link "Protection des données":
    - /url: /fr/protection-des-donnees/
  - paragraph: Copyright 2025 – Tous droits réservés Dolomed.
- button
- button "retour":
  - img
  - text: retour
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- heading "Nous aimons toujours discuter avec toi" [level=2]
- text: Parlons
- link "Phone +41 32 324 39 90":
  - /url: tel:+41323243990
  - img "Phone"
  - text: +41 32 324 39 90
- link "Email info@dolomed.ch":
  - /url: mailto:info@dolomed.ch
  - img "Email"
  - text: info@dolomed.ch
- list:
  - listitem:
    - img "list icon"
    - heading "Prendre rendez-vous" [level=3]
  - listitem:
    - link "list icon Support technique":
      - /url: https://dolomed.ch/fr/#kontaktform
      - img "list icon"
      - heading "Support technique" [level=3]
- button "retour":
  - img
  - text: retour
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- text: Envoyer un message à Dolomed Si vous avez des questions ou des préoccupations, veuillez nous contacter. Des réponses rapides et une aide sont garanties.
- list
- form "Formulaire de contact":
  - paragraph:
    - text: Nom
    - textbox "Nom"
  - paragraph:
    - text: Adresse électronique
    - textbox "Adresse électronique"
  - paragraph:
    - text: Numéro de téléphone
    - textbox "Numéro de téléphone"
  - paragraph:
    - text: Écrivez votre message ci-dessous
    - textbox "Écrivez votre message ci-dessous"
  - paragraph:
    - button "Envoyer"
- button "retour":
  - img
  - text: retour
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- text: Demander à être rappelé Si vous avez des questions ou des préoccupations, veuillez nous contacter. Des réponses rapides et une aide sont garanties.
- list
- form "Formulaire de contact":
  - paragraph:
    - text: Nom
    - textbox "Nom"
  - paragraph:
    - text: Adresse électronique
    - textbox "Adresse électronique"
  - paragraph:
    - text: Numéro de téléphone
    - textbox "Numéro de téléphone"
  - paragraph:
    - text: Écrivez votre message ci-dessous
    - textbox "Écrivez votre message ci-dessous"
  - paragraph:
    - button "Envoyer"
- link "Go to top":
  - /url: "#"
  - img
- text: tablet
```

# Test source

```ts
   1 | import { test, expect, Page, Browser } from '@playwright/test';
   2 | import { ImageComparison, DiffResult, SizeMismatchTolerance } from './image-diff';
   3 |
   4 | export interface VisualTestConfig {
   5 |   url: string;
   6 |   testName: string;
   7 |   diffThreshold?: number;
   8 |   viewport?: { width: number; height: number };
   9 |   waitForLoadState?: 'load' | 'domcontentloaded' | 'networkidle';
   10 |   customStyles?: string;
   11 |   scrollToBottom?: boolean;
   12 |   waitAfterScroll?: number;
   13 |   sizeMismatchTolerance?: SizeMismatchTolerance;
   14 | }
   15 |
   16 | export class VisualTestHelper {
   17 |   private imageComparison: ImageComparison;
   18 |   private page!: Page;
   19 |   private timestamp: string;
   20 |   private currentUser: string;
   21 |
   22 |   constructor() {
   23 |     this.imageComparison = new ImageComparison();
   24 |     this.timestamp = new Date().toISOString().replace('T', ' ').slice(0, 19);
   25 |     this.currentUser = process.env.USER || process.env.USERNAME || 'unknown';
   26 |   }
   27 |
   28 |   async setup(browser: Browser, viewport = { width: 1366, height: 768 }): Promise<void> {
   29 |     const context = await browser.newContext({ viewport });
   30 |     this.page = await context.newPage();
   31 |     console.log(`Test setup initialized at ${this.timestamp} by ${this.currentUser}`);
   32 |   }
   33 |
   34 |   async cleanup(): Promise<void> {
   35 |     if (this.page) {
   36 |       await this.page.close();
   37 |     }
   38 |   }
   39 |
   40 |   async runVisualTest(config: VisualTestConfig): Promise<DiffResult> {
   41 |     const {
   42 |       url,
   43 |       testName,
   44 |       diffThreshold = 0.1,
   45 |       waitForLoadState = 'networkidle',
   46 |       customStyles,
   47 |       scrollToBottom = true,
   48 |       waitAfterScroll = 1000,
   49 |       sizeMismatchTolerance
   50 |     } = config;
   51 |
   52 |     console.log(`Starting visual test at ${this.timestamp}`);
   53 |     console.log(`Test running by user: ${this.currentUser}`);
   54 |     console.log('Page dimensions:', await this.page.viewportSize());
   55 |
   56 |     try {
   57 |       // Navigate to the page
   58 |       await this.page.goto(url);
   59 |       await this.page.waitForLoadState(waitForLoadState);
   60 |
   61 |       // Apply custom styles if provided
   62 |       if (customStyles) {
   63 |         await this.page.addStyleTag({ content: customStyles });
   64 |       }
   65 |
   66 |       // Auto-scroll if enabled
   67 |       if (scrollToBottom) {
   68 |         await this.autoScroll(waitAfterScroll);
   69 |       }
   70 |
   71 |       // Perform image comparison
   72 |       const diffResult = await this.imageComparison.compareScreenshots(
   73 |         this.page, 
   74 |         testName, 
   75 |         diffThreshold, 
   76 |         sizeMismatchTolerance
   77 |       );
   78 |       const reportPath = this.imageComparison.generateDiffReport(testName, diffResult);
   79 |       
   80 |       console.log(`
   81 |         Test Results:
   82 |         - Timestamp: ${this.timestamp}
   83 |         - User: ${this.currentUser}
   84 |         - Report Path: ${reportPath}
   85 |         - Diff Percentage: ${diffResult.diffPercentage.toFixed(2)}%
   86 |       `);
   87 |
   88 |       // Assert the diff percentage
>  89 |       expect(diffResult.diffPercentage).toBeLessThanOrEqual(diffThreshold);
      |                                         ^ Error: expect(received).toBeLessThanOrEqual(expected)
   90 |
   91 |       return diffResult;
   92 |
   93 |     } catch (error) {
   94 |       console.error(`
   95 |         Test failed at ${this.timestamp}
   96 |         User: ${this.currentUser}
   97 |         Error: ${error}
   98 |       `);
   99 |       throw error;
  100 |     }
  101 |   }
  102 |
  103 |   private async autoScroll(waitAfterScroll: number = 1000): Promise<void> {
  104 |     await this.page.evaluate(async () => {
  105 |       await new Promise<void>((resolve) => {
  106 |         let totalHeight = 0;
  107 |         const distance = 100;
  108 |         const timer = setInterval(() => {
  109 |           const scrollHeight = document.documentElement.scrollHeight;
  110 |           window.scrollBy(0, distance);
  111 |           totalHeight += distance;
  112 |
  113 |           if (totalHeight >= scrollHeight) {
  114 |             clearInterval(timer);
  115 |             window.scrollTo(0, scrollHeight);
  116 |             resolve();
  117 |           }
  118 |         }, 240);
  119 |       });
  120 |     });
  121 |
  122 |     await this.page.waitForTimeout(waitAfterScroll);
  123 |   }
  124 |
  125 |   // Getter method for accessing the image comparison instance if needed
  126 |   get imageComparisonInstance(): ImageComparison {
  127 |     return this.imageComparison;
  128 |   }
  129 |
  130 |   // Getter method for accessing the page instance if needed
  131 |   getPage(): Page {
  132 |     return this.page;
  133 |   }
  134 | }
```