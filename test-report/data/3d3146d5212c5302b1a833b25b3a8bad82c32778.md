# Test info

- Name: Visual Regression - Akupunktur Page (Mobile) >> akupunktur-visual-mobile-fr
- Location: /Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/tests/akupunktur/AkupunkturPageUITest.spec.ts:64:9

# Error details

```
Error: expect(received).toBeLessThanOrEqual(expected)

Expected: <= 0.7
Received:    6.997859378337466
    at VisualTestHelper.runVisualTest (/Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/utils/visual-test-helper.ts:89:41)
    at MultiLanguageVisualHelper.runIndividualLanguageTest (/Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/utils/multi-language-visual-helper.ts:56:5)
    at /Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/tests/akupunktur/AkupunkturPageUITest.spec.ts:65:7
```

# Page snapshot

```yaml
- heading "🍪 Wir schätzen Ihre Privatsphäre" [level=1]
- paragraph: Wir verwenden Cookies, um Ihr Surferlebnis zu verbessern, personalisierte Anzeigen oder Inhalte einzusetzen und unseren Datenverkehr zu analysieren. Wenn Sie auf „Alle akzeptieren" klicken, stimmen Sie der Anwendung von Cookies zu.
- button "Anpassen"
- button "Alle akzeptieren"
- banner:
  - navigation:
    - link "DOLOMED_Logo_RGB_Claim 1":
      - /url: https://dolomed.ch/fr/
      - img "DOLOMED_Logo_RGB_Claim 1"
    - button "Open/Close Menu":
      - img
    - button "Français":
      - link "Français":
        - /url: "#"
        - img
        - text: Français
- 'heading "Soulagement naturel par l''acupuncture : une méthode éprouvée de la médecine traditionnelle chinoise" [level=1]':
  - text: "Soulagement naturel par l'acupuncture : une méthode éprouvée de la"
  - strong: médecine
  - strong: traditionnelle
  - text: chinoise
- paragraph: L'acupuncture est une pratique millénaire de la médecine traditionnelle chinoise qui consiste à piquer de fines aiguilles en des points spécifiques du corps pour agir sur l'énergie vitale (Qi). Lorsque le flux de cette énergie est perturbé, le piquage ciblé de ces points permet de lever les blocages et de rétablir l'équilibre. L'acupuncture a été pratiquée longtemps et de manière extensive. L'acupuncture a permis de traiter efficacement les maux de tête, les douleurs abdominales, les douleurs musculo-squelettiques et les états d'agitation.
- paragraph: Chez Dolomed, nous proposons l'acupuncture dans le cadre de nos concepts thérapeutiques globaux afin de soulager la douleur et d'améliorer la qualité de vie de nos patients.
- link "Prendre rendez-vous":
  - /url: "#"
- link "Appeler maintenant":
  - /url: tel:032 324 39 90
- img "Dolomed-Behandlung-Von-Nervenschmerzen-Hero-Illustrator-01"
- img "Dolomed-Bewegungsapparat-Arthrose-circle-light"
- img "Dolomed-Natuerliche-linderung-durch-Akupunktur-was-Illustrator-01"
- heading "Qu'est-ce que l'acupuncture ?" [level=2]
- paragraph: L'acupuncture est une forme de thérapie qui consiste à insérer de fines aiguilles dans des points spécifiques du corps. Ces points sont situés le long des méridiens par lesquels l'énergie vitale circule selon l'enseignement de la médecine traditionnelle chinoise. La stimulation de ces points vise à éliminer les blocages et à rétablir l'équilibre énergétique.
- paragraph: Contrairement à la médecine occidentale, la médecine traditionnelle chinoise dresse une image plus fonctionnelle du corps humain, plutôt qu'une image anatomique. Une combinaison des deux points de vue nous aide à voir une image globale de l'être humain.
- heading "L'acupuncture pour les maux de tête et les migraines" [level=2]
- paragraph: L'acupuncture s'est révélée efficace dans le traitement des maux de tête, y compris les migraines et les céphalées chroniques, y compris les céphalées de tension. De nombreuses études ont montré que l'acupuncture peut réduire la fréquence et l'intensité des maux de tête.
- heading "Avantages de l'acupuncture pour les maux de tête :" [level=3]
- list:
  - listitem: Réduction de la fréquence et de l'intensité des maux de tête
  - listitem: Soulagement des migraines et des céphalées de tension
  - listitem: Amélioration de la qualité de vie grâce au soulagement naturel de la douleur
- img "Dolomed-Natuerliche-linderung-durch-Akupunktur-Akupunktur-Illustrator-01"
- img "Dolomed-Natuerliche-linderung-durch-Akupunktur-wasIllustrator-01"
- img "Dolomed-Bewegungsapparat-arthrose-circles-4"
- heading "L'acupuncture pour les douleurs menstruelles" [level=2]
- paragraph: Le cycle féminin et les changements hormonaux qui l'accompagnent peuvent parfois provoquer des symptômes importants tels que des maux de tête, des douleurs abdominales et des nausées. L'acupuncture peut alors être une méthode douce pour soulager les symptômes de nos patientes.
- heading "Avantages de l'utilisation de l'acupuncture pour réduire les symptômes des règles :" [level=3]
- list:
  - listitem: Prophylaxie (prévention) des symptômes négatifs
  - listitem: Soulagement de la douleur pendant une période prolongée sans médicaments
  - listitem: Amélioration de la qualité de vie grâce au soulagement naturel de la douleur
- heading "Autres applications de l'acupuncture" [level=2]
- paragraph: En plus du traitement des maux de tête, des migraines et des règles douloureuses, le traitement de l'hypertension artérielle est également utilisé.
- heading "L'acupuncture est également utilisée avec succès pour traiter d'autres troubles :" [level=3]
- list:
  - listitem:
    - strong: "Acupuncture pour les acouphènes :"
    - text: soulagement des bruits d'oreille et amélioration du bien-être.
  - listitem:
    - strong: "Acupuncture pour les vertiges :"
    - text: réduction des vertiges et des troubles de l'équilibre.
  - listitem:
    - strong: "Acupuncture pour les nausées :"
    - text: traitement efficace des nausées et des vomissements, notamment pendant la grossesse ou la chimiothérapie.
  - listitem:
    - strong: "Acupuncture pour les douleurs :"
    - text: l'acupuncture peut être utilisée dans de nombreux cas pour la prévention et le traitement des douleurs musculo-squelettiques, mais aussi des douleurs des organes internes.
- img "Dolomed-Natuerliche-linderung-durch-Akupunktur-Weitere-Illustrator-01"
- img "Dolomed-Bewegungsapparat-Spastik-Illustration-02"
- img "Dolomed-Natuerliche-linderung-durch-Akupunktur-Wie-Illustrator-01-1"
- heading "Comment fonctionne l'acupuncture ?" [level=2]
- paragraph: Le traitement par acupuncture stimule le système nerveux et favorise la libération d'endorphines, les analgésiques naturels de l'organisme. Il améliore également la circulation sanguine et favorise la relaxation musculaire, ce qui contribue à soulager la douleur. Il en résulte un effet positif sur les troubles du corps et du psychisme avec une amélioration de l'état de santé général.
- heading "Le déroulement d'une séance d'acupuncture" [level=2]
- paragraph: Tout d'abord, les aiguilles d'acupuncture sont placées sur des points d'acupuncture spécifiques. S'ensuit une période de repos avec les aiguilles couchées pendant environ 20 à 30 minutes. Pendant ce temps, vous devez vous détendre ou dormir. Les aiguilles sont ensuite retirées.
- paragraph: La fréquence des séances, une fois par semaine ou plus, est déterminée individuellement par votre médecin traitant.
- img "Dolomed-Natuerliche-linderung-durch-Akupunktur-Der-Illustrator-01-1"
- img "Dolomed-Natuerliche-linderung-durch-Akupunktur-Kosten-Illustrator-01-1"
- heading "Coûts et assurance maladie" [level=2]
- paragraph: En principe, un traitement d'acupuncture est remboursable en Suisse, ce qui signifie que l'assurance de base prend en charge les coûts du traitement. La prise en charge des coûts est toutefois soumise à certaines conditions. La personne traitante doit être un médecin ayant suivi une formation complémentaire. En revanche, les traitements effectués par des personnes ayant une autre formation non médicale, comme les naturopathes ou les thérapeutes en MTC, ne sont en principe pas remboursés et sont à nouveau liés à une assurance complémentaire.
- paragraph: Chez Dolomed, l'acupuncture est exclusivement pratiquée par des médecins ayant suivi une formation complémentaire.
- heading "Comment continuer ?" [level=2]
- text: Vous souffrez de douleurs dorsales ou d’hernies discales ? Découvrez les avantages des infiltrations chez Dolomed. Nos médecins expérimentés se feront un plaisir de vous conseiller sur les différentes options thérapeutiques et d’établir un plan de traitement personnalisé pour vous. Contactez-nous dès aujourd’hui à l’adresse
- link "info@dolomed.ch":
  - /url: mailto:info@dolomed.ch
- text: pour prendre rendez-vous et en savoir plus sur nos options de traitement.
- link "Prendre un rendez-vous":
  - /url: "#"
- heading "Foire aux questions (FAQ)" [level=2]
- button "Quel est l'effet d'une aiguille d'acupuncture sur la tête ?" [expanded]
- region "Quel est l'effet d'une aiguille d'acupuncture sur la tête ?":
  - paragraph: Une aiguille d’acupuncture placée dans la tête stimule des points d’acupuncture spécifiques qui favorisent la libération d’endorphines et améliorent la circulation sanguine, ce qui peut contribuer à soulager les maux de tête.
- button "Le traitement par acupuncture peut-il provoquer des maux de tête ?"
- button "Quand l'acupuncture ne doit-elle pas être utilisée ?"
- button "Combien de temps faut-il pour que l'acupuncture fasse effet ?"
- button "Où se trouve le point d'acupuncture pour les maux de tête ?"
- button "En combien de temps l'acupuncture est-elle efficace contre les migraines ? Est-elle également utile en prévention ?"
- button "Quels sont les avantages de l'acupuncture par rapport aux autres thérapies ?"
- button "Quelle est la différence entre l'acupuncture et l'acupuncture fictive ?"
- button "Proposez-vous également d'autres traitements de MTC, comme le massage Tuina ?"
- heading "ZUWEISUNG / BON DE DÉLÉGATION" [level=2]
- paragraph: Centre de compétence pour la médecine de la douleur Centre de compétence pour la médecine de la douleur
- list:
  - listitem: Site Biel / Site Bienne
- list:
  - listitem: Bahnhofplatz 2C / Place de la Gare 2C 2ème étage / Stock, 2502 Biel-Bienne
- list:
  - listitem:
    - img
    - text: Numéro de téléphone
- list:
  - listitem:
    - link "+41 32 324 39 90":
      - /url: tel:+41%2032%20324%2039%2090
- list:
  - listitem:
    - img
    - text: E-mail
- list:
  - listitem:
    - link "info@dolomed.ch":
      - /url: mailto:info@dolomed.ch
- list:
  - listitem: Standort Bern / Site de Berne
- list:
  - listitem: Sidlerstrasse 4, 3012 Bern-Berne 2. Stock / 2ème étages, 2502 Bern-Berne
- list:
  - listitem:
    - img
    - text: Numéro de téléphone
- list:
  - listitem:
    - link "+41 32 324 39 90":
      - /url: tel:+41%2032%20324%2039%2090
- list:
  - listitem:
    - img
    - text: E-mail
- list:
  - listitem:
    - link "info@dolomed.ch":
      - /url: mailto:info@dolomed.ch
- contentinfo:
  - link "Image link":
    - /url: https://dolomed.ch/
    - img "Image link"
  - text: Pages
  - link "Accueil":
    - /url: https://dolomed.ch/fr/
  - link "Offre":
    - /url: https://dolomed.ch/fr/#angebot
  - link "Pour les patients et les délégations":
    - /url: https://dolomed.ch/fr/#patienten
  - link "Contact":
    - /url: https://dolomed.ch/fr/#kontakt
  - link "TEAM":
    - /url: https://dolomed.ch/fr/#team
  - link "Carrière":
    - /url: https://dolomed.ch/fr/#karriere
  - text: Maladies
  - link "Appareil locomoteur":
    - /url: /fr/appareil-locomoteur/
  - link "Douleurs d'organes internes":
    - /url: /fr/douleurs-dorganes-internes/
  - link "Maux de tête et douleurs faciales":
    - /url: /fr/maux-de-tete-et-douleurs-faciales/
  - link "Maladies vasculaires":
    - /url: /fr/maladies-vasculaires/
  - link "Traitement des douleurs nerveuses":
    - /url: /fr/traitement-des-douleurs-nerveuses/
  - text: Thérapie
  - link "Stimulation nerveuse":
    - /url: /fr/stimulation-nerveuse/
  - link "Un soulagement naturel grâce à l'acupuncture":
    - /url: fr/soulagement-naturel-par-lacupuncture/
  - link "douleurs chroniques":
    - /url: /fr/douleurs-chroniques/
  - link "Traitement de la douleur chronique":
    - /url: /fr/traitement-des-maladies-chroniques/
  - link "Traitement du mal de dos":
    - /url: /fr/traitement-du-mal-de-dos/
  - link "Plasma (PRP) pour un traitement efficace":
    - /url: /fr/plasma-prp/
  - link "Thérapie par cellules souches":
    - /url: /fr/therapie-par-cellules-souches/
  - link "Thérapie au laser":
    - /url: /fr/therapie-au-laser/
  - link "Thérapie extracorporelle par ondes de choc":
    - /url: /fr/therapie-extracorporelle-par-ondes-de-choc/
  - link "Thérapie par le mouvement et entraînement des fascias":
    - /url: /fr/therapie-par-le-mouvement-et-entrainement-des-fascias/
  - link "Thérapie topique à base de capsaïcine hautement concentrée":
    - /url: /fr/therapie-topique-a-base-de-capsaicine-hautement-concentree/
  - text: Mentions légales
  - link "Mentions légales":
    - /url: /fr/mentions-legales/
  - link "Protection des données":
    - /url: /fr/protection-des-donnees/
  - text: Suivez nous
  - list:
    - listitem:
      - link:
        - /url: https://www.instagram.com/dolomed.ag
        - img
  - paragraph: Copyright 2025 – Tous droits réservés Dolomed.
- button
- button "retour":
  - img
  - text: retour
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- heading "Nous aimons toujours discuter avec toi" [level=2]
- text: Parlons
- link "Phone +41 32 324 39 90":
  - /url: tel:+41323243990
  - img "Phone"
  - text: +41 32 324 39 90
- link "Email info@dolomed.ch":
  - /url: mailto:info@dolomed.ch
  - img "Email"
  - text: info@dolomed.ch
- list:
  - listitem:
    - img "list icon"
    - heading "Prendre rendez-vous" [level=3]
  - listitem:
    - link "list icon Support technique":
      - /url: https://dolomed.ch/fr/#kontaktform
      - img "list icon"
      - heading "Support technique" [level=3]
- button "retour":
  - img
  - text: retour
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- text: Envoyer un message à Dolomed Si vous avez des questions ou des préoccupations, veuillez nous contacter. Des réponses rapides et une aide sont garanties.
- list
- form "Formulaire de contact":
  - paragraph:
    - text: Nom
    - textbox "Nom"
  - paragraph:
    - text: Adresse électronique
    - textbox "Adresse électronique"
  - paragraph:
    - text: Numéro de téléphone
    - textbox "Numéro de téléphone"
  - paragraph:
    - text: Écrivez votre message ci-dessous
    - textbox "Écrivez votre message ci-dessous"
  - paragraph:
    - button "Envoyer"
- button "retour":
  - img
  - text: retour
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- text: Demander à être rappelé Si vous avez des questions ou des préoccupations, veuillez nous contacter. Des réponses rapides et une aide sont garanties.
- list
- form "Formulaire de contact":
  - paragraph:
    - text: Nom
    - textbox "Nom"
  - paragraph:
    - text: Adresse électronique
    - textbox "Adresse électronique"
  - paragraph:
    - text: Numéro de téléphone
    - textbox "Numéro de téléphone"
  - paragraph:
    - text: Écrivez votre message ci-dessous
    - textbox "Écrivez votre message ci-dessous"
  - paragraph:
    - button "Envoyer"
- link "Go to top":
  - /url: "#"
  - img
- text: mobile
```

# Test source

```ts
   1 | import { test, expect, Page, Browser } from '@playwright/test';
   2 | import { ImageComparison, DiffResult, SizeMismatchTolerance } from './image-diff';
   3 |
   4 | export interface VisualTestConfig {
   5 |   url: string;
   6 |   testName: string;
   7 |   diffThreshold?: number;
   8 |   viewport?: { width: number; height: number };
   9 |   waitForLoadState?: 'load' | 'domcontentloaded' | 'networkidle';
   10 |   customStyles?: string;
   11 |   scrollToBottom?: boolean;
   12 |   waitAfterScroll?: number;
   13 |   sizeMismatchTolerance?: SizeMismatchTolerance;
   14 | }
   15 |
   16 | export class VisualTestHelper {
   17 |   private imageComparison: ImageComparison;
   18 |   private page!: Page;
   19 |   private timestamp: string;
   20 |   private currentUser: string;
   21 |
   22 |   constructor() {
   23 |     this.imageComparison = new ImageComparison();
   24 |     this.timestamp = new Date().toISOString().replace('T', ' ').slice(0, 19);
   25 |     this.currentUser = process.env.USER || process.env.USERNAME || 'unknown';
   26 |   }
   27 |
   28 |   async setup(browser: Browser, viewport = { width: 1366, height: 768 }): Promise<void> {
   29 |     const context = await browser.newContext({ viewport });
   30 |     this.page = await context.newPage();
   31 |     console.log(`Test setup initialized at ${this.timestamp} by ${this.currentUser}`);
   32 |   }
   33 |
   34 |   async cleanup(): Promise<void> {
   35 |     if (this.page) {
   36 |       await this.page.close();
   37 |     }
   38 |   }
   39 |
   40 |   async runVisualTest(config: VisualTestConfig): Promise<DiffResult> {
   41 |     const {
   42 |       url,
   43 |       testName,
   44 |       diffThreshold = 0.1,
   45 |       waitForLoadState = 'networkidle',
   46 |       customStyles,
   47 |       scrollToBottom = true,
   48 |       waitAfterScroll = 1000,
   49 |       sizeMismatchTolerance
   50 |     } = config;
   51 |
   52 |     console.log(`Starting visual test at ${this.timestamp}`);
   53 |     console.log(`Test running by user: ${this.currentUser}`);
   54 |     console.log('Page dimensions:', await this.page.viewportSize());
   55 |
   56 |     try {
   57 |       // Navigate to the page
   58 |       await this.page.goto(url);
   59 |       await this.page.waitForLoadState(waitForLoadState);
   60 |
   61 |       // Apply custom styles if provided
   62 |       if (customStyles) {
   63 |         await this.page.addStyleTag({ content: customStyles });
   64 |       }
   65 |
   66 |       // Auto-scroll if enabled
   67 |       if (scrollToBottom) {
   68 |         await this.autoScroll(waitAfterScroll);
   69 |       }
   70 |
   71 |       // Perform image comparison
   72 |       const diffResult = await this.imageComparison.compareScreenshots(
   73 |         this.page, 
   74 |         testName, 
   75 |         diffThreshold, 
   76 |         sizeMismatchTolerance
   77 |       );
   78 |       const reportPath = this.imageComparison.generateDiffReport(testName, diffResult);
   79 |       
   80 |       console.log(`
   81 |         Test Results:
   82 |         - Timestamp: ${this.timestamp}
   83 |         - User: ${this.currentUser}
   84 |         - Report Path: ${reportPath}
   85 |         - Diff Percentage: ${diffResult.diffPercentage.toFixed(2)}%
   86 |       `);
   87 |
   88 |       // Assert the diff percentage
>  89 |       expect(diffResult.diffPercentage).toBeLessThanOrEqual(diffThreshold);
      |                                         ^ Error: expect(received).toBeLessThanOrEqual(expected)
   90 |
   91 |       return diffResult;
   92 |
   93 |     } catch (error) {
   94 |       console.error(`
   95 |         Test failed at ${this.timestamp}
   96 |         User: ${this.currentUser}
   97 |         Error: ${error}
   98 |       `);
   99 |       throw error;
  100 |     }
  101 |   }
  102 |
  103 |   private async autoScroll(waitAfterScroll: number = 1000): Promise<void> {
  104 |     await this.page.evaluate(async () => {
  105 |       await new Promise<void>((resolve) => {
  106 |         let totalHeight = 0;
  107 |         const distance = 100;
  108 |         const timer = setInterval(() => {
  109 |           const scrollHeight = document.documentElement.scrollHeight;
  110 |           window.scrollBy(0, distance);
  111 |           totalHeight += distance;
  112 |
  113 |           if (totalHeight >= scrollHeight) {
  114 |             clearInterval(timer);
  115 |             window.scrollTo(0, scrollHeight);
  116 |             resolve();
  117 |           }
  118 |         }, 240);
  119 |       });
  120 |     });
  121 |
  122 |     await this.page.waitForTimeout(waitAfterScroll);
  123 |   }
  124 |
  125 |   // Getter method for accessing the image comparison instance if needed
  126 |   get imageComparisonInstance(): ImageComparison {
  127 |     return this.imageComparison;
  128 |   }
  129 |
  130 |   // Getter method for accessing the page instance if needed
  131 |   getPage(): Page {
  132 |     return this.page;
  133 |   }
  134 | }
```