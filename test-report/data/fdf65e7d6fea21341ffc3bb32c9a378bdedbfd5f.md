# Test info

- Name: Visual Regression - Extrakorporale Stoßwellentherapie Page (Mobile) >> stosswellentherapie-visual-mobile-de
- Location: /Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/tests/ExtrakorporaleStosswellentherapie/ExtrakorporaleStosswellentherapieUITest.spec.ts:64:9

# Error details

```
Error: expect(received).toBeLessThanOrEqual(expected)

Expected: <= 0.7
Received:    7.144948796636654
    at VisualTestHelper.runVisualTest (/Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/utils/visual-test-helper.ts:89:41)
    at MultiLanguageVisualHelper.runIndividualLanguageTest (/Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/utils/multi-language-visual-helper.ts:56:5)
    at /Users/b.enukidze/Documents/Dartera/Test/DolomedAutomation/src/tests/ExtrakorporaleStosswellentherapie/ExtrakorporaleStosswellentherapieUITest.spec.ts:65:7
```

# Page snapshot

```yaml
- heading "🍪 Wir schätzen Ihre Privatsphäre" [level=1]
- paragraph: Wir verwenden Cookies, um Ihr Surferlebnis zu verbessern, personalisierte Anzeigen oder Inhalte einzusetzen und unseren Datenverkehr zu analysieren. Wenn Sie auf „Alle akzeptieren" klicken, stimmen Sie der Anwendung von Cookies zu.
- button "Anpassen"
- button "Alle akzeptieren"
- banner:
  - navigation:
    - link "DOLOMED_Logo_RGB_Claim 1":
      - /url: /
      - img "DOLOMED_Logo_RGB_Claim 1"
    - button "Open/Close Menu":
      - img
    - button "Deutsch":
      - link "Deutsch":
        - /url: "#"
        - img
        - text: Deutsch
- heading "Effektive Behandlung muskuloskelettaler Beschwerden mit moderner Stoßwellentherapie bei Dolomed" [level=1]:
  - text: Effektive Behandlung muskuloskelettaler Beschwerden mit moderner
  - strong: Stoßwellentherapie bei Dolomed
- paragraph: Die extrakorporale Stoßwellentherapie (ESWT) ist eine innovative, nicht-invasive Methode zur Behandlung von muskuloskelettalen Problemen. Mit gezielten Stoßwellen werden Heilungsprozesse angeregt, Schmerzen gelindert und die Funktionalität von Muskeln, Sehnen und Bändern verbessert. Bei Dolomed setzen wir modernste Stoßwellentechnologie ein, um unseren Patienten eine schonende und effektive Therapie zu bieten.
- link "Termin vereinbaren":
  - /url: "#"
- link "Jetzt anrufen":
  - /url: tel:032 324 39 90
- img "Dolomed-Bewegungsapparat-Arthrose-circle-light"
- heading "Was ist die extrakorporale Stoßwellentherapie?" [level=2]
- paragraph: Die Stoßwellentherapie verwendet hochenergetische Schallwellen, die gezielt auf schmerzende oder verletzte Körperbereiche appliziert werden. Diese Wellen stimulieren die Durchblutung, fördern die Regeneration des Gewebes und reduzieren Entzündungen. ESWT ist eine bewährte Therapieform zur Behandlung einer Vielzahl von Beschwerden des Bewegungsapparats.
- list:
  - listitem:
    - strong: "Fokussierte Stoßwellen:"
    - text: Hochpräzise, gebündelte Energie zur Behandlung tieferliegender Strukturen.
  - listitem:
    - strong: "Radiale Stoßwellen:"
    - text: Flächigere Wellen zur Behandlung oberflächlicherer Gewebestrukturen.
- heading "Einsatzmöglichkeiten der Stoßwellentherapie" [level=2]
- paragraph: "Die Stoßwellentherapie wird erfolgreich bei verschiedenen muskuloskelettalen Beschwerden eingesetzt:"
- list:
  - listitem:
    - strong: "Sehnenentzündungen:"
    - text: Behandlung von Tendinopathien wie Achillessehnenentzündungen oder Tennisellenbogen.
  - listitem:
    - strong: "Faszienschmerzen:"
    - text: Linderung von Beschwerden durch verklebte oder entzündete Faszien.
  - listitem:
    - strong: "Verkalkungen:"
    - text: Auflösung von Kalkablagerungen, z. B. in der Schulter (Kalkschulter).
  - listitem:
    - strong: "Triggerpunkte:"
    - text: Behandlung schmerzhafter Muskelverspannungen und Verknotungen.
  - listitem:
    - strong: "Plantarfasziitis:"
    - text: Linderung von Fersenschmerzen durch Behandlung der Plantarfaszie.
  - listitem:
    - strong: "Sportverletzungen:"
    - text: Unterstützung der Heilung bei Überlastungsschäden und chronischen Verletzungen.
- img "IMG_5285-scaled"
- heading "Theoretische Grundlagen der Stoßwellentherapie" [level=2]
- paragraph: "Die Stoßwellentherapie basiert auf der Übertragung von mechanischen Schallwellen in das Gewebe, was eine Vielzahl von positiven Effekten auslöst:"
- list:
  - listitem:
    - strong: "Förderung der Durchblutung:"
    - text: Erhöht die Sauerstoffversorgung und Nährstoffzufuhr im betroffenen Gewebe.
  - listitem:
    - strong: "Stimulation der Zellregeneration:"
    - text: Aktiviert die Selbstheilungskräfte und fördert die Neubildung von Gewebe.
  - listitem:
    - strong: "Reduktion von Entzündungen:"
    - text: Hemmt entzündliche Prozesse und lindert so die Schmerzsymptomatik.
  - listitem:
    - strong: "Auflösung von Verkalkungen:"
    - text: Mechanische Wellen helfen, Kalkablagerungen aufzuspalten und abzutransportieren.
- heading "Ablauf der Stoßwellentherapie bei Dolomed" [level=2]
- paragraph: "Eine typische Behandlung mit Stoßwellentherapie umfasst die folgenden Schritte:"
- list:
  - listitem:
    - strong: "1. Erstgespräch und Diagnostik:"
    - text: Erhöht die Sauerstoffversorgung und Nährstoffzufuhr im betroffenen Gewebe.
  - listitem:
    - strong: "2. Planung der Therapie:"
    - text: Auswahl der passenden Stoßwellentherapie (fokussiert oder radial) je nach Diagnose.
  - listitem:
    - strong: "3. Durchführung der Behandlung:"
    - text: Anwendung der Stoßwellen direkt auf die schmerzende Region. Eine Sitzung dauert in der Regel 10 bis 20 Minuten.
  - listitem:
    - strong: "4. Nachsorge:"
    - text: Überwachung der Heilung und gegebenenfalls Anpassung des Therapieplans.
- heading "Vorteile der Stoßwellentherapie" [level=2]
- paragraph: "Die Stoßwellentherapie bietet eine Vielzahl von Vorteilen für Patienten mit muskuloskelettalen Beschwerden:"
- list:
  - listitem:
    - strong: "Nicht-invasiv:"
    - text: Keine Operation, keine Narbenbildung.
  - listitem:
    - strong: "Schmerzfrei:"
    - text: Die meisten Patienten empfinden die Behandlung als angenehm oder nur leicht unangenehm.
  - listitem:
    - strong: "Schnelle Ergebnisse:"
    - text: Viele Patienten berichten bereits nach wenigen Sitzungen von einer deutlichen Verbesserung.
  - listitem:
    - strong: "Breites Anwendungsspektrum:"
    - text: Effektiv bei akuten und chronischen Beschwerden.
  - listitem:
    - strong: "Wissenschaftlich fundiert:"
    - text: Zahlreiche Studien belegen die Wirksamkeit der Stoßwellentherapie.
- heading "Wie weiter?" [level=2]
- text: Leiden Sie unter muskuloskelettalen Beschwerden? Die extrakorporale Stoßwellentherapie bei Dolomed kann Ihnen helfen, Schmerzen zu lindern und Ihre Beweglichkeit wiederherzustellen. Kontaktieren Sie uns noch heute unter
- link "info@dolomed.ch":
  - /url: mailto:info@dolomed.ch
- text: ", um einen Termin zu vereinbaren und mehr über die Vorteile dieser innovativen Behandlungsmethode zu erfahren."
- link "Einen Termin vereinbaren":
  - /url: "#"
- heading "Häufig gestellte Fragen (FAQ)" [level=2]
- button "Ist die Stoßwellentherapie schmerzhaft?" [expanded]
- region "Ist die Stoßwellentherapie schmerzhaft?": Die Behandlung ist in der Regel gut verträglich. Einige Patienten empfinden ein leichtes Druckgefühl während der Anwendung.
- button "Wie lange dauert eine Sitzung?"
- button "Wie viele Sitzungen sind notwendig?"
- button "Gibt es Nebenwirkungen?"
- button "Für welche Beschwerden ist die Stoßwellentherapie geeignet?"
- button "Wird die Stoßwellentherapie von der Krankenkasse übernommen?"
- button "Wie schnell wirkt die Stoßwellentherapie?"
- text: Mit der extrakorporalen Stoßwellentherapie bei Dolomed bieten wir Ihnen eine effektive und moderne Lösung für Ihre Beschwerden. Lassen Sie uns gemeinsam daran arbeiten, Ihre Lebensqualität nachhaltig zu verbessern. Vereinbaren Sie jetzt einen Termin!
- heading "ZUWEISUNG / BON DE DÉLÉGATION" [level=2]
- paragraph: Kompetenzzentrum für Schmerzmedizin Centre de compétence pour la médecine de la douleur
- list:
  - listitem: Standort Biel / Site Bienne
- list:
  - listitem: Bahnhofplatz 2C / Place de la Gare 2C 2. Stock / 2ème étage, 2502 Biel-Bienne
- list:
  - listitem:
    - img
    - text: Telefonnummer
- list:
  - listitem:
    - link "+41 32 324 39 90":
      - /url: tel:+41%2032%20324%2039%2090
- list:
  - listitem:
    - img
    - text: E-Mail
- list:
  - listitem:
    - link "info@dolomed.ch":
      - /url: mailto:info@dolomed.ch
- list:
  - listitem: Standort Bern / Site de Berne
- list:
  - listitem: Sidlerstrasse 4, 3012 Bern-Berne 2. Stock / 2ème étages, 2502 Bern-Berne
- list:
  - listitem:
    - img
    - text: Telefonnummer
- list:
  - listitem:
    - link "+41 32 324 39 90":
      - /url: tel:+41%2032%20324%2039%2090
- list:
  - listitem:
    - img
    - text: E-Mail
- list:
  - listitem:
    - link "info@dolomed.ch":
      - /url: mailto:info@dolomed.ch
- contentinfo:
  - link "Image link":
    - /url: https://dolomed.ch/
    - img "Image link"
  - text: Seiten
  - link "Startseite":
    - /url: https://dolomed.ch/
  - link "Angebot":
    - /url: https://dolomed.ch///#angebot
  - link "Für Patienten und Zuweiser":
    - /url: https://dolomed.ch//#patienten
  - link "Kontakt":
    - /url: https://dolomed.ch//#kontakt
  - link "Team":
    - /url: https://dolomed.ch/#team
  - link "Karriere":
    - /url: https://dolomed.ch//#karriere
  - text: Krankheiten
  - link "Bewegungsapparat":
    - /url: /bewegungsapparat/
  - link "Schmerzen Innerer organe":
    - /url: https://dolomed.ch/schmerzen-innerer-organe/
  - link "kopfschmerzen und gesichtsschmerzen":
    - /url: https://dolomed.ch/kopfschmerzen-und-gesichtsschmerzen/
  - link "gefaesserkrankungen":
    - /url: https://dolomed.ch/gefaesserkrankungen/
  - link "behandlung von nervenschmerzen":
    - /url: https://dolomed.ch/behandlung-von-nervenschmerzen/
  - text: Therapie
  - link "nervenstimulation":
    - /url: https://dolomed.ch/nervenstimulation/
  - link "natuerliche linderung durch akupunktur":
    - /url: https://dolomed.ch/natuerliche-linderung-durch-akupunktur/
  - link "chronischen schmerzen":
    - /url: https://dolomed.ch/chronischen-schmerzen/
  - link "behandlung von chronischen":
    - /url: https://dolomed.ch/behandlung-von-chronischen/
  - link "behandlung von rueckenschmerzen":
    - /url: https://dolomed.ch/behandlung-von-rueckenschmerzen/
  - link "plasma prp":
    - /url: https://dolomed.ch/plasma-prp/
  - link "stammzellentherapie":
    - /url: https://dolomed.ch/stammzellentherapie/
  - link "Lasertherapie":
    - /url: /lasertherapie/
  - link "Extrakorporale Stoßwellentherapie":
    - /url: /extrakorporale-stosswellentherapie/
  - link "Bewegungstherapie und Faszientraining":
    - /url: /bewegungstherapie-und-faszientraining/
  - link "Topische Therapie mit hochkonzentriertem Capsaicin":
    - /url: /topische-therapie-mit-hochkonzentriertem-capsaicin/
  - text: Rechtliches
  - link "Impressum":
    - /url: /impressum
  - link "Datenschutz":
    - /url: /datenschutz
  - paragraph: Folgen Sie uns
  - list:
    - listitem:
      - link:
        - /url: https://www.instagram.com/dolomed.ag
        - img
  - paragraph: Copyright 2025 – Alle Rechte vorbehalten Dolomed.
- button
- button:
  - img
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- heading "Wir freuen uns immer mit Ihnen zu sprechen." [level=2]
- text: Unterhalten wir uns
- link "Phone +41 32 324 39 90":
  - /url: tel:+41323243990
  - img "Phone"
  - text: +41 32 324 39 90
- link "Email info@dolomed.ch":
  - /url: mailto:info@dolomed.ch
  - img "Email"
  - text: info@dolomed.ch
- text: Wir sind Mo-Fr von 8-18 Uhr kostenlos für Sie erreichbar.
- list:
  - listitem:
    - img "list icon"
    - heading "Termin vereinbaren" [level=3]
  - listitem:
    - link "list icon Kontaktseite öffnen":
      - /url: https://dolomed.ch/#kontaktform
      - img "list icon"
      - heading "Kontaktseite öffnen" [level=3]
- button:
  - img
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- text: Senden Sie eine Nachricht an Dolomed Bei Fragen oder Anliegen wenden Sie sich bitte an uns. Schnelle Antworten und Hilfe sind garantiert.
- list
- form "Kontaktformular":
  - paragraph:
    - text: Name
    - textbox "Name"
  - paragraph:
    - text: E-Mail-Adresse
    - textbox "E-Mail-Adresse"
  - paragraph:
    - text: Telefonnummer
    - textbox "Telefonnummer"
  - paragraph:
    - text: Schreiben Sie unten Ihre Nachricht
    - textbox "Schreiben Sie unten Ihre Nachricht"
  - paragraph:
    - button "Senden"
- button:
  - img
- button "Close contact slide button":
  - img "Close"
  - text: contact slide button
- text: Rückruf anfordern Bei Fragen oder Anliegen wenden Sie sich bitte an uns. Schnelle Antworten und Hilfe sind garantiert.
- list
- form "Kontaktformular":
  - paragraph:
    - text: Name
    - textbox "Name"
  - paragraph:
    - text: E-Mail-Adresse
    - textbox "E-Mail-Adresse"
  - paragraph:
    - text: Telefonnummer
    - textbox "Telefonnummer"
  - paragraph:
    - text: Schreiben Sie unten Ihre Nachricht
    - textbox "Schreiben Sie unten Ihre Nachricht"
  - paragraph:
    - button "Senden"
- link "Go to top":
  - /url: "#"
  - img
- text: mobile
```

# Test source

```ts
   1 | import { test, expect, Page, Browser } from '@playwright/test';
   2 | import { ImageComparison, DiffResult, SizeMismatchTolerance } from './image-diff';
   3 |
   4 | export interface VisualTestConfig {
   5 |   url: string;
   6 |   testName: string;
   7 |   diffThreshold?: number;
   8 |   viewport?: { width: number; height: number };
   9 |   waitForLoadState?: 'load' | 'domcontentloaded' | 'networkidle';
   10 |   customStyles?: string;
   11 |   scrollToBottom?: boolean;
   12 |   waitAfterScroll?: number;
   13 |   sizeMismatchTolerance?: SizeMismatchTolerance;
   14 | }
   15 |
   16 | export class VisualTestHelper {
   17 |   private imageComparison: ImageComparison;
   18 |   private page!: Page;
   19 |   private timestamp: string;
   20 |   private currentUser: string;
   21 |
   22 |   constructor() {
   23 |     this.imageComparison = new ImageComparison();
   24 |     this.timestamp = new Date().toISOString().replace('T', ' ').slice(0, 19);
   25 |     this.currentUser = process.env.USER || process.env.USERNAME || 'unknown';
   26 |   }
   27 |
   28 |   async setup(browser: Browser, viewport = { width: 1366, height: 768 }): Promise<void> {
   29 |     const context = await browser.newContext({ viewport });
   30 |     this.page = await context.newPage();
   31 |     console.log(`Test setup initialized at ${this.timestamp} by ${this.currentUser}`);
   32 |   }
   33 |
   34 |   async cleanup(): Promise<void> {
   35 |     if (this.page) {
   36 |       await this.page.close();
   37 |     }
   38 |   }
   39 |
   40 |   async runVisualTest(config: VisualTestConfig): Promise<DiffResult> {
   41 |     const {
   42 |       url,
   43 |       testName,
   44 |       diffThreshold = 0.1,
   45 |       waitForLoadState = 'networkidle',
   46 |       customStyles,
   47 |       scrollToBottom = true,
   48 |       waitAfterScroll = 1000,
   49 |       sizeMismatchTolerance
   50 |     } = config;
   51 |
   52 |     console.log(`Starting visual test at ${this.timestamp}`);
   53 |     console.log(`Test running by user: ${this.currentUser}`);
   54 |     console.log('Page dimensions:', await this.page.viewportSize());
   55 |
   56 |     try {
   57 |       // Navigate to the page
   58 |       await this.page.goto(url);
   59 |       await this.page.waitForLoadState(waitForLoadState);
   60 |
   61 |       // Apply custom styles if provided
   62 |       if (customStyles) {
   63 |         await this.page.addStyleTag({ content: customStyles });
   64 |       }
   65 |
   66 |       // Auto-scroll if enabled
   67 |       if (scrollToBottom) {
   68 |         await this.autoScroll(waitAfterScroll);
   69 |       }
   70 |
   71 |       // Perform image comparison
   72 |       const diffResult = await this.imageComparison.compareScreenshots(
   73 |         this.page, 
   74 |         testName, 
   75 |         diffThreshold, 
   76 |         sizeMismatchTolerance
   77 |       );
   78 |       const reportPath = this.imageComparison.generateDiffReport(testName, diffResult);
   79 |       
   80 |       console.log(`
   81 |         Test Results:
   82 |         - Timestamp: ${this.timestamp}
   83 |         - User: ${this.currentUser}
   84 |         - Report Path: ${reportPath}
   85 |         - Diff Percentage: ${diffResult.diffPercentage.toFixed(2)}%
   86 |       `);
   87 |
   88 |       // Assert the diff percentage
>  89 |       expect(diffResult.diffPercentage).toBeLessThanOrEqual(diffThreshold);
      |                                         ^ Error: expect(received).toBeLessThanOrEqual(expected)
   90 |
   91 |       return diffResult;
   92 |
   93 |     } catch (error) {
   94 |       console.error(`
   95 |         Test failed at ${this.timestamp}
   96 |         User: ${this.currentUser}
   97 |         Error: ${error}
   98 |       `);
   99 |       throw error;
  100 |     }
  101 |   }
  102 |
  103 |   private async autoScroll(waitAfterScroll: number = 1000): Promise<void> {
  104 |     await this.page.evaluate(async () => {
  105 |       await new Promise<void>((resolve) => {
  106 |         let totalHeight = 0;
  107 |         const distance = 100;
  108 |         const timer = setInterval(() => {
  109 |           const scrollHeight = document.documentElement.scrollHeight;
  110 |           window.scrollBy(0, distance);
  111 |           totalHeight += distance;
  112 |
  113 |           if (totalHeight >= scrollHeight) {
  114 |             clearInterval(timer);
  115 |             window.scrollTo(0, scrollHeight);
  116 |             resolve();
  117 |           }
  118 |         }, 240);
  119 |       });
  120 |     });
  121 |
  122 |     await this.page.waitForTimeout(waitAfterScroll);
  123 |   }
  124 |
  125 |   // Getter method for accessing the image comparison instance if needed
  126 |   get imageComparisonInstance(): ImageComparison {
  127 |     return this.imageComparison;
  128 |   }
  129 |
  130 |   // Getter method for accessing the page instance if needed
  131 |   getPage(): Page {
  132 |     return this.page;
  133 |   }
  134 | }
```